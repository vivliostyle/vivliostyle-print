!function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,n=(function(e,n){var i;i=function(e){e=e||{};var n,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==t?t:this;function o(){o=function(){},r.Symbol||(r.Symbol=u)}var a=0;function u(t){return"jscomp_symbol_"+(t||"")+a++}function s(){o();var t=r.Symbol.iterator;t||(t=r.Symbol.iterator=r.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&i(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return h(this)}}),s=function(){}}function h(t){var e=0;return function(t){return s(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function l(t){s();var e=t[Symbol.iterator];return e?e.call(t):h(t)}function f(t){if(!(t instanceof Array)){t=l(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}function c(t,e){if(e){for(var n=r,o=t.split("."),a=0;a<o.length-1;a++){var u=o[a];u in n||(n[u]={}),n=n[u]}(u=e(a=n[o=o[o.length-1]]))!=a&&null!=u&&i(n,o,{configurable:!0,writable:!0,value:u})}}function p(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""}c("Array.from",function(t){return t||function(t,e,n){s(),e=e||function(t){return t};var i=[];if("function"==typeof(r=t[Symbol.iterator]))for(t=r.call(t);!(r=t.next()).done;)i.push(e.call(n,r.value));else for(var r=t.length,o=0;o<r;o++)i.push(e.call(n,t[o]));return i}}),c("String.prototype.startsWith",function(t){return t||function(t,e){var n=p(this,t,"startsWith");t+="";for(var i=n.length,r=t.length,o=Math.max(0,Math.min(0|e,n.length)),a=0;a<r&&o<i;)if(n[o++]!=t[a++])return!1;return a>=r}}),c("Object.assign",function(t){return t||function(t,e){for(var n=arguments,i=1;i<arguments.length;i++){var r=n[i];if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}}),c("Array.prototype.values",function(t){return t||function(){return function(t,e){s(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,function(t,e){return e})}}),c("String.prototype.endsWith",function(t){return t||function(t,e){var n=p(this,t,"endsWith");t+="",void 0===e&&(e=n.length);for(var i=Math.max(0,Math.min(0|e,n.length)),r=t.length;0<r&&0<i;)if(n[--i]!=t[--r])return!1;return 0>=r}}),c("String.prototype.includes",function(t){return t||function(t,e){return-1!==p(this,t,"includes").indexOf(t,e||0)}}),c("Array.prototype.findIndex",function(t){return t||function(t,e){var n;t:{(n=this)instanceof String&&(n=String(n));for(var i=n.length,r=0;r<i;r++)if(t.call(e,n[r],r,n)){n=r;break t}n=-1}return n}});var b=this;function d(t,n){var i,r=void 0!==e&&e?e:window,o=t.split(".");r=r||b;o[0]in r||!r.execScript||r.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||void 0===n?r=r[i]?r[i]:r[i]={}:r[i]=n}function g(t,e){function n(){}n.prototype=e.prototype,t.ng=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.nh=function(t,n,i){for(var r=arguments,o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=r[a];return e.prototype[n].apply(t,o)}}function v(t){if(Error.captureStackTrace)Error.captureStackTrace(this,v);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function w(t,e){e.unshift(t),v.call(this,function(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}.apply(null,e)),e.shift()}function m(t,e){throw new w("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function y(t){var e=t.error,n=e&&(e.frameTrace||e.stack);return t=[].concat(t.messages),e&&(0<t.length&&(t=t.concat(["\n"])),t=t.concat([e.toString()]),n&&(t=t.concat(["\n"]).concat(n))),t}function x(t){var e=null;return(t=Array.from(t))[0]instanceof Error&&(e=t.shift()),{error:e,messages:t}}function E(t){this.f=t,this.Pb={}}function S(t,e,n){(t=t.Pb[e])&&t.forEach(function(t){t(n)})}function k(t,e){var n=C,i=n.Pb[t];i||(i=n.Pb[t]=[]),i.push(e)}g(v,Error),v.prototype.name="CustomError",g(w,v),w.prototype.name="AssertionError",E.prototype.debug=function(t){var e=x(arguments),n=y(e);this.f&&(this.f.debug?this.f.debug.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n)))),S(this,1,e)},E.prototype.g=function(t){var e=x(arguments),n=y(e);this.f&&(this.f.info?this.f.info.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n)))),S(this,2,e)},E.prototype.b=function(t){var e=x(arguments),n=y(e);this.f&&(this.f.warn?this.f.warn.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n)))),S(this,3,e)},E.prototype.error=function(t){var e=x(arguments),n=y(e);this.f&&(this.f.error?this.f.error.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n)))),S(this,4,e)};var C=new E;function A(t){var e=t.match(/^([^#]*)/);return e?e[1]:t}var T=window.location.href,N=window.location.href;function I(t,e){if(e.startsWith("data:"))return t||e;if(!e||t.match(/^\w{2,}:/))return t.toLowerCase().match("^javascript:")?"#":(t.match(/^\w{2,}:\/\/[^\/]+$/)&&(t+="/"),t);var n;if(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e+="/"),t.match(/^\/\//))return(n=e.match(/^(\w{2,}:)\/\//))?n[1]+t:t;if(t.match(/^\//))return(n=e.match(/^(\w{2,}:\/\/[^\/]+)\//))?n[1]+t:t;t.match(/^\.(\/|$)/)&&(t=t.substr(2));var i=(n=e).match(/^([^#?]*)/);if(e=i?i[1]:n,t.match(/^\#/))return e+t;if(0>(n=e.lastIndexOf("/")))return t;if(n<e.length-1&&e.lastIndexOf(".")<n){if(""==t)return e;n=(e+="/").length-1}for(i=e.substr(0,n+1)+t;!(0>=(n=i.indexOf("/../")));){var r=i.lastIndexOf("/",n-1);if(0>=r)break;i=i.substr(0,r)+i.substr(n+3)}return i.replace(/\/(\.\/)+/g,"/")}function _(t){var e;return(e=/^(https?:)\/\/github\.com\/([^\/]+\/[^\/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/"+e[2]+"/"+(e[3]?"":"master/")+e[4]:(e=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^\/]+\/files\/[^\/.]+\.html)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/aozorabunko/aozorabunko/master/"+e[2]:(e=/^(https?:)\/\/gist\.github\.com\/([^\/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(t))?t=e[1]+"//gist.githubusercontent.com/"+e[2]+"/raw/"+e[6]:(e=/^(https?:)\/\/(?:[^\/.]+\.)?jsbin\.com\/(?!(?:blog|help)\b)(\w+)((\/\d+)?).*$/.exec(t))&&(t=e[1]+"//output.jsbin.com/"+e[2]+e[3]+"/"),t}function L(t){return t=new RegExp("#(.*&)?"+W(t)+"=([^#&]*)"),(t=window.location.href.match(t))?t[2]:null}function j(t){return null==t?t:t.toString()}function O(){this.b=[null]}O.prototype.length=function(){return this.b.length-1};var R=" -webkit- -moz- -ms- -o- -epub-".split(" "),F={};function P(t,e){if("writing-mode"===e){var n=document.createElement("span");return"-ms-"===t?(n.style.setProperty(t+e,"tb-rl"),"tb-rl"===n.style["writing-mode"]):(n.style.setProperty(t+e,"vertical-rl"),"vertical-rl"===n.style[t+e])}return"string"==typeof document.documentElement.style[function(t,e){return t&&(e="-"+e,"moz"===(t=t.replace(/-/g,""))&&(t="Moz")),t+e.replace(/-[a-z]/g,function(t){return t.substr(1).toUpperCase()})}(t,e)]}function D(t){if((e=F[t])||null===e)return e;switch(t){case"text-combine-upright":if(P("-webkit-","text-combine")&&!P("","text-combine-upright"))return F[t]=["-webkit-text-combine"],["-webkit-text-combine"];break;case"writing-mode":if(P("-ms-","writing-mode"))return F[t]=["-ms-writing-mode"],["-ms-writing-mode"];break;case"filter":if(P("-webkit-","filter"))return F[t]=["-webkit-filter"],["-webkit-filter"];break;case"clip-path":if(P("-webkit-","clip-path"))return F[t]=["-webkit-clip-path","clip-path"];break;case"margin-inline-start":if(P("-webkit-","margin-start"))return F[t]=["-webkit-margin-start"],["-webkit-margin-start"];break;case"margin-inline-end":if(P("-webkit-","margin-end"))return F[t]=["-webkit-margin-end"],["-webkit-margin-end"];case"padding-inline-start":if(P("-webkit-","padding-start"))return F[t]=["-webkit-padding-start"],["-webkit-padding-start"];break;case"padding-inline-end":if(P("-webkit-","padding-end"))return F[t]=["-webkit-padding-end"],["-webkit-padding-end"]}for(var e,n=(e=l(R)).next();!n.done;n=e.next())if(P(n=n.value,t))return e=n+t,F[t]=[e],[e];return C.b("Property not supported by the browser: ",t),F[t]=null}function M(t,e,n){try{var i=D(e);i&&i.forEach(function(e){if("-ms-writing-mode"===e)switch(n){case"horizontal-tb":n="lr-tb";break;case"vertical-rl":n="tb-rl";break;case"vertical-lr":n="tb-lr"}else if("-webkit-text-combine"===e)switch(n){case"all":n="horizontal"}t&&t.style&&t.style.setProperty(e,n)})}catch(t){C.b(t)}}function B(t,e,n){try{var i=F[e];return t.style.getPropertyValue(i?i[0]:e)}catch(t){}return n||""}function U(t){var e=t.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang");return e||"http://www.w3.org/1999/xhtml"!=t.namespaceURI||(e=t.getAttribute("lang")),e}function z(){this.b=[]}function V(t){return"\\"+t.charCodeAt(0).toString(16)+" "}function X(t){return t.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,V)}function H(t){return t.replace(/[\u0000-\u001F"\\]/g,V)}function G(t){return t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function Y(t){return!!t.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function W(t,e){return t.replace(/[^-a-zA-Z0-9_]/g,function(t){return("string"==typeof e?e:"\\u")+(65536|t.charCodeAt(0)).toString(16).substr(1)})}function $(t){if(!t)throw"Assert failed"}function K(t,e){for(var n=0,i=t;;){if($(n<=i),$(!n||!e(n-1)),$(i==t||e(i)),n==i)return n;var r=n+i>>1;e(r)?i=r:n=r+1}}function J(t,e){return t-e}function Z(t,e){for(var n={},i=l(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&!n[o]&&(n[o]=r)}return n}z.prototype.append=function(t){return this.b.push(t),this},z.prototype.toString=function(){var t=this.b.join("");return this.b=[t],t};var q={};function Q(t,e){for(var n={},i=l(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&(n[o]?n[o].push(r):n[o]=[r])}return n}function tt(t,e){for(var n=Array(t.length),i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function et(){this.Pb={}}function nt(t,e){var n=t.Pb[e.type];if(n){e.target=t,e.currentTarget=t;for(var i=0;i<n.length;i++)n[i](e)}}et.prototype.addEventListener=function(t,e,n){n||((n=this.Pb[t])?n.push(e):this.Pb[t]=[e])},et.prototype.removeEventListener=function(t,e,n){!n&&(t=this.Pb[t])&&(0<=(e=t.indexOf(e))&&t.splice(e,1))};var it=null,rt=null,ot=null,at=null;function ut(t){return 1==t.nodeType&&(t=t.getAttribute("id"))&&t.match(/^[-a-zA-Z_0-9.\u007F-\uFFFF]+$/)?t:null}function st(t){return"^"+t}function ht(t){return t.substr(1)}function lt(t){return t?t.replace(/\^[\[\]\(\),=;^]/g,ht):t}function ft(t){for(var e={};t;){var n=t.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!n)break;var i,r=n[1];t:{i=n[2];var o=[];do{var a=i.match(/^(\^,|[^,])*/),u=lt(a[0]);if(!(i=i.substr(a[0].length+1))&&!o.length){i=u;break t}o.push(u)}while(i);i=o}e[r]=i,t=t.substr(n[0].length)}return e}function ct(){}function pt(t,e,n){this.index=t,this.id=e,this.Hb=n}function bt(t,e,n,i){this.offset=t,this.f=e,this.b=n,this.Hb=i}function dt(){this.pa=null}function gt(t,e){for(var n={node:e.documentElement,offset:0,K:!1,Hb:null,sd:null},i=0;i<t.pa.length;i++)if(!t.pa[i].h(n)){n.sd=new dt,n.sd.pa=t.pa.slice(i+1);break}return n}function vt(t,e,n){for(var i=!1,r=null,o=[],a=e.parentNode,u="",s="";e;){switch(e.nodeType){case 3:case 4:case 5:var h=e.textContent,l=h.length;i?(n+=l,u||(u=h)):(n>l&&(n=l),i=!0,u=h.substr(0,n),s=h.substr(n)),e=e.previousSibling;continue;case 8:e=e.previousSibling;continue}break}for((0<n||u||s)&&(u=t.trim(u,!1),s=t.trim(s,!0),o.push(new bt(n,u,s,r)),r=null);a&&a&&9!=a.nodeType;){for(n=i?null:ut(e),i=i?1:0;e;)1==e.nodeType&&(i+=2),e=e.previousSibling;o.push(new pt(i,n,r)),r=null,e=a,a=a.parentNode,i=!1}o.reverse(),t.pa?(o.push(new ct),t.pa=o.concat(t.pa)):t.pa=o}function wt(t){return{fontFamily:t.fontFamily,lineHeight:t.lineHeight,margin:t.margin,xe:t.xe,pe:t.pe,we:t.we,Ie:t.Ie,ub:t.ub,Dc:t.Dc,af:Object.assign({},t.af),vc:t.vc?Object.assign({},t.vc):void 0}}ct.prototype.g=function(t){t.append("!")},ct.prototype.h=function(){return!1},pt.prototype.g=function(t){t.append("/"),t.append(this.index.toString()),(this.id||this.Hb)&&(t.append("["),this.id&&t.append(this.id),this.Hb&&(t.append(";s="),t.append(this.Hb)),t.append("]"))},pt.prototype.h=function(t){if(1!=t.node.nodeType)throw Error("E_CFI_NOT_ELEMENT");var e=t.node,n=e.children,i=n.length,r=Math.floor(this.index/2)-1;if(0>r||!i?(n=e.firstChild,t.node=n||e):(n=n[Math.min(r,i-1)],1&this.index&&((e=n.nextSibling)&&1!=e.nodeType?n=e:t.K=!0),t.node=n),this.id&&(t.K||this.id!=ut(t.node)))throw Error("E_CFI_ID_MISMATCH");return t.Hb=this.Hb,!0},bt.prototype.h=function(t){if(0<this.offset&&!t.K){for(var e=this.offset,n=t.node;;){var i=n.nodeType;if(1==i)break;var r=n.nextSibling;if(3<=i&&5>=i){if(e<=(i=n.textContent.length))break;if(!r){e=i;break}e-=i}if(!r){e=0;break}n=r}t.node=n,t.offset=e}return t.Hb=this.Hb,!0},bt.prototype.g=function(t){t.append(":"),t.append(this.offset.toString()),(this.f||this.b||this.Hb)&&(t.append("["),(this.f||this.b)&&(this.f&&t.append(this.f.replace(/[\[\]\(\),=;^]/g,st)),t.append(","),this.b&&t.append(this.b.replace(/[\[\]\(\),=;^]/g,st))),this.Hb&&(t.append(";s="),t.append(this.Hb)),t.append("]"))},dt.prototype.trim=function(t,e){return t.replace(/\s+/g," ").match(e?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")},dt.prototype.toString=function(){if(!this.pa)return"";var t=new z;t.append("epubcfi(");for(var e=0;e<this.pa.length;e++)this.pa[e].g(t);return t.append(")"),t.toString()};var mt={fontFamily:"serif",lineHeight:1.25,margin:8,xe:!1,pe:25,we:!1,Ie:!1,ub:!1,Dc:1,af:{vivliostyle:!0,print:!0},vc:void 0},yt={};function xt(t,e,n,i){return"matrix("+(t=Math.min((t-0)/n,(e-0)/i))+",0,0,"+t+",0,0)"}function Et(t){return'"'+H(""+t)+'"'}function St(t){return X(""+t)}function kt(t,e){return t?X(t)+"."+X(e):X(e)}var Ct=0;function At(t,e){if(this.parent=t,this.u="S"+Ct++,this.children=[],this.b=new pe(this,0),this.f=new pe(this,1),this.j=new pe(this,!0),this.h=new pe(this,!1),t&&t.children.push(this),this.values={},this.D={},this.B={},this.l=e,!t){var n=this.B;n.floor=Math.floor,n.ceil=Math.ceil,n.round=Math.round,n.sqrt=Math.sqrt,n.min=Math.min,n.max=Math.max,n.letterbox=xt,n["css-string"]=Et,n["css-name"]=St,n.typeof=function(t){return typeof t},Tt(this,"page-width",function(){return this.jc()}),Tt(this,"page-height",function(){return this.ic()}),Tt(this,"pref-font-family",function(){return this.$.fontFamily}),Tt(this,"pref-night-mode",function(){return this.$.Ie}),Tt(this,"pref-hyphenate",function(){return this.$.xe}),Tt(this,"pref-margin",function(){return this.$.margin}),Tt(this,"pref-line-height",function(){return this.$.lineHeight}),Tt(this,"pref-column-width",function(){return this.$.pe*this.fontSize}),Tt(this,"pref-horizontal",function(){return this.$.we}),Tt(this,"pref-spread-view",function(){return this.$.ub}),Tt(this,"pub-title",function(){return Et(this.yb?this.yb:"")}),Tt(this,"doc-title",function(){return Et(this.fb?this.fb:"")})}}function Tt(t,e,n){t.values[e]=new le(t,n,e)}function Nt(t){switch(t.toLowerCase()){case"vw":case"vh":case"vi":case"vb":case"vmin":case"vmax":case"pvw":case"pvh":case"pvi":case"pvb":case"pvmin":case"pvmax":return!0;default:return!1}}var It={px:1,in:96,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,dppx:1,dpi:1/96,dpcm:2.54/96};function _t(t){switch(t){case"q":case"rem":return!0;default:return!1}}function Lt(t,e,n,i){this.Cb=e,this.Lc=n,this.Y=null,this.jc=function(){return this.Y?this.Y:this.$.ub?Math.floor(e/2)-this.$.Dc:e},this.S=null,this.ic=function(){return this.S?this.S:n},this.u=i,this.Za=null,this.fontSize=function(){return this.Za?this.Za:i},this.$=mt,this.J={},this.G=this.Z=this.ca=null}function jt(t,e){t.J[e.u]={};for(var n=0;n<e.children.length;n++)jt(t,e.children[n])}function Ot(t,e,n){if(Nt(e)){var i=t.jc()/100,r=t.ic()/100,o=null!=t.ca?t.ca/100:i,a=null!=t.Z?t.Z/100:r;switch(e){case"vw":return o;case"vh":return a;case"vi":return t.G?a:o;case"vb":return t.G?o:a;case"vmin":return o<a?o:a;case"vmax":return o>a?o:a;case"pvw":return i;case"pvh":return r;case"pvi":return t.G?r:i;case"pvb":return t.G?i:r;case"pvmin":return i<r?i:r;case"pvmax":return i>r?i:r}}return"em"==e||"rem"==e?n?t.u:t.fontSize():"ex"==e?It.ex*(n?t.u:t.fontSize())/It.em:It[e]}function Rt(t,e,n){do{var i=e.values[n];if(i||e.l&&(i=e.l.call(t,n,!1)))return i;e=e.parent}while(e);throw Error("Name '"+n+"' is undefined")}function Ft(t,e,n,i,r){do{var o=e.D[n];if(o||e.l&&(o=e.l.call(t,n,!0)))return o;if(o=e.B[n]){if(r)return e.b;for(n=Array(i.length),r=0;r<i.length;r++)n[r]=i[r].evaluate(t);return new pe(e,o.apply(t,n))}e=e.parent}while(e);throw Error("Function '"+n+"' is undefined")}function Pt(t){this.b=t,this.g="_"+Ct++}function Dt(t,e,n,i){var r=i[t.g];return null!=r?r!==yt&&r:(i[t.g]=yt,e=t.wc(e,n,i),i[t.g]=e)}function Mt(t,e){Pt.call(this,t),this.f=e}function Bt(t,e,n){Pt.call(this,t),this.f=e,this.h=n}function Ut(t,e,n){Bt.call(this,t,e,n)}function zt(t,e,n){Bt.call(this,t,e,n)}function Vt(t,e,n){Bt.call(this,t,e,n)}function Xt(t,e,n){Bt.call(this,t,e,n)}function Ht(t,e){Mt.call(this,t,e)}function Gt(t,e){Mt.call(this,t,e)}function Yt(t,e,n){Bt.call(this,t,e,n)}function Wt(t,e,n){Bt.call(this,t,e,n)}function $t(t,e,n){Bt.call(this,t,e,n)}function Kt(t,e,n){Bt.call(this,t,e,n)}function Jt(t,e,n){Bt.call(this,t,e,n)}function Zt(t,e,n){Bt.call(this,t,e,n)}function qt(t,e,n){Bt.call(this,t,e,n)}function Qt(t,e,n){Bt.call(this,t,e,n)}function te(t,e,n){Bt.call(this,t,e,n)}function ee(t,e,n){Bt.call(this,t,e,n)}function ne(t,e,n){Bt.call(this,t,e,n)}function ie(t,e,n){Bt.call(this,t,e,n)}function re(t,e,n){Bt.call(this,t,e,n)}function oe(t,e,n){Bt.call(this,t,e,n)}function ae(t,e,n){Bt.call(this,t,e,n)}function ue(t,e,n){Pt.call(this,t),this.L=e,this.ka=n.toLowerCase()}function se(t,e){Pt.call(this,t),this.f=e}function he(t,e,n){Pt.call(this,t),this.f=e,this.name=n}function le(t,e,n){Pt.call(this,t),this.Pc=e,this.Xc=n}function fe(t,e,n){Pt.call(this,t),this.h=e,this.f=n}function ce(t,e,n,i){Pt.call(this,t),this.f=e,this.j=n,this.h=i}function pe(t,e){Pt.call(this,t),this.f=e}function be(t,e,n){Pt.call(this,t),this.name=e,this.value=n}function de(t,e){Pt.call(this,t),this.index=e}function ge(t,e,n){return e===t.h||e===t.b||n==t.h||n==t.b?t.h:e===t.j||e===t.f?n:n===t.j||n===t.f?e:new Yt(t,e,n)}function ve(t,e,n){return e===t.b?n:n===t.b?e:new ne(t,e,n)}function we(t,e,n){return e===t.b?new Gt(t,n):n===t.b?e:new ie(t,e,n)}function me(t,e,n){return e===t.b||n===t.b?t.b:e===t.f?n:n===t.f?e:new re(t,e,n)}function ye(t,e,n){return e===t.b?t.b:n===t.f?e:new oe(t,e,n)}(n=Pt.prototype).toString=function(){var t=new z;return this.Ha(t,0),t.toString()},n.Ha=function(){throw Error("F_ABSTRACT")},n.zb=function(){throw Error("F_ABSTRACT")},n.lb=function(){return this},n.wc=function(t){return t===this},n.evaluate=function(t){var e;if(void 0!==(e=(e=t.J[this.b.u])?e[this.g]:void 0))return e;e=this.zb(t);var n=this.g,i=this.b,r=t.J[i.u];return r||(r={},t.J[i.u]=r),r[n]=e},n.gf=function(){return!1},g(Mt,Pt),(n=Mt.prototype).Ve=function(){throw Error("F_ABSTRACT")},n.bf=function(){throw Error("F_ABSTRACT")},n.zb=function(t){return t=this.f.evaluate(t),this.bf(t)},n.wc=function(t,e,n){return t===this||Dt(this.f,t,e,n)},n.Ha=function(t,e){10<e&&t.append("("),t.append(this.Ve()),this.f.Ha(t,10),10<e&&t.append(")")},n.lb=function(t,e){var n=this.f.lb(t,e);return n===this.f?this:new this.constructor(this.b,n)},g(Bt,Pt),(n=Bt.prototype).Ed=function(){throw Error("F_ABSTRACT")},n.hb=function(){throw Error("F_ABSTRACT")},n.Gb=function(){throw Error("F_ABSTRACT")},n.zb=function(t){var e=this.f.evaluate(t);return t=this.h.evaluate(t),this.Gb(e,t)},n.wc=function(t,e,n){return t===this||Dt(this.f,t,e,n)||Dt(this.h,t,e,n)},n.Ha=function(t,e){var n=this.Ed();n<=e&&t.append("("),this.f.Ha(t,n),t.append(this.hb()),this.h.Ha(t,n),n<=e&&t.append(")")},n.lb=function(t,e){var n=this.f.lb(t,e),i=this.h.lb(t,e);return n===this.f&&i===this.h?this:new this.constructor(this.b,n,i)},g(Ut,Bt),Ut.prototype.Ed=function(){return 1},g(zt,Bt),zt.prototype.Ed=function(){return 2},g(Vt,Bt),Vt.prototype.Ed=function(){return 3},g(Xt,Bt),Xt.prototype.Ed=function(){return 4},g(Ht,Mt),Ht.prototype.Ve=function(){return"!"},Ht.prototype.bf=function(t){return!t},g(Gt,Mt),Gt.prototype.Ve=function(){return"-"},Gt.prototype.bf=function(t){return-t},g(Yt,Ut),Yt.prototype.hb=function(){return"&&"},Yt.prototype.zb=function(t){return this.f.evaluate(t)&&this.h.evaluate(t)},g(Wt,Yt),Wt.prototype.hb=function(){return" and "},g($t,Ut),$t.prototype.hb=function(){return"||"},$t.prototype.zb=function(t){return this.f.evaluate(t)||this.h.evaluate(t)},g(Kt,$t),Kt.prototype.hb=function(){return", "},g(Jt,zt),Jt.prototype.hb=function(){return"<"},Jt.prototype.Gb=function(t,e){return t<e},g(Zt,zt),Zt.prototype.hb=function(){return"<="},Zt.prototype.Gb=function(t,e){return t<=e},g(qt,zt),qt.prototype.hb=function(){return">"},qt.prototype.Gb=function(t,e){return t>e},g(Qt,zt),Qt.prototype.hb=function(){return">="},Qt.prototype.Gb=function(t,e){return t>=e},g(te,zt),te.prototype.hb=function(){return"=="},te.prototype.Gb=function(t,e){return t==e},g(ee,zt),ee.prototype.hb=function(){return"!="},ee.prototype.Gb=function(t,e){return t!=e},g(ne,Vt),ne.prototype.hb=function(){return"+"},ne.prototype.Gb=function(t,e){return t+e},g(ie,Vt),ie.prototype.hb=function(){return" - "},ie.prototype.Gb=function(t,e){return t-e},g(re,Xt),re.prototype.hb=function(){return"*"},re.prototype.Gb=function(t,e){return t*e},g(oe,Xt),oe.prototype.hb=function(){return"/"},oe.prototype.Gb=function(t,e){return t/e},g(ae,Xt),ae.prototype.hb=function(){return"%"},ae.prototype.Gb=function(t,e){return t%e},g(ue,Pt),ue.prototype.Ha=function(t){t.append(this.L.toString()),t.append(X(this.ka))},ue.prototype.zb=function(t){return this.L*Ot(t,this.ka,!1)},g(se,Pt),se.prototype.Ha=function(t){t.append(this.f)},se.prototype.zb=function(t){return Rt(t,this.b,this.f).evaluate(t)},se.prototype.wc=function(t,e,n){return t===this||Dt(Rt(e,this.b,this.f),t,e,n)},g(he,Pt),he.prototype.Ha=function(t){this.f&&t.append("not "),t.append(X(this.name))},he.prototype.zb=function(t){var e=this.name;return t="all"===e||!!t.$.af[e],this.f?!t:t},he.prototype.wc=function(t,e,n){return t===this||Dt(this.value,t,e,n)},he.prototype.gf=function(){return!0},g(le,Pt),le.prototype.Ha=function(t){t.append(this.Xc)},le.prototype.zb=function(t){return this.Pc.call(t)},g(fe,Pt),fe.prototype.Ha=function(t){t.append(this.h);var e=this.f;t.append("(");for(var n=0;n<e.length;n++)n&&t.append(","),e[n].Ha(t,0);t.append(")")},fe.prototype.zb=function(t){return Ft(t,this.b,this.h,this.f,!1).lb(t,this.f).evaluate(t)},fe.prototype.wc=function(t,e,n){if(t===this)return!0;for(var i=0;i<this.f.length;i++)if(Dt(this.f[i],t,e,n))return!0;return Dt(Ft(e,this.b,this.h,this.f,!0),t,e,n)},fe.prototype.lb=function(t,e){for(var n=this.f,i=n,r=0;r<n.length;r++){var o=n[r].lb(t,e);if(n!==i)i[r]=o;else if(o!==n[r]){i=Array(n.length);for(var a=0;a<r;a++)i[a]=n[a];i[r]=o}}return(n=i)===this.f?this:new fe(this.b,this.h,n)},g(ce,Pt),ce.prototype.Ha=function(t,e){0<e&&t.append("("),this.f.Ha(t,0),t.append("?"),this.j.Ha(t,0),t.append(":"),this.h.Ha(t,0),0<e&&t.append(")")},ce.prototype.zb=function(t){return this.f.evaluate(t)?this.j.evaluate(t):this.h.evaluate(t)},ce.prototype.wc=function(t,e,n){return t===this||Dt(this.f,t,e,n)||Dt(this.j,t,e,n)||Dt(this.h,t,e,n)},ce.prototype.lb=function(t,e){var n=this.f.lb(t,e),i=this.j.lb(t,e),r=this.h.lb(t,e);return n===this.f&&i===this.j&&r===this.h?this:new ce(this.b,n,i,r)},g(pe,Pt),pe.prototype.Ha=function(t){switch(typeof this.f){case"number":case"boolean":t.append(this.f.toString());break;case"string":t.append('"'),t.append(H(this.f)),t.append('"');break;default:throw Error("F_UNEXPECTED_STATE")}},pe.prototype.zb=function(){return this.f},g(be,Pt),be.prototype.Ha=function(t){t.append("("),t.append(H(this.name.name)),t.append(":"),this.value.Ha(t,0),t.append(")")},be.prototype.zb=function(t){return function(t,e,n){var i="",r=e.match(/^(min|max)-(.*)$/);r&&(i=r[1],e=r[2]);var o=r=null;switch(e){case"width":case"height":case"device-width":case"device-height":case"color":n&&(r=n.evaluate(t))}switch(e){case"width":o=t.jc();break;case"height":o=t.ic();break;case"device-width":o=window.screen.availWidth;break;case"device-height":o=window.screen.availHeight;break;case"color":o=window.screen.pixelDepth}if(null!=o&&null!=r)switch(i){case"min":return o>=r;case"max":return o<=r;default:return o==r}else if(null!=o&&!n)return!!o;return!1}(t,this.name.name,this.value)},be.prototype.wc=function(t,e,n){return t===this||Dt(this.value,t,e,n)},be.prototype.lb=function(t,e){var n=this.value.lb(t,e);return n===this.value?this:new be(this.b,this.name,n)},g(de,Pt),de.prototype.Ha=function(t){t.append("$"),t.append(this.index.toString())},de.prototype.lb=function(t,e){var n=e[this.index];if(!n)throw Error("Parameter missing: "+this.index);return n};var xe={};function Ee(){}function Se(){}function ke(){}function Ce(){if(Ae)throw Error("E_INVALID_CALL")}(n=Ee.prototype).sc=function(t){for(var e=0;e<t.length;e++)t[e].fa(this)},n.Se=function(){throw Error("E_CSS_EMPTY_NOT_ALLOWED")},n.Te=function(){throw Error("E_CSS_SLASH_NOT_ALLOWED")},n.Bd=function(){throw Error("E_CSS_STR_NOT_ALLOWED")},n.rc=function(){throw Error("E_CSS_IDENT_NOT_ALLOWED")},n.ad=function(){throw Error("E_CSS_NUMERIC_NOT_ALLOWED")},n.$c=function(){throw Error("E_CSS_NUM_NOT_ALLOWED")},n.Zc=function(t){return this.$c(t)},n.he=function(){throw Error("E_CSS_COLOR_NOT_ALLOWED")},n.bd=function(){throw Error("E_CSS_URL_NOT_ALLOWED")},n.Ub=function(){throw Error("E_CSS_LIST_NOT_ALLOWED")},n.qc=function(){throw Error("E_CSS_COMMA_NOT_ALLOWED")},n.Xb=function(){throw Error("E_CSS_FUNC_NOT_ALLOWED")},n.Yc=function(){throw Error("E_CSS_EXPR_NOT_ALLOWED")},g(Se,Ee),(n=Se.prototype).sc=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.fa(this);if(e)e[n]=r;else if(i!==r){for(e=Array(t.length),i=0;i<n;i++)e[i]=t[i];e[n]=r}}return e||t},n.Bd=function(t){return t},n.rc=function(t){return t},n.Te=function(t){return t},n.ad=function(t){return t},n.$c=function(t){return t},n.Zc=function(t){return t},n.he=function(t){return t},n.bd=function(t){return t},n.Ub=function(t){var e=this.sc(t.values);return e===t.values?t:new Me(e)},n.qc=function(t){var e=this.sc(t.values);return e===t.values?t:new Be(e)},n.Xb=function(t){var e=this.sc(t.values);return e===t.values?t:new Ue(t.name,e)},n.Yc=function(t){return t},(n=ke.prototype).toString=function(){var t=new z;return this.$a(t,!0),t.toString()},n.stringValue=function(){var t=new z;return this.$a(t,!1),t.toString()},n.Aa=function(){throw Error("F_ABSTRACT")},n.$a=function(t){t.append("[error]")},n.ef=function(){return!1},n.Ac=function(){return!1},n.hf=function(){return!1},n.Vf=function(){return!1},n.Ud=function(){return!1},g(Ce,ke),Ce.prototype.Aa=function(t){return new pe(t,"")},Ce.prototype.$a=function(){},Ce.prototype.fa=function(t){return t.Se(this)};var Ae=new Ce;function Te(){if(Ne)throw Error("E_INVALID_CALL")}g(Te,ke),Te.prototype.Aa=function(t){return new pe(t,"/")},Te.prototype.$a=function(t){t.append("/")},Te.prototype.fa=function(t){return t.Te(this)};var Ne=new Te;function Ie(t){this.Xc=t}function _e(t){if(this.name=t,xe[t])throw Error("E_INVALID_CALL");xe[t]=this}function Le(t){var e=xe[t];return e||(e=new _e(t)),e}function je(t,e){this.L=t,this.ka=e.toLowerCase()}function Oe(t){this.L=t}function Re(t){this.L=t}function Fe(t){this.b=t}function Pe(t){this.url=t}function De(t,e,n,i){var r=e.length;e[0].$a(t,i);for(var o=1;o<r;o++)t.append(n),e[o].$a(t,i)}function Me(t){this.values=t}function Be(t){this.values=t}function Ue(t,e){this.name=t,this.values=e}function ze(t){this.Mc=t}function Ve(t,e){if(t){if(t.Ac())return Ot(e,t.ka,!1)*t.L;if(t.hf())return t.L}return 0}g(Ie,ke),Ie.prototype.Aa=function(t){return new pe(t,this.Xc)},Ie.prototype.$a=function(t,e){e?(t.append('"'),t.append(H(this.Xc)),t.append('"')):t.append(this.Xc)},Ie.prototype.fa=function(t){return t.Bd(this)},g(_e,ke),_e.prototype.Aa=function(t){return new pe(t,this.name)},_e.prototype.$a=function(t,e){e?t.append(X(this.name)):t.append(this.name)},_e.prototype.fa=function(t){return t.rc(this)},_e.prototype.Vf=function(){return!0},g(je,ke),je.prototype.Aa=function(t,e){return this.L?e&&"%"==this.ka?100==this.L?e:new re(t,e,new pe(t,this.L/100)):new ue(t,this.L,this.ka):t.b},je.prototype.$a=function(t){t.append(this.L.toString()),t.append(this.ka)},je.prototype.fa=function(t){return t.ad(this)},je.prototype.Ac=function(){return!0},g(Oe,ke),Oe.prototype.Aa=function(t){return this.L?1==this.L?t.f:new pe(t,this.L):t.b},Oe.prototype.$a=function(t){t.append(this.L.toString())},Oe.prototype.fa=function(t){return t.$c(this)},Oe.prototype.hf=function(){return!0},g(Re,Oe),Re.prototype.fa=function(t){return t.Zc(this)},g(Fe,ke),Fe.prototype.$a=function(t){t.append("#");var e=this.b.toString(16);t.append("000000".substr(e.length)),t.append(e)},Fe.prototype.fa=function(t){return t.he(this)},g(Pe,ke),Pe.prototype.$a=function(t){t.append('url("'),t.append(H(this.url)),t.append('")')},Pe.prototype.fa=function(t){return t.bd(this)},g(Me,ke),Me.prototype.$a=function(t,e){De(t,this.values," ",e)},Me.prototype.fa=function(t){return t.Ub(this)},Me.prototype.Ud=function(){return!0},g(Be,ke),Be.prototype.$a=function(t,e){De(t,this.values,",",e)},Be.prototype.fa=function(t){return t.qc(this)},g(Ue,ke),Ue.prototype.$a=function(t,e){t.append(X(this.name)),t.append("("),De(t,this.values,",",e),t.append(")")},Ue.prototype.fa=function(t){return t.Xb(this)},g(ze,ke),ze.prototype.Aa=function(){return this.Mc},ze.prototype.$a=function(t){t.append("-epubx-expr("),this.Mc.Ha(t,0),t.append(")")},ze.prototype.fa=function(t){return t.Yc(this)},ze.prototype.ef=function(){return!0};var Xe=Le("absolute"),He=Le("all"),Ge=Le("always"),Ye=Le("auto");Le("avoid");var We=Le("balance"),$e=Le("balance-all"),Ke=Le("block"),Je=Le("block-end"),Ze=Le("block-start"),qe=Le("both"),Qe=Le("bottom"),tn=Le("border-box"),en=Le("break-all"),nn=Le("break-word"),rn=Le("crop"),on=Le("cross");Le("column");var an=Le("exclusive"),un=Le("false"),sn=Le("fixed"),hn=Le("flex"),ln=Le("footnote"),fn=Le("footer"),cn=Le("header");Le("hidden");var pn=Le("horizontal-tb"),bn=Le("inherit"),dn=Le("inline"),gn=Le("inline-block"),vn=Le("inline-end"),wn=Le("inline-start"),mn=Le("landscape"),yn=Le("left"),xn=Le("line"),En=Le("list-item"),Sn=Le("ltr");Le("manual");var kn=Le("none"),Cn=Le("normal"),An=Le("oeb-page-foot"),Tn=Le("oeb-page-head"),Nn=Le("page"),In=Le("relative"),_n=Le("right"),Ln=Le("same"),jn=Le("scale"),On=Le("snap-block");Le("spread");var Rn=Le("static"),Fn=Le("rtl"),Pn=Le("table"),Dn=Le("table-caption"),Mn=Le("table-cell"),Bn=Le("table-footer-group"),Un=Le("table-header-group");Le("table-row");var zn=Le("top"),Vn=Le("transparent"),Xn=Le("vertical-lr"),Hn=Le("vertical-rl"),Gn=Le("visible"),Yn=Le("true"),Wn=new je(100,"%"),$n=new je(100,"pvw"),Kn=new je(100,"pvh"),Jn=new je(0,"px"),Zn={"font-size":1,color:2};function qn(t,e){return(Zn[t]||Number.MAX_VALUE)-(Zn[e]||Number.MAX_VALUE)}var Qn={SIMPLE_PROPERTY:"SIMPLE_PROPERTY",PREPROCESS_SINGLE_DOCUMENT:"PREPROCESS_SINGLE_DOCUMENT",PREPROCESS_TEXT_CONTENT:"PREPROCESS_TEXT_CONTENT",PREPROCESS_ELEMENT_STYLE:"PREPROCESS_ELEMENT_STYLE",POLYFILLED_INHERITED_PROPS:"POLYFILLED_INHERITED_PROPS",CONFIGURATION:"CONFIGURATION",RESOLVE_TEXT_NODE_BREAKER:"RESOLVE_TEXT_NODE_BREAKER",RESOLVE_FORMATTING_CONTEXT:"RESOLVE_FORMATTING_CONTEXT",RESOLVE_LAYOUT_PROCESSOR:"RESOLVE_LAYOUT_PROCESSOR",POST_LAYOUT_BLOCK:"POST_LAYOUT_BLOCK"},ti={};function ei(t,e){if(Qn[t]){var n=ti[t];n||(n=ti[t]=[]),n.push(e)}else C.b(Error("Skipping unknown plugin hook '"+t+"'."))}function ni(t){return ti[t]||[]}d("vivliostyle.plugin.registerHook",ei),d("vivliostyle.plugin.removeHook",function(t,e){if(Qn[t]){var n=ti[t];if(n){var i=n.indexOf(e);0<=i&&n.splice(i,1)}}else C.b(Error("Ignoring unknown plugin hook '"+t+"'."))});var ii=null,ri=null;function oi(t){if(!ii)throw Error("E_TASK_NO_CONTEXT");ii.name||(ii.name=t);var e=ii;return t=new mi(e,e.top,t),e.top=t,t.b=si,t}function ai(t){return new vi(t)}function ui(t,e,n){(t=oi(t)).j=n;try{e(t)}catch(e){gi(t.f,e,t)}return t.result()}var si=1;function hi(){}function li(t){this.g=t,this.h=1,this.slice=25,this.l=0,this.f=new O,this.b=this.u=null,this.j=!1,this.order=0,ri||(ri=this)}function fi(t){if(!t.j){var e=t.f.b[1].b,n=t.g.currentTime();if(null!=t.b){if(n+t.h>t.u)return;clearTimeout(t.b)}(e-=n)<=t.h&&(e=t.h),t.u=n+e,t.b=function(t,e){return setTimeout(t,e)}(function(){t.b=null,null!=t.b&&(clearTimeout(t.b),t.b=null),t.j=!0;try{var e=t.g.currentTime();for(t.l=e+t.slice;t.f.length();){var n=t.f.b[1];if(n.b>e)break;var i=t.f,r=i.b.pop(),o=i.b.length;if(1<o){for(var a=1;;){var u=2*a;if(u>=o)break;if(0<bi(i.b[u],r))u+1<o&&0<bi(i.b[u+1],i.b[u])&&u++;else{if(!(u+1<o&&0<bi(i.b[u+1],r)))break;u++}i.b[a]=i.b[u],a=u}i.b[a]=r}if(!n.g){var s=n.f;n.f=null,s&&s.b==n&&(s.b=null,a=ii,ii=s,xi(s.top,n.result),ii=a)}if((e=t.g.currentTime())>=t.l)break}}catch(t){C.error(t)}t.j=!1,t.f.length()&&fi(t)},e)}}function ci(t,e,n){var i=new di(t,n||"");return i.top=new mi(i,null,"bootstrap"),i.top.b=si,i.top.then(function(){function t(){i.j=!1;for(var t=l(i.h),e=t.next();!e.done;e=t.next()){e=e.value;try{e()}catch(t){C.error(t)}}}try{e().then(function(e){i.result=e,t()})}catch(e){gi(i,e),t()}}),n=ii,ii=i,t.tb(Ai(i.top,"bootstrap")),ii=n,i}function pi(t){this.f=t,this.order=this.b=0,this.result=null,this.g=!1}function bi(t,e){return e.b-t.b||e.order-t.order}function di(t,e){this.f=t,this.name=e,this.h=[],this.g=null,this.j=!0,this.b=this.top=this.l=this.result=null}function gi(t,e,n){if(!(i=e.frameTrace)){for(var i=e.stack?e.stack+"\n\t---- async ---\n":"",r=t.top;r;r=r.parent)i+="\t",i+=r.name,i+="\n";e.frameTrace=i}if(n){for(i=t.top;i&&i!=n;)i=i.parent;i==n&&(t.top=i)}for(t.g=e;t.top&&!t.top.j;)t.top=t.top.parent;t.top?(e=t.g,t.g=null,t.top.j(t.top,e)):t.g&&C.error(t.g,"Unhandled exception in task",t.name)}function vi(t){this.value=t}function wi(t){this.b=t}function mi(t,e,n){this.f=t,this.parent=e,this.name=n,this.g=null,this.b=0,this.j=this.h=null}function yi(t){if(!ii)throw Error("F_TASK_NO_CONTEXT");if(t!==ii.top)throw Error("F_TASK_NOT_TOP_FRAME")}function xi(t,e){yi(t),ii.g||(t.g=e),t.b=2;var n=t.parent;if(ii.top=n,t.h){try{t.h(e)}catch(e){gi(t.f,e,n)}t.b=3}}function Ei(){var t=oi("Frame.timeSlice"),e=t.f.f;return e.g.currentTime()>=e.l?(C.debug("-- time slice --"),Ai(t).tb(!0)):xi(t,!0),t.result()}function Si(t){var e=oi("Frame.sleep");return Ai(e).tb(!0,t),e.result()}function ki(t){var e=oi("Frame.loop");return function n(i){try{for(;i;){var r=t();if(r.Xa())return void r.then(n);r.then(function(t){i=t})}xi(e,!0)}catch(t){gi(e.f,t,e)}}(!0),e.result()}function Ci(t){var e=ii;if(!e)throw Error("E_TASK_NO_CONTEXT");return ki(function(){var n;do{n=new Ti(e,e.top),e.top=n,n.b=si,t(n),n=n.result()}while(!n.Xa()&&n.get());return n})}function Ai(t,e){if(yi(t),t.f.b)throw Error("E_TASK_ALREADY_SUSPENDED");var n=new pi(t.f);return t.f.b=n,ii=null,t.f.l=e||null,n}function Ti(t,e){mi.call(this,t,e,"loop")}function Ni(t){xi(t,!0)}function Ii(t){xi(t,!1)}function _i(t,e){this.fetch=t,this.name=e,this.f=!1,this.b=this.h=null,this.g=[]}function Li(t){if(!t.length)return ai(!0);if(1==t.length)return t[0].get().Hc(!0);var e=oi("waitForFetches"),n=0;return ki(function(){for(;n<t.length;){var e=t[n++];if(!e.f)return e.get().Hc(!0)}return ai(!1)}).then(function(){xi(e,!0)}),e.result()}function ji(t,e){var n=null,i=null;"img"==t.localName&&(n=t.getAttribute("width"),i=t.getAttribute("height"));var r=new _i(function(){function r(e){u||(u=!0,"img"==t.localName&&(n||t.removeAttribute("width"),i||t.removeAttribute("height")),a.tb(e?e.type:"timeout"))}var o=oi("loadImage"),a=Ai(o,t),u=!1;return t.addEventListener("load",r,!1),t.addEventListener("error",r,!1),t.addEventListener("abort",r,!1),"http://www.w3.org/2000/svg"==t.namespaceURI?(t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),setTimeout(r,300)):t.src=e,o.result()},"loadElement "+e);return r.start(),r}function Oi(t){return(t=t.substr(1)).match(/^[^0-9a-fA-F\n\r]$/)?t:(t=parseInt(t,16),isNaN(t)?"":65535>=t?String.fromCharCode(t):1114111>=t?String.fromCharCode(55296|t>>10&1023,56320|1023&t):"ï¿½")}function Ri(t){return t.replace(/\\([0-9a-fA-F]{0,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,Oi)}function Fi(){this.type=0,this.b=!1,this.L=0,this.text="",this.position=0}function Pi(t,e){var n,i=Array(128);for(n=0;128>n;n++)i[n]=t;for(i.NaN=35==t?35:72,n=0;n<e.length;n+=2)i[e[n]]=e[n+1];return i}hi.prototype.currentTime=function(){return(new Date).valueOf()},li.prototype.tb=function(t,e){var n=this.g.currentTime();t.order=this.order++,t.b=n+(e||0);t:{for(var i=(n=this.f).b.length;1<i;){var r=Math.floor(i/2),o=n.b[r];if(0<bi(o,t)){n.b[i]=t;break t}n.b[i]=o,i=r}n.b[1]=t}fi(this)},pi.prototype.tb=function(t,e){this.result=t,this.f.f.tb(this,e)},di.prototype.join=function(){var t=oi("Task.join");if(this.j){var e=Ai(t,this),n=this;!function(t,e){t.h.push(e)}(this,function(){e.tb(n.result)})}else xi(t,this.result);return t.result()},(n=vi.prototype).then=function(t){t(this.value)},n.ea=function(t){return t(this.value)},n.Hc=function(t){return new vi(t)},n.Ga=function(t){xi(t,this.value)},n.Xa=function(){return!1},n.get=function(){return this.value},(n=wi.prototype).then=function(t){this.b.then(t)},n.ea=function(t){if(this.Xa()){var e=new mi(this.b.f,this.b.parent,"AsyncResult.thenAsync");return e.b=si,this.b.parent=e,this.b.then(function(n){t(n).then(function(t){xi(e,t)})}),e.result()}return t(this.b.g)},n.Hc=function(t){return this.Xa()?this.ea(function(){return new vi(t)}):new vi(t)},n.Ga=function(t){this.Xa()?this.then(function(e){xi(t,e)}):xi(t,this.b.g)},n.Xa=function(){return this.b.b==si},n.get=function(){if(this.Xa())throw Error("Result is pending");return this.b.g},mi.prototype.result=function(){return new wi(this)},mi.prototype.then=function(t){switch(this.b){case si:if(this.h)throw Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.h=t;break;case 2:var e=this.f,n=this.parent;try{t(this.g),this.b=3}catch(t){this.b=3,gi(e,t,n)}break;case 3:throw Error("F_TASK_DEAD_FRAME");default:throw Error("F_TASK_UNEXPECTED_FRAME_STATE "+this.b)}},g(Ti,mi),_i.prototype.start=function(){if(!this.b){var t=this;this.b=ci(ii.f,function(){var e=oi("Fetcher.run");return t.fetch().then(function(n){var i=t.g;if(t.f=!0,t.h=n,t.b=null,t.g=[],i)for(var r=0;r<i.length;r++)try{i[r](n)}catch(t){C.error(t,"Error:")}xi(e,n)}),e.result()},this.name)}},_i.prototype.get=function(){return this.f?ai(this.h):(this.start(),this.b.join())};var Di=[72,72,72,72,72,72,72,72,72,1,1,72,1,1,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,1,4,34,6,7,8,9,33,10,11,12,13,14,15,16,17,2,2,2,2,2,2,2,2,2,2,18,19,20,21,22,23,24,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,25,29,26,30,3,72,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,27,31,28,32,72];Di.NaN=80;var Mi=[43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,52,43,43,43,43,39,43,43,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43,43,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,44,43,43,39,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43];Mi.NaN=43;var Bi=[72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,78,59,72,59,59,59,59,59,59,59,59,59,59,72,72,72,72,72,72,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,61,72,72,78,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,72,72,72,72];Mi.NaN=43;var Ui=[35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,57,59,35,58,58,58,58,58,58,58,58,58,58,35,35,35,35,35,35,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,61,35,35,60,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,35,35,35,35];Ui.NaN=35;var zi=[45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,53,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,44,45,45,39,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45];zi.NaN=45;var Vi=[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,41,37,37,37,37,37,37,37,37,42,37,39,39,39,39,39,39,39,39,39,39,37,37,37,37,37,37,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,40,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,37];Vi.NaN=37;var Xi=[38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,41,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,40,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,38];Xi.NaN=38;var Hi=Pi(35,[61,36]),Gi=Pi(35,[58,77]),Yi=Pi(35,[61,36,124,50]),Wi=Pi(35,[38,51]),$i=Pi(35,[42,54]),Ki=Pi(39,[42,55]),Ji=Pi(54,[42,55,47,56]),Zi=Pi(62,[62,56]),qi=Pi(35,[61,36,33,70]),Qi=Pi(62,[45,71]),tr=Pi(63,[45,56]),er=Pi(76,[9,72,10,72,13,72,32,72]),nr=Pi(39,[39,46,10,72,13,72,92,48]),ir=Pi(39,[34,46,10,72,13,72,92,49]),rr=Pi(39,[39,47,10,74,13,74,92,48]),or=Pi(39,[34,47,10,74,13,74,92,49]),ar=Pi(64,[9,39,32,39,34,66,39,65,41,72,10,39,13,39]),ur=Pi(39,[41,67,9,79,10,79,13,79,32,79,92,75,40,72,91,72,93,72,123,72,125,72,NaN,67]),sr=Pi(39,[39,68,10,74,13,74,92,75,NaN,67]),hr=Pi(39,[34,68,10,74,13,74,92,75,NaN,67]),lr=Pi(72,[9,39,10,39,13,39,32,39,41,69]);function fr(t,e){this.l=e,this.g=15,this.u=t,this.j=Array(this.g+1),this.b=-1;for(var n=this.position=this.f=this.h=0;n<=this.g;n++)this.j[n]=new Fi}function cr(t){return t.h==t.f&&gr(t),t.j[t.f]}function pr(t,e){return(t.h-t.f&t.g)<=e&&gr(t),t.j[t.f+e&t.g]}function br(t){t.f=t.f+1&t.g}function dr(t){if(0>t.b)throw Error("F_CSSTOK_BAD_CALL reset");t.f=t.b,t.b=-1}function gr(t){var e=t.h,n=0<=t.b?t.b:t.f,i=t.g;if(e>=n?n+=i:n--,n==e){if(0>t.b)throw Error("F_CSSTOK_INTERNAL");e=2*(t.g+1)-1,n=Array(e+1),i=t.b;for(var r=0;i!=t.h;)n[r]=t.j[i],i==t.f&&(t.f=r),i=i+1&t.g,r++;for(t.b=0,t.h=r,t.g=e,t.j=n;r<=e;)n[r++]=new Fi;e=t.h,n=i=t.g}r=Di;for(var o=t.u,a=t.position,u=t.j,s=0,h=0,l="",f=0,c=!1,p=u[e],b=-9;;){var d=o.charCodeAt(a);switch(r[d]||r[65]){case 72:s=51,l=isNaN(d)?"E_CSS_UNEXPECTED_EOF":"E_CSS_UNEXPECTED_CHAR",a++;break;case 1:a++,c=!0;continue;case 2:h=a++,r=Vi;continue;case 3:s=1,h=a++,r=Mi;continue;case 4:h=a++,s=31,r=Hi;continue;case 33:s=2,h=++a,r=nr;continue;case 34:s=2,h=++a,r=ir;continue;case 6:h=++a,s=7,r=Mi;continue;case 7:h=a++,s=32,r=Hi;continue;case 8:h=a++,s=21;break;case 9:h=a++,s=32,r=Wi;continue;case 10:h=a++,s=10;break;case 11:h=a++,s=11;break;case 12:h=a++,s=36,r=Hi;continue;case 13:h=a++,s=23;break;case 14:h=a++,s=16;break;case 15:s=24,h=a++,r=Ui;continue;case 16:h=a++,r=Bi;continue;case 78:h=a++,s=9,r=Mi;continue;case 17:h=a++,s=19,r=$i;continue;case 18:h=a++,s=18,r=Gi;continue;case 77:a++,s=50;break;case 19:h=a++,s=17;break;case 20:h=a++,s=38,r=qi;continue;case 21:h=a++,s=39,r=Hi;continue;case 22:h=a++,s=37,r=Hi;continue;case 23:h=a++,s=22;break;case 24:h=++a,s=20,r=Mi;continue;case 25:h=a++,s=14;break;case 26:h=a++,s=15;break;case 27:h=a++,s=12;break;case 28:h=a++,s=13;break;case 29:b=h=a++,s=1,r=er;continue;case 30:h=a++,s=33,r=Hi;continue;case 31:h=a++,s=34,r=Yi;continue;case 32:h=a++,s=35,r=Hi;continue;case 35:break;case 36:a++,s=s+41-31;break;case 37:s=5,f=parseInt(o.substring(h,a),10);break;case 38:s=4,f=parseFloat(o.substring(h,a));break;case 39:a++;continue;case 40:s=3,f=parseFloat(o.substring(h,a)),h=a++,r=Mi;continue;case 41:s=3,f=parseFloat(o.substring(h,a)),l="%",h=a++;break;case 42:a++,r=Xi;continue;case 43:l=o.substring(h,a);break;case 44:b=a++,r=er;continue;case 45:l=Ri(o.substring(h,a));break;case 46:l=o.substring(h,a),a++;break;case 47:l=Ri(o.substring(h,a)),a++;break;case 48:b=a,a+=2,r=rr;continue;case 49:b=a,a+=2,r=or;continue;case 50:a++,s=25;break;case 51:a++,s=26;break;case 52:if(l=o.substring(h,a),1==s){if(a++,"url"==l.toLowerCase()){r=ar;continue}s=6}break;case 53:if(l=Ri(o.substring(h,a)),1==s){if(a++,"url"==l.toLowerCase()){r=ar;continue}s=6}break;case 54:r=Ki,a++;continue;case 55:r=Ji,a++;continue;case 56:r=Di,a++;continue;case 57:r=Zi,a++;continue;case 58:s=5,r=Vi,a++;continue;case 59:s=4,r=Xi,a++;continue;case 60:s=1,r=Mi,a++;continue;case 61:s=1,r=er,b=a++;continue;case 62:a--;break;case 63:a-=2;break;case 64:h=a++,r=ur;continue;case 65:h=++a,r=sr;continue;case 66:h=++a,r=hr;continue;case 67:s=8,l=Ri(o.substring(h,a)),a++;break;case 69:a++;break;case 70:r=Qi,a++;continue;case 71:r=tr,a++;continue;case 79:if(8>a-b&&o.substring(b+1,a+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){a++;continue}case 68:s=8,l=Ri(o.substring(h,a)),a++,r=lr;continue;case 74:if(9>++a-b&&o.substring(b+1,a).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;s=51,l="E_CSS_UNEXPECTED_NEWLINE";break;case 73:if(9>a-b&&o.substring(b+1,a+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){a++;continue}l=Ri(o.substring(h,a));break;case 75:b=a++;continue;case 76:a++,r=zi;continue;default:r!==Di?(s=51,l="E_CSS_UNEXPECTED_STATE"):(h=a,s=0)}if(p.type=s,p.b=c,p.L=f,p.text=l,p.position=h,++e>=n)break;r=Di,c=!1,p=u[e&i]}t.position=a,t.h=e&i}function vr(t,e,n,i,r){var o=oi("ajax"),a=new XMLHttpRequest,u=Ai(o,a),s={status:0,statusText:"",url:t,contentType:null,responseText:null,responseXML:null,vd:null};a.open(n||"GET",t,!0),e&&(a.responseType=e),a.onreadystatechange=function(){if(4===a.readyState){if(s.status=a.status,s.statusText=a.statusText||404==a.status&&"Not Found"||"",200==s.status||!s.status)if(e&&"document"!==e||!a.responseXML||"parsererror"==a.responseXML.documentElement.localName)if((!e||"document"===e)&&a.response instanceof HTMLDocument)s.responseXML=a.response,s.contentType=a.response.contentType;else{var n=a.response;e&&"text"!==e||"string"!=typeof n?n?s.vd="string"==typeof n?wr([n]):n:C.b("Unexpected empty success response for",t):s.responseText=n,(n=a.getResponseHeader("Content-Type"))&&(s.contentType=n.replace(/(.*);.*$/,"$1"))}else s.responseXML=a.responseXML,s.contentType=a.responseXML.contentType;u.tb(s)}};try{i?(a.setRequestHeader("Content-Type",r||"text/plain; charset=UTF-8"),a.send(i)):(/^file:|^https?:\/\/[^\/]+\.githubusercontent\.com/.test(t)?/\/aozorabunko\/[^\/]+\/cards\/[^\/]+\/files\/[^\/.]+\.html$/.test(t)?a.overrideMimeType("text/html; charset=Shift_JIS"):/\.(html|htm)$/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/\.(xhtml|xht|xml|opf)$/.test(t)?a.overrideMimeType("application/xml; charset=UTF-8"):/\.(txt|css)$/.test(t)?a.overrideMimeType("text/plain; charset=UTF-8"):a.overrideMimeType("text/html; charset=UTF-8"):/^data:,(<|%3C|%3c)/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/^data:,/.test(t)&&a.overrideMimeType("text/plain; charset=UTF-8"),a.send(null))}catch(e){C.b(e,"Error fetching "+t),u.tb(s)}return o.result()}function wr(t){if(e=window.WebKitBlobBuilder||window.MSBlobBuilder){for(var e=new e,n=0;n<t.length;n++)e.append(t[n]);return e.getBlob("application/octet-stream")}return new Blob(t,{type:"application/octet-stream"})}function mr(t,e){this.ca=t,this.type=e,this.f={},this.j={}}function yr(t){return ai((t=t.responseText)?JSON.parse(t):null)}function xr(t){var e=parseInt(t,16);if(isNaN(e))throw Error("E_CSS_COLOR");if(6==t.length)return new Fe(e);if(3==t.length)return new Fe(15&e|(15&e)<<4|(240&e)<<4|(240&e)<<8|(3840&e)<<8|(3840&e)<<12);throw Error("E_CSS_COLOR")}function Er(t){this.f=t,this.qb="Author"}function Sr(t){switch(t.qb){case"UA":return 0;case"User":return 100663296;default:return 83886080}}function kr(t){switch(t.qb){case"UA":return 0;case"User":return 16777216;default:return 33554432}}function Cr(){Er.call(this,null),this.g=[],this.b=null}function Ar(t,e){t.g.push(t.b),t.b=e}function Tr(t,e,n){Er.call(this,t),this.N=n,this.J=0,(this.oa=e)&&(this.qb=e.qb)}function Nr(t,e,n){Tr.call(this,t,e,n)}function Ir(t,e){t.error(e,t.jd())}function _r(t,e){Ir(t,e),Ar(t.oa,new Tr(t.f,t.oa,!1))}fr.prototype.error=function(t,e,n){this.l&&this.l.error(n,e)},mr.prototype.load=function(t,e,n){t=A(t);var i=this.f[t];return void 0!==i?ai(i):this.fetch(t,e,n).get()},mr.prototype.fetch=function(t,e,n){if(t=A(t),this.f[t])return null;if(!(r=this.j[t])){var i=this,r=new _i(function(){return function(t,e,n,i){var r=oi("fetch"),o=e.endsWith("?viv-toc-box");return o&&(e=e.replace("?viv-toc-box","")),vr(e,t.type).then(function(a){if(400<=a.status&&n)throw Error((i||"Failed to fetch required resource: "+e)+" ("+a.status+(a.statusText?" "+a.statusText:"")+")");o&&(e+="?viv-toc-box",a.url+="?viv-toc-box"),t.ca(a,t).then(function(n){delete t.j[e],t.f[e]=n,xi(r,n)})}),r.result()}(i,t,e,n)},"Fetch "+t);i.j[t]=r,r.start()}return r},mr.prototype.get=function(t){return this.f[A(t)]},(n=Er.prototype).jd=function(){return null},n.ma=function(){return this.f},n.error=function(){},n.Wc=function(t){this.qb=t},n.Wb=function(){},n.oe=function(){},n.qd=function(){},n.rd=function(){},n.ze=function(){},n.Hd=function(){},n.cc=function(){},n.ne=function(){},n.me=function(){},n.te=function(){},n.Sc=function(){},n.Tb=function(){},n.ae=function(){},n.wd=function(){},n.ee=function(){},n.Zd=function(){},n.de=function(){},n.Vc=function(){},n.Qe=function(){},n.Fc=function(){},n.$d=function(){},n.ce=function(){},n.be=function(){},n.zd=function(){},n.yd=function(){},n.La=function(){},n.Qb=function(){},n.dc=function(){},n.xd=function(){},n.Nd=function(){},g(Cr,Er),(n=Cr.prototype).jd=function(){return null},n.ma=function(){return this.b.ma()},n.error=function(t,e){this.b.error(t,e)},n.Wc=function(t){Er.prototype.Wc.call(this,t),0<this.g.length&&(this.b=this.g[0],this.g=[]),this.b.Wc(t)},n.Wb=function(t,e){this.b.Wb(t,e)},n.oe=function(t){this.b.oe(t)},n.qd=function(t,e){this.b.qd(t,e)},n.rd=function(t,e){this.b.rd(t,e)},n.ze=function(t){this.b.ze(t)},n.Hd=function(t,e,n,i){this.b.Hd(t,e,n,i)},n.cc=function(){this.b.cc()},n.ne=function(){this.b.ne()},n.me=function(){this.b.me()},n.te=function(){this.b.te()},n.Sc=function(){this.b.Sc()},n.Tb=function(){this.b.Tb()},n.ae=function(){this.b.ae()},n.wd=function(t){this.b.wd(t)},n.ee=function(){this.b.ee()},n.Zd=function(){this.b.Zd()},n.de=function(){this.b.de()},n.Vc=function(){this.b.Vc()},n.Qe=function(t){this.b.Qe(t)},n.Fc=function(t){this.b.Fc(t)},n.$d=function(t){this.b.$d(t)},n.ce=function(){this.b.ce()},n.be=function(t,e,n){this.b.be(t,e,n)},n.zd=function(t,e,n){this.b.zd(t,e,n)},n.yd=function(t,e,n){this.b.yd(t,e,n)},n.La=function(){this.b.La()},n.Qb=function(t,e,n){this.b.Qb(t,e,n)},n.dc=function(){this.b.dc()},n.xd=function(t){this.b.xd(t)},n.Nd=function(){this.b.Nd()},g(Tr,Er),Tr.prototype.jd=function(){return this.oa.jd()},Tr.prototype.error=function(t){C.b(t)},Tr.prototype.La=function(){this.J++},Tr.prototype.dc=function(){if(!--this.J&&!this.N){var t=this.oa;t.b=t.g.pop()}},g(Nr,Tr),(n=Nr.prototype).Tb=function(){_r(this,"E_CSS_UNEXPECTED_SELECTOR")},n.ae=function(){_r(this,"E_CSS_UNEXPECTED_FONT_FACE")},n.wd=function(){_r(this,"E_CSS_UNEXPECTED_FOOTNOTE")},n.ee=function(){_r(this,"E_CSS_UNEXPECTED_VIEWPORT")},n.Zd=function(){_r(this,"E_CSS_UNEXPECTED_DEFINE")},n.de=function(){_r(this,"E_CSS_UNEXPECTED_REGION")},n.Vc=function(){_r(this,"E_CSS_UNEXPECTED_PAGE")},n.Fc=function(){_r(this,"E_CSS_UNEXPECTED_WHEN")},n.$d=function(){_r(this,"E_CSS_UNEXPECTED_FLOW")},n.ce=function(){_r(this,"E_CSS_UNEXPECTED_PAGE_TEMPLATE")},n.be=function(){_r(this,"E_CSS_UNEXPECTED_PAGE_MASTER")},n.zd=function(){_r(this,"E_CSS_UNEXPECTED_PARTITION")},n.yd=function(){_r(this,"E_CSS_UNEXPECTED_PARTITION_GROUP")},n.xd=function(){_r(this,"E_CSS_UNEXPECTED_SELECTOR_FUNC")},n.Nd=function(){_r(this,"E_CSS_UNEXPECTED_END_SELECTOR_FUNC")},n.Qb=function(){this.error("E_CSS_UNEXPECTED_PROPERTY",this.jd())};var Lr=[],jr=[],Or=[],Rr=[],Fr=[],Pr=[],Dr=[],Mr=[],Br=[],Ur=[],zr=[],Vr=[],Xr=[];function Hr(t,e,n,i){this.b=t,this.f=e,this.u=n,this.Z=i,this.F=[],this.N={},this.g=this.I=null,this.D=!1,this.j=2,this.result=null,this.G=!1,this.B=this.J=null,this.l=[],this.h=[],this.S=this.Y=!1}function Gr(t,e){for(var n=[],i=t.F;n.push(i[e++]),e!=i.length;)if(","!=i[e++])throw Error("Unexpected state");return n}function Yr(t,e,n){var i,r=t.F,o=r.length;do{i=r[--o]}while(void 0!==i&&"string"!=typeof i);var a=r.length-(o+1);if(1<a&&r.splice(o+1,a,new Me(r.slice(o+1,r.length))),","==e)return null;o++;do{i=r[--o]}while(void 0!==i&&("string"!=typeof i||","==i));return a=r.length-(o+1),"("==i?")"!=e?(t.u.error("E_CSS_MISMATCHED_C_PAR",n),t.b=zr,null):(t=new Ue(r[o-1],Gr(t,o+1)),r.splice(o-1,a+2,t),null):";"!=e||0<=o?(t.u.error("E_CSS_UNEXPECTED_VAL_END",n),t.b=zr,null):1<a?new Be(Gr(t,o+1)):r[0]}function Wr(t,e,n){t.b=t.g?zr:Ur,t.u.error(e,n)}function $r(t,e,n){for(var i,r=t.F,o=t.u,a=r.pop();;){var u=r.pop();if(11==e){for(i=[a];16==u;)i.unshift(r.pop()),u=r.pop();if("string"==typeof u){if("{"==u){for(;2<=i.length;)t=i.shift(),n=i.shift(),t=new Kt(o.ma(),t,n),i.unshift(t);return r.push(new ze(i[0])),!0}if("("==u){e=r.pop(),a=r.pop(),a=new fe(o.ma(),kt(a,e),i),e=0;continue}}if(10==u){a.gf()&&(a=new be(o.ma(),a,null)),e=0;continue}}else if("string"==typeof u){r.push(u);break}if(0>u)if(-31==u)a=new Ht(o.ma(),a);else{if(-24!=u)return Wr(t,"F_UNEXPECTED_STATE",n),!1;a=new Gt(o.ma(),a)}else{if(Xr[e]>Xr[u]){r.push(u);break}switch(i=r.pop(),u){case 26:a=new Yt(o.ma(),i,a);break;case 52:a=new Wt(o.ma(),i,a);break;case 25:a=new $t(o.ma(),i,a);break;case 38:a=new Jt(o.ma(),i,a);break;case 37:a=new qt(o.ma(),i,a);break;case 48:a=new Zt(o.ma(),i,a);break;case 47:a=new Qt(o.ma(),i,a);break;case 39:case 49:a=new te(o.ma(),i,a);break;case 41:a=new ee(o.ma(),i,a);break;case 23:a=new ne(o.ma(),i,a);break;case 24:a=new ie(o.ma(),i,a);break;case 36:a=new re(o.ma(),i,a);break;case 19:a=new oe(o.ma(),i,a);break;case 21:a=new ae(o.ma(),i,a);break;case 18:if(!(1<r.length))return Wr(t,"E_CSS_EXPR_COND",n),!1;switch(r[r.length-1]){case 22:r.pop(),a=new ce(o.ma(),r.pop(),i,a);break;case 10:if(!i.gf())return Wr(t,"E_CSS_MEDIA_TEST",n),!1;a=new be(o.ma(),i,a)}break;case 22:if(18!=e)return Wr(t,"E_CSS_EXPR_COND",n),!1;case 10:return r.push(i),r.push(u),r.push(a),!1;default:return Wr(t,"F_UNEXPECTED_STATE",n),!1}}}return r.push(a),!1}function Kr(t){for(var e=[];;){var n=cr(t.f);switch(n.type){case 1:e.push(n.text);break;case 23:e.push("+");break;case 4:case 5:e.push(n.L);break;default:return e}br(t.f)}}function Jr(t){var e=!1;if(23===(i=cr(t.f)).type)e=!0,br(t.f),i=cr(t.f);else if(1===i.type&&("even"===i.text||"odd"===i.text))return br(t.f),[2,"odd"===i.text?1:0];switch(i.type){case 3:if(e&&0>i.L)break;case 1:if(e&&"-"===i.text.charAt(0))break;if("n"===i.text||"-n"===i.text){if(e&&i.b)break;e="-n"===i.text?-1:1,3===i.type&&(e=i.L);var n=0;br(t.f);var i,r=24===(i=cr(t.f)).type,o=23===i.type||r;if(o&&(br(t.f),i=cr(t.f)),5===i.type){if(1/(n=i.L)==-1/0){if(n=0,o)break}else if(0>n){if(o)break}else if(0<=n&&!o)break;br(t.f)}else if(o)break;return[e,r&&0<n?-n:n]}if("n-"===i.text||"-n-"===i.text){if(!(e&&i.b||(e="-n-"===i.text?-1:1,3===i.type&&(e=i.L),br(t.f),5!==(i=cr(t.f)).type||0>i.L||1/i.L==-1/0)))return br(t.f),[e,i.L]}else{if(n=i.text.match(/^n(-[0-9]+)$/)){if(e&&i.b)break;return br(t.f),[3===i.type?i.L:1,parseInt(n[1],10)]}if(n=i.text.match(/^-n(-[0-9]+)$/))return br(t.f),[-1,parseInt(n[1],10)]}break;case 5:if(!e||!(i.b||0>i.L))return br(t.f),[0,i.L]}return null}function Zr(t){switch(t.h[t.h.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1}function qr(t,e,n,i,r,o){var a,u,s,h,l=t.u,f=t.f,c=t.F;r&&(t.j=2,t.F.push("{"));t:for(;0<e;--e)switch(a=cr(f),t.b[a.type]){case 28:if(18!=pr(f,1).type){Zr(t)?(l.error("E_CSS_COLON_EXPECTED",pr(f,1)),t.b=zr):(t.b=Pr,l.Tb());continue}if(!((u=pr(f,2)).b||1!=u.type&&6!=u.type)){if(0<=f.b)throw Error("F_CSSTOK_BAD_CALL mark");f.b=f.f}t.g=a.text,t.D=!1,br(f),br(f),t.b=Dr,c.splice(0,c.length);continue;case 46:if(18!=pr(f,1).type){t.b=zr,l.error("E_CSS_COLON_EXPECTED",pr(f,1));continue}t.g=a.text,t.D=!1,br(f),br(f),t.b=Dr,c.splice(0,c.length);continue;case 29:t.b=Pr,l.Tb();continue;case 1:if(!a.b){t.b=Vr,l.error("E_CSS_SPACE_EXPECTED",a);continue}l.cc();case 2:if(34==pr(f,1).type)if(br(f),br(f),null!=(s=t.N[a.text]))switch((a=cr(f)).type){case 1:l.Wb(s,a.text),t.b=o?Rr:Or,br(f);break;case 36:l.Wb(s,null),t.b=o?Rr:Or,br(f);break;default:t.b=Ur,l.error("E_CSS_NAMESPACE",a)}else t.b=Ur,l.error("E_CSS_UNDECLARED_PREFIX",a);else l.Wb(t.I,a.text),t.b=o?Rr:Or,br(f);continue;case 3:if(!a.b){t.b=Vr,l.error("E_CSS_SPACE_EXPECTED",a);continue}l.cc();case 4:if(34==pr(f,1).type)switch(br(f),br(f),(a=cr(f)).type){case 1:l.Wb(null,a.text),t.b=o?Rr:Or,br(f);break;case 36:l.Wb(null,null),t.b=o?Rr:Or,br(f);break;default:t.b=Ur,l.error("E_CSS_NAMESPACE",a)}else l.Wb(t.I,null),t.b=o?Rr:Or,br(f);continue;case 5:a.b&&l.cc();case 6:l.ze(a.text),t.b=o?Rr:Or,br(f);continue;case 7:a.b&&l.cc();case 8:l.oe(a.text),t.b=o?Rr:Or,br(f);continue;case 55:a.b&&l.cc();case 14:br(f);e:switch((a=cr(f)).type){case 1:l.qd(a.text,null),br(f),t.b=o?Rr:Or;continue;case 6:switch(u=a.text,br(f),u){case"not":t.b=Pr,l.xd("not"),qr(t,Number.POSITIVE_INFINITY,!1,!1,!1,!0)?t.b=Or:t.b=Vr;break t;case"lang":case"href-epub-type":if(1===(a=cr(f)).type){s=[a.text],br(f);break}break e;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":if(s=Jr(t))break;break e;default:s=Kr(t)}if(11==(a=cr(f)).type){l.qd(u,s),br(f),t.b=o?Rr:Or;continue}}l.error("E_CSS_PSEUDOCLASS_SYNTAX",a),t.b=Ur;continue;case 42:switch(br(f),(a=cr(f)).type){case 1:l.rd(a.text,null),t.b=o?Rr:Or,br(f);continue;case 6:if(u=a.text,br(f),"nth-fragment"==u){if(!(s=Jr(t)))break}else s=Kr(t);if(11==(a=cr(f)).type){l.rd(u,s),t.b=o?Rr:Or,br(f);continue}}l.error("E_CSS_PSEUDOELEM_SYNTAX",a),t.b=Ur;continue;case 9:a.b&&l.cc();case 10:if(br(f),1==(a=cr(f)).type)u=a.text,br(f);else if(36==a.type)u=null,br(f);else{if(34!=a.type){t.b=Vr,l.error("E_CSS_ATTR",a),br(f);continue}u=""}if(34==(a=cr(f)).type){if(null==(s=u?t.N[u]:u)){t.b=Vr,l.error("E_CSS_UNDECLARED_PREFIX",a),br(f);continue}if(br(f),1!=(a=cr(f)).type){t.b=Vr,l.error("E_CSS_ATTR_NAME_EXPECTED",a);continue}u=a.text,br(f),a=cr(f)}else s="";switch(a.type){case 39:case 45:case 44:case 43:case 42:case 46:case 50:h=a.type,br(f),a=cr(f);break;case 15:l.Hd(s,u,0,null),t.b=o?Rr:Or,br(f);continue;default:t.b=Vr,l.error("E_CSS_ATTR_OP_EXPECTED",a);continue}switch(a.type){case 1:case 2:l.Hd(s,u,h,a.text),br(f),a=cr(f);break;default:t.b=Vr,l.error("E_CSS_ATTR_VAL_EXPECTED",a);continue}if(15!=a.type){t.b=Vr,l.error("E_CSS_ATTR",a);continue}t.b=o?Rr:Or,br(f);continue;case 11:l.ne(),t.b=Fr,br(f);continue;case 12:l.me(),t.b=Fr,br(f);continue;case 56:l.te(),t.b=Fr,br(f);continue;case 13:t.Y?(t.h.push("-epubx-region"),t.Y=!1):t.S?(t.h.push("page"),t.S=!1):t.h.push("[selector]"),l.La(),t.b=Lr,br(f);continue;case 41:l.Sc(),t.b=Pr,br(f);continue;case 15:c.push(Le(a.text)),br(f);continue;case 16:try{c.push(xr(a.text))}catch(e){l.error("E_CSS_COLOR",a),t.b=Ur}br(f);continue;case 17:c.push(new Oe(a.L)),br(f);continue;case 18:c.push(new Re(a.L)),br(f);continue;case 19:Nt(a.text)?c.push(new ze(new ue(l.ma(),a.L,a.text))):c.push(new je(a.L,a.text)),br(f);continue;case 20:c.push(new Ie(a.text)),br(f);continue;case 21:c.push(new Pe(I(a.text,t.Z))),br(f);continue;case 22:Yr(t,",",a),c.push(","),br(f);continue;case 23:c.push(Ne),br(f);continue;case 24:"-epubx-expr"==(u=a.text.toLowerCase())||"calc"==u||"env"==u?(t.b=Mr,t.j=0,c.push("{")):(c.push(u),c.push("(")),br(f);continue;case 25:Yr(t,")",a),br(f);continue;case 47:if(br(f),a=cr(f),u=pr(f,1),1==a.type&&"important"==a.text.toLowerCase()&&(17==u.type||0==u.type||13==u.type)){br(f),t.D=!0;continue}Wr(t,"E_CSS_SYNTAX",a);continue;case 54:switch((u=pr(f,1)).type){case 4:case 3:case 5:if(!u.b){br(f);continue}}t.b===Dr&&0<=f.b?(dr(f),t.b=Pr,l.Tb()):Wr(t,"E_CSS_UNEXPECTED_PLUS",a);continue;case 26:br(f);case 48:f.b=-1,(u=Yr(t,";",a))&&t.g&&l.Qb(t.g,u,t.D),t.b=i?jr:Lr;continue;case 44:if(br(f),f.b=-1,u=Yr(t,";",a),n)return t.result=u,!0;if(t.g&&u&&l.Qb(t.g,u,t.D),i)return!0;Wr(t,"E_CSS_SYNTAX",a);continue;case 31:9==(u=pr(f,1)).type?(10!=pr(f,2).type||pr(f,2).b?(c.push(new se(l.ma(),kt(a.text,u.text))),t.b=Br):(c.push(a.text,u.text,"("),br(f)),br(f)):(2==t.j||3==t.j?"not"==a.text.toLowerCase()?(br(f),c.push(new he(l.ma(),!0,u.text))):("only"==a.text.toLowerCase()&&(br(f),a=u),c.push(new he(l.ma(),!1,a.text))):c.push(new se(l.ma(),a.text)),t.b=Br),br(f);continue;case 38:c.push(null,a.text,"("),br(f);continue;case 32:c.push(new pe(l.ma(),a.L)),br(f),t.b=Br;continue;case 33:"%"==(u=a.text)&&(u=t.g&&t.g.match(/height|^(top|bottom)$/)?"vh":"vw"),c.push(new ue(l.ma(),a.L,u)),br(f),t.b=Br;continue;case 34:c.push(new pe(l.ma(),a.text)),br(f),t.b=Br;continue;case 35:br(f),5!=(a=cr(f)).type||a.b?Wr(t,"E_CSS_SYNTAX",a):(c.push(new de(l.ma(),a.L)),br(f),t.b=Br);continue;case 36:c.push(-a.type),br(f);continue;case 37:t.b=Mr,$r(t,a.type,a),c.push(a.type),br(f);continue;case 45:"and"==a.text.toLowerCase()?(t.b=Mr,$r(t,52,a),c.push(52),br(f)):Wr(t,"E_CSS_SYNTAX",a);continue;case 39:$r(t,a.type,a)&&(t.g?t.b=Dr:Wr(t,"E_CSS_UNBALANCED_PAR",a)),br(f);continue;case 43:$r(t,11,a)&&(t.g||3==t.j?Wr(t,"E_CSS_UNEXPECTED_BRC",a):(1==t.j?l.Fc(c.pop()):(a=c.pop(),l.Fc(a)),t.h.push("media"),l.La(),t.b=Lr)),br(f);continue;case 49:if($r(t,11,a)){if(!t.g&&3==t.j)return t.B=c.pop(),t.G=!0,t.b=Lr,br(f),!1;Wr(t,"E_CSS_UNEXPECTED_SEMICOL",a)}br(f);continue;case 40:c.push(a.type),br(f);continue;case 27:t.b=Lr,br(f),l.dc(),t.h.length&&t.h.pop();continue;case 30:switch(u=a.text.toLowerCase()){case"import":if(br(f),2==(a=cr(f)).type||8==a.type){if(t.J=a.text,br(f),17==(a=cr(f)).type||0==a.type)return t.G=!0,br(f),!1;t.g=null,t.j=3,t.b=Mr,c.push("{");continue}l.error("E_CSS_IMPORT_SYNTAX",a),t.b=Ur;continue;case"namespace":switch(br(f),(a=cr(f)).type){case 1:if(u=a.text,br(f),(2==(a=cr(f)).type||8==a.type)&&17==pr(f,1).type){t.N[u]=a.text,br(f),br(f);continue}break;case 2:case 8:if(17==pr(f,1).type){t.I=a.text,br(f),br(f);continue}}l.error("E_CSS_NAMESPACE_SYNTAX",a),t.b=Ur;continue;case"charset":if(br(f),2==(a=cr(f)).type&&17==pr(f,1).type){"utf-8"!=(u=a.text.toLowerCase())&&"utf-16"!=u&&l.error("E_CSS_UNEXPECTED_CHARSET "+u,a),br(f),br(f);continue}l.error("E_CSS_CHARSET_SYNTAX",a),t.b=Ur;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(12==pr(f,1).type){switch(br(f),br(f),u){case"font-face":l.ae();break;case"-epubx-page-template":l.ce();break;case"-epubx-define":l.Zd();break;case"-epubx-viewport":l.ee()}t.h.push(u),l.La();continue}break;case"-adapt-footnote-area":switch(br(f),(a=cr(f)).type){case 12:br(f),l.wd(null),t.h.push(u),l.La();continue;case 50:if(br(f),1==(a=cr(f)).type&&12==pr(f,1).type){u=a.text,br(f),br(f),l.wd(u),t.h.push("-adapt-footnote-area"),l.La();continue}}break;case"-epubx-region":br(f),l.de(),t.Y=!0,t.b=Pr;continue;case"page":br(f),l.Vc(),t.S=!0,t.b=Fr;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(br(f),12==(a=cr(f)).type){br(f),l.Qe(u),t.h.push(u),l.La();continue}break;case"-epubx-when":br(f),t.g=null,t.j=1,t.b=Mr,c.push("{");continue;case"media":br(f),t.g=null,t.j=2,t.b=Mr,c.push("{");continue;case"-epubx-flow":if(1==pr(f,1).type&&12==pr(f,2).type){l.$d(pr(f,1).text),br(f),br(f),br(f),t.h.push(u),l.La();continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":br(f),h=s=null;var p=[];for(1==(a=cr(f)).type&&(s=a.text,br(f),a=cr(f)),18==a.type&&1==pr(f,1).type&&(h=pr(f,1).text,br(f),br(f),a=cr(f));6==a.type&&"class"==a.text.toLowerCase()&&1==pr(f,1).type&&11==pr(f,2).type;)p.push(pr(f,1).text),br(f),br(f),br(f),a=cr(f);if(12==a.type){switch(br(f),u){case"-epubx-page-master":l.be(s,h,p);break;case"-epubx-partition":l.zd(s,h,p);break;case"-epubx-partition-group":l.yd(s,h,p)}t.h.push(u),l.La();continue}break;case"":l.error("E_CSS_UNEXPECTED_AT"+u,a),t.b=Vr;continue;default:l.error("E_CSS_AT_UNKNOWN "+u,a),t.b=Ur;continue}l.error("E_CSS_AT_SYNTAX "+u,a),t.b=Ur;continue;case 50:if(n||i)return!0;t.l.push(a.type+1),br(f);continue;case 52:if(n||i)return!0;if(!t.l.length){t.b=Lr;continue}case 51:0<t.l.length&&t.l[t.l.length-1]==a.type&&t.l.pop(),t.l.length||13!=a.type||(t.b=Lr),br(f);continue;case 53:if(n||i)return!0;t.l.length||(t.b=Lr),br(f);continue;case 200:return o&&(br(f),l.Nd()),!0;default:if(n||i)return!0;if(r)return!!$r(t,11,a)&&(t.result=c.pop(),!0);if(o)return 51==a.type?l.error(a.text,a):l.error("E_CSS_SYNTAX",a),!1;t.b===Dr&&0<=f.b?(dr(f),t.b=Pr,l.Tb()):t.b!==Ur&&t.b!==Vr&&t.b!==zr?(51==a.type?l.error(a.text,a):l.error("E_CSS_SYNTAX",a),t.b=Zr(t)?zr:Vr):br(f)}return!1}function Qr(t){Er.call(this,null),this.f=t}function to(t,e,n,i,r){var o=oi("parseStylesheet"),a=new Hr(Lr,t,e,n),u=null;return r&&(u=function(t,e,n){return qr(t=new Hr(Mr,t,e,n),Number.POSITIVE_INFINITY,!1,!1,!0,!1),t.result}(new fr(r,e),e,n)),(u=function(t,e,n){if(!(t=t.u.ma()))return null;if(n=n||t.j,e)for(var i=(e=l(e=e.split(/\s+/))).next();!i.done;i=e.next())switch(i.value){case"vertical":n=ge(t,n,new Ht(t,new se(t,"pref-horizontal")));break;case"horizontal":n=ge(t,n,new se(t,"pref-horizontal"));break;case"day":n=ge(t,n,new Ht(t,new se(t,"pref-night-mode")));break;case"night":n=ge(t,n,new se(t,"pref-night-mode"));break;default:n=t.h}return n===t.j?null:new ze(n)}(a,i,u&&u.Aa()))&&(e.Fc(u),e.La()),ki(function(){for(var t={};!qr(a,100,!1,!1,!1,!1);){if(a.G){var i=I(a.J,n);return a.B&&(e.Fc(a.B),e.La()),t.Ce=oi("parseStylesheet.import"),no(i,e,null,null).then(function(t){return function(){a.B&&e.dc(),a.G=!1,a.J=null,a.B=null,xi(t.Ce,!0)}}(t)),t.Ce.result()}if((i=Ei()).Xa)return i;t={Ce:t.Ce}}return ai(!1)}).then(function(){u&&e.dc(),xi(o,!0)}),o.result()}function eo(t,e,n,i,r){return ui("parseStylesheetFromText",function(o){to(new fr(t,e),e,n,i,r).Ga(o)},function(e,n){C.b(n,"Failed to parse stylesheet text: "+t),xi(e,!1)})}function no(t,e,n,i){return ui("parseStylesheetFromURL",function(r){vr(t).then(function(o){o.responseText?eo(o.responseText,e,t,n,i).then(function(e){e||C.b("Failed to parse stylesheet from "+t),xi(r,!0)}):xi(r,!0)})},function(e,n){C.b(n,"Exception while fetching and parsing:",t),xi(e,!0)})}function io(t,e){var n=new Hr(Dr,e,new Qr(t),"");return qr(n,Number.POSITIVE_INFINITY,!0,!1,!1,!1),n.result}Lr[1]=28,Lr[36]=29,Lr[7]=29,Lr[9]=29,Lr[14]=29,Lr[18]=29,Lr[20]=30,Lr[13]=27,Lr[0]=200,jr[1]=46,jr[0]=200,Pr[1]=2,Pr[36]=4,Pr[7]=6,Pr[9]=8,Pr[14]=10,Pr[18]=14,Or[37]=11,Or[23]=12,Or[35]=56,Or[1]=1,Or[36]=3,Or[7]=5,Or[9]=7,Or[14]=9,Or[12]=13,Or[18]=55,Or[50]=42,Or[16]=41,Rr[1]=1,Rr[36]=3,Rr[7]=5,Rr[9]=7,Rr[14]=9,Rr[11]=200,Rr[18]=55,Fr[1]=2,Fr[36]=4,Fr[7]=6,Fr[9]=8,Fr[18]=14,Fr[50]=42,Fr[14]=10,Fr[12]=13,Dr[1]=15,Dr[7]=16,Dr[4]=17,Dr[5]=18,Dr[3]=19,Dr[2]=20,Dr[8]=21,Dr[16]=22,Dr[19]=23,Dr[6]=24,Dr[11]=25,Dr[17]=26,Dr[13]=48,Dr[31]=47,Dr[23]=54,Dr[0]=44,Mr[1]=31,Mr[4]=32,Mr[5]=32,Mr[3]=33,Mr[2]=34,Mr[10]=40,Mr[6]=38,Mr[31]=36,Mr[24]=36,Mr[32]=35,Br[1]=45,Br[16]=37,Br[37]=37,Br[38]=37,Br[47]=37,Br[48]=37,Br[39]=37,Br[49]=37,Br[41]=37,Br[26]=37,Br[25]=37,Br[23]=37,Br[24]=37,Br[19]=37,Br[21]=37,Br[36]=37,Br[18]=37,Br[22]=37,Br[11]=39,Br[12]=43,Br[17]=49,Ur[0]=200,Ur[12]=50,Ur[13]=51,Ur[14]=50,Ur[15]=51,Ur[10]=50,Ur[11]=51,Ur[17]=53,zr[0]=200,zr[12]=50,zr[13]=52,zr[14]=50,zr[15]=51,zr[10]=50,zr[11]=51,zr[17]=53,Vr[0]=200,Vr[12]=50,Vr[13]=51,Vr[14]=50,Vr[15]=51,Vr[10]=50,Vr[11]=51,Xr[11]=0,Xr[16]=0,Xr[22]=1,Xr[18]=1,Xr[26]=2,Xr[25]=2,Xr[38]=3,Xr[37]=3,Xr[48]=3,Xr[47]=3,Xr[39]=3,Xr[49]=3,Xr[41]=3,Xr[23]=4,Xr[24]=4,Xr[36]=5,Xr[19]=5,Xr[21]=5,Xr[0]=6,Xr[52]=2,g(Qr,Er),Qr.prototype.error=function(t){throw Error(t)},Qr.prototype.ma=function(){return this.f};var ro={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function oo(t,e,n){if(e.ef())t:{switch(typeof(t=(e=e.Mc).evaluate(t))){case"number":n=ro[n]?t==Math.round(t)?new Re(t):new Oe(t):new je(t,"px");break t;case"string":n=t?io(e.b,new fr(t,null)):Ae;break t;case"boolean":n=t?Yn:un;break t;case"undefined":n=Ae;break t}throw Error("E_UNEXPECTED")}else n=e;return n}function ao(t,e,n,i){this.V=t,this.T=e,this.U=n,this.R=i}function uo(t,e){this.f=t,this.b=e}function so(){this.bottom=this.right=this.top=this.left=0}function ho(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function lo(t,e,n,i){this.T=t,this.R=e,this.V=n,this.U=i,this.right=this.left=null}function fo(t,e){return t.b.b-e.b.b||t.b.f-e.b.f}function co(t){this.b=t}function po(t,e,n){for(var i=(t=t.b).length,r=t[i-1],o=0;o<i;o++){var a=t[o];e.push(r.b<a.b?new ho(r,a,1,n):new ho(a,r,-1,n)),r=a}}function bo(t,e,n,i){for(var r=[],o=0;20>o;o++){var a=2*o*Math.PI/20;r.push(new uo(t+n*Math.sin(a),e+i*Math.cos(a)))}return new co(r)}function go(t,e,n,i){return new co([new uo(t,e),new uo(n,e),new uo(n,i),new uo(t,i)])}function vo(t,e,n,i){this.f=t,this.h=e,this.b=n,this.g=i}function wo(t,e){var n=t.b.f+(t.f.f-t.b.f)*(e-t.b.b)/(t.f.b-t.b.b);if(isNaN(n))throw Error("Bad intersection");return n}function mo(t,e,n,i){var r,o;e.f.b<n&&C.b("Error: inconsistent segment (1)"),e.b.b<=n?(n=wo(e,n),r=e.h):(n=e.b.f,r=0),e.f.b>=i?(i=wo(e,i),o=e.h):(i=e.f.f,o=0),n<i?(t.push(new vo(n,r,e.g,-1)),t.push(new vo(i,o,e.g,1))):(t.push(new vo(i,o,e.g,-1)),t.push(new vo(n,r,e.g,1)))}function yo(t,e,n){n=e+n;for(var i=Array(n),r=Array(n),o=0;o<=n;o++)i[o]=0,r[o]=0;for(var a=[],u=!1,s=t.length,h=0;h<s;h++){var l=t[h];i[l.b]+=l.h,r[l.b]+=l.g;var f=!1;for(o=0;o<e;o++)if(i[o]&&!r[o]){f=!0;break}if(f)for(o=e;o<=n;o++)if(i[o]||r[o]){f=!1;break}u!=f&&(a.push(l.f),u=f)}return a}function xo(t,e){return e?Math.ceil(t/e)*e:t}function Eo(t,e){return e?Math.floor(t/e)*e:t}function So(t){return new uo(t.b,-t.f)}function ko(t){return new ao(t.T,-t.U,t.R,-t.V)}function Co(t){return new co(tt(t.b,So))}function Ao(t,e){for(var n=e.length-1,i=new lo(t.R,t.R,t.V,t.U);0<=n;){var r=i;(1>(i=e[n]).R-i.T||i.V==r.V&&i.U==r.U)&&(r.T=i.T,e.splice(n,1),i=r),n--}}function To(t,e){for(var n=0,i=t.length;n<i;){var r=Math.floor((n+i)/2);e>=t[r].R?n=r+1:i=r}return n}function No(t,e){if(!t.length)return e;for(var n,i=e.T,r=0;r<t.length&&!((n=t[r]).R>e.T&&n.V-.1<=e.V&&n.U+.1>=e.U);r++)i=Math.max(i,n.R);for(var o=i;r<t.length&&!((n=t[r]).T>=e.R||n.V-.1>e.V||n.U+.1<e.U);r++)o=n.R;return(o=r===t.length?e.R:Math.min(o,e.R))<=i?null:new ao(e.V,i,e.U,o)}function Io(t,e){if(!t.length)return e;for(var n,i=e.R,r=t.length-1;0<=r&&(n=t[r],!(r===t.length-1&&n.R<e.R))&&!(n.T<e.R&&n.V-.1<=e.V&&n.U+.1>=e.U);r--)i=Math.min(i,n.T);for(var o=Math.min(i,n.R);0<=r&&!((n=t[r]).R<=e.T||n.V-.1>e.V||n.U+.1<e.U);r--)o=n.T;return i<=(o=Math.max(o,e.T))?null:new ao(e.V,o,e.U,i)}function _o(){this.b={}}function Lo(t){this.value=t}function jo(t,e){if(t){var n=new Lo(e);try{return t.fa(n),n.value}catch(t){C.b(t,"toInt: ")}}return e}function Oo(){this.b=!1,this.f=[],this.name=null}function Ro(t,e,n,i,r,o){if(t){var a=new Oo;try{return t.fa(a),function(t,e,n,i,r,o){if(0<t.f.length){var a=[];switch(t.f.forEach(function(e,n){if("%"==e.ka){var u=n%2?r:i;3==n&&"circle"==t.name&&(u=Math.sqrt((i*i+r*r)/2)),a.push(e.L*u/100)}else a.push(e.L*Ot(o,e.ka,!1))}),t.name){case"polygon":if(!(a.length%2)){for(var u=[],s=0;s<a.length;s+=2)u.push(new uo(e+a[s],n+a[s+1]));return new co(u)}break;case"rectangle":if(4==a.length)return go(e+a[0],n+a[1],e+a[0]+a[2],n+a[1]+a[3]);break;case"ellipse":if(4==a.length)return bo(e+a[0],n+a[1],a[2],a[3]);break;case"circle":if(3==a.length)return bo(e+a[0],n+a[1],a[2],a[2])}}return null}(a,e,n,i,r,o)}catch(t){C.b(t,"toShape:")}}return go(e,n,e+i,n+r)}function Fo(t){this.f=t,this.b={},this.name=null}function Po(t,e){var n=new Fo(e);try{t.fa(n)}catch(t){C.b(t,"toCounters:")}return n.b}function Do(t,e){this.b=t,this.f=e}function Mo(t){this.f=this.g=null,this.b=0,this.eb=t}function Bo(t,e){this.b=-1,this.f=t,this.g=e}function Uo(){this.X=[],this.b=[],this.match=[],this.f=[],this.error=[],this.g=!0}function zo(t,e,n,i){var r=t.X.length,o=new Mo(Wo);o.b=0<=i?n?2*i+1:2*i+2:n?-1:-2,t.X.push(o),t.connect(e,r),n=new Bo(r,!0),r=new Bo(r,!1),e.push(t.b.length),t.b.push(r),e.push(t.b.length),t.b.push(n)}function Vo(t){return 1==t.X.length&&!t.X[0].b&&t.X[0].eb instanceof Yo}function Xo(t,e,n){if(e.X.length){var i=t.X.length;if(4==n&&1==i&&Vo(e)&&Vo(t)){n=t.X[0].eb,e=e.X[0].eb;i={};var r,o={};for(r in n.f)i[r]=n.f[r];for(r in e.f)i[r]=e.f[r];for(var a in n.g)o[a]=n.g[a];for(a in e.g)o[a]=e.g[a];t.X[0].eb=new Yo(n.b|e.b,i,o)}else{for(r=0;r<e.X.length;r++)t.X.push(e.X[r]);for(4==n?(t.g=!0,t.connect(t.f,i)):t.connect(t.match,i),a=t.b.length,r=0;r<e.b.length;r++)(o=e.b[r]).f+=i,0<=o.b&&(o.b+=i),t.b.push(o);for(r=0;r<e.match.length;r++)t.match.push(e.match[r]+a);if(3==n&&t.connect(t.match,i),2==n||3==n)for(r=0;r<e.f.length;r++)t.match.push(e.f[r]+a);else if(t.g){for(r=0;r<e.f.length;r++)t.f.push(e.f[r]+a);t.g=e.g}else for(r=0;r<e.f.length;r++)t.error.push(e.f[r]+a);for(r=0;r<e.error.length;r++)t.error.push(e.error[r]+a);e.X=null,e.b=null}}}g(_o,Ee),_o.prototype.rc=function(t){return this.b[t.name]=!0,t},_o.prototype.Ub=function(t){return this.sc(t.values),t},g(Lo,Ee),Lo.prototype.Zc=function(t){return this.value=t.L,t},g(Oo,Ee),Oo.prototype.ad=function(t){return this.b&&this.f.push(t),null},Oo.prototype.$c=function(t){return this.b&&!t.L&&this.f.push(new je(0,"px")),null},Oo.prototype.Ub=function(t){return this.sc(t.values),null},Oo.prototype.Xb=function(t){return this.b||(this.b=!0,this.sc(t.values),this.b=!1,this.name=t.name.toLowerCase()),null},g(Fo,Ee),Fo.prototype.rc=function(t){return this.name=t.toString(),this.b[this.name]=this.f?0:(this.b[this.name]||0)+1,t},Fo.prototype.Zc=function(t){return this.name&&(this.b[this.name]+=t.L-(this.f?0:1)),t},Fo.prototype.Ub=function(t){return this.sc(t.values),t},g(Do,Se),Do.prototype.bd=function(t){return new Pe(this.f.oc(t.url,this.b))},Uo.prototype.connect=function(t,e){for(var n=0;n<t.length;n++)this.b[t[n]].b=e;t.splice(0,t.length)},Uo.prototype.clone=function(){for(var t=new Uo,e=0;e<this.X.length;e++){var n=this.X[e],i=new Mo(n.eb);i.b=n.b,t.X.push(i)}for(e=0;e<this.b.length;e++)(i=new Bo((n=this.b[e]).f,n.g)).b=n.b,t.b.push(i);return t.match.push.apply(t.match,[].concat(f(this.match))),t.f.push.apply(t.f,[].concat(f(this.f))),t.error.push.apply(t.error,[].concat(f(this.error))),t};var Ho={};function Go(){}function Yo(t,e,n){this.b=t,this.f=e,this.g=n}g(Go,Ee),Go.prototype.h=function(t,e){var n=t[e].fa(this);return n?[n]:null},g(Yo,Go),(n=Yo.prototype).Se=function(t){return 1&this.b?t:null},n.Te=function(t){return 2048&this.b?t:null},n.Bd=function(t){return 2&this.b?t:null},n.rc=function(t){var e=this.f[t.name.toLowerCase()];return e||(4&this.b?t:null)},n.ad=function(t){return t.L||512&this.b?0>t.L&&!(256&this.b)?null:this.g[t.ka]?t:null:"%"==t.ka&&1024&this.b?t:null},n.$c=function(t){return t.L?0>=t.L&&!(256&this.b)?null:16&this.b?t:null:512&this.b?t:null},n.Zc=function(t){return t.L?0>=t.L&&!(256&this.b)?null:48&this.b?t:(t=this.f[""+t.L])?t:null:512&this.b?t:null},n.he=function(t){return 64&this.b?t:null},n.bd=function(t){return 128&this.b?t:null},n.Ub=function(){return null},n.qc=function(){return null},n.Xb=function(){return null},n.Yc=function(t){return 2046&this.b?t:null};var Wo=new Yo(0,Ho,Ho);function $o(t){this.b=new Mo(null);var e=this.g=new Mo(null),n=t.X.length;t.X.push(this.b),t.X.push(e),t.connect(t.match,n),t.connect(t.f,n+1),t.connect(t.error,n+1);for(var i=(e=l(t.b)).next();!i.done;i=e.next())(i=i.value).g?t.X[i.f].g=t.X[i.b]:t.X[i.f].f=t.X[i.b];for(e=0;e<n;e++)if(!t.X[e].f||!t.X[e].g)throw Error("Invalid validator state");this.f=t.X[0]}function Ko(t,e,n,i){for(var r=n?[]:e,o=t.f,a=i,u=null,s=null;o!==t.b&&o!==t.g;)if(a>=e.length)o=o.f;else{var h,l=e[a];if(o.b)h=!0,-1==o.b?(u?u.push(s):u=[s],s=[]):-2==o.b?s=0<u.length?u.pop():null:0<o.b&&!(o.b%2)?s[Math.floor((o.b-1)/2)]="taken":h=null==s[Math.floor((o.b-1)/2)],o=h?o.g:o.f;else{if(!a&&!n&&o.eb instanceof Jo&&t instanceof Jo){if(h=new Me(e).fa(o.eb)){a=e.length,o=o.g;continue}}else if(!a&&!n&&o.eb instanceof Zo&&t instanceof Jo){if(h=new Be(e).fa(o.eb)){a=e.length,o=o.g;continue}}else h=l.fa(o.eb);if(h){if(h!==l&&e===r)for(r=[],l=0;l<a;l++)r[l]=e[l];e!==r&&(r[a-i]=h),a++,o=o.g}else o=o.f}}return o===t.b&&(n?0<r.length:a==e.length)?r:null}function Jo(t){$o.call(this,t)}function Zo(t){$o.call(this,t)}function qo(t,e){$o.call(this,e),this.name=t}function Qo(){}function ta(t,e){this.name=e,this.eb=t.g[this.name]}function ea(t,e){ta.call(this,t,e[0]),this.g=e}function na(t,e){this.X=t,this.sf=e}function ia(){this.f=this.Ab=null,this.error=!1,this.values={},this.b=null}function ra(t,e){return t.Ic([e]),null}function oa(){ia.call(this)}function aa(){ia.call(this)}function ua(){ia.call(this)}function sa(){ia.call(this)}function ha(){ia.call(this)}g($o,Go),(n=$o.prototype).Db=function(t){for(var e=null,n=this.f;n!==this.b&&n!==this.g;)t?n.b?n=n.g:(e=t.fa(n.eb))?(t=null,n=n.g):n=n.f:n=n.f;return n===this.b?e:null},n.Se=function(t){return this.Db(t)},n.Te=function(t){return this.Db(t)},n.Bd=function(t){return this.Db(t)},n.rc=function(t){return this.Db(t)},n.ad=function(t){return this.Db(t)},n.$c=function(t){return this.Db(t)},n.Zc=function(t){return this.Db(t)},n.he=function(t){return this.Db(t)},n.bd=function(t){return this.Db(t)},n.Ub=function(){return null},n.qc=function(){return null},n.Xb=function(t){return this.Db(t)},n.Yc=function(){return null},g(Jo,$o),Jo.prototype.Ub=function(t){var e=Ko(this,t.values,!1,0);return e===t.values?t:e?new Me(e):null},Jo.prototype.qc=function(t){for(var e=this.f,n=!1;e;){if(e.eb instanceof Zo){n=!0;break}e=e.f}return n?(e=Ko(this,t.values,!1,0))===t.values?t:e?new Be(e):null:null},Jo.prototype.h=function(t,e){return Ko(this,t,!0,e)},g(Zo,$o),Zo.prototype.Ub=function(t){return this.Db(t)},Zo.prototype.qc=function(t){var e=Ko(this,t.values,!1,0);return e===t.values?t:e?new Be(e):null},Zo.prototype.h=function(t,e){for(var n,i=this.f;i!==this.g;){if(n=i.eb.h(t,e))return n;i=i.f}return null},g(qo,$o),qo.prototype.Db=function(){return null},qo.prototype.Xb=function(t){if(t.name.toLowerCase()!=this.name)return null;var e=Ko(this,t.values,!1,0);return e===t.values?t:e?new Ue(t.name,e):null},Qo.prototype.b=function(t,e){return e},Qo.prototype.f=function(){},g(ta,Qo),ta.prototype.b=function(t,e,n){if(n.values[this.name])return e;if(t=this.eb.h(t,e)){var i=t.length;return this.f(1<i?new Me(t):t[0],n),e+i}return e},ta.prototype.f=function(t,e){e.values[this.name]=t},g(ea,ta),ea.prototype.f=function(t,e){for(var n=0;n<this.g.length;n++)e.values[this.g[n]]=t},g(na,Qo),na.prototype.b=function(t,e,n){var i=e;if(this.sf){if(t[e]!=Ne)return i;if(++e==t.length)return i}var r=this.X[0].b(t,e,n);if(r==e)return i;for(e=r,i=1;i<this.X.length&&e<t.length&&(r=this.X[i].b(t,e,n))!=e;i++)e=r;return e},(n=ia.prototype).clone=function(){var t=new this.constructor;return t.Ab=this.Ab,t.f=this.f,t.b=this.b,t},n.Ue=function(t,e){this.Ab=t,this.f=e},n.Ic=function(){return this.error=!0,0},n.Se=function(t){return ra(this,t)},n.Bd=function(t){return ra(this,t)},n.rc=function(t){return ra(this,t)},n.ad=function(t){return ra(this,t)},n.$c=function(t){return ra(this,t)},n.Zc=function(t){return ra(this,t)},n.he=function(t){return ra(this,t)},n.bd=function(t){return ra(this,t)},n.Ub=function(t){return this.Ic(t.values),null},n.qc=function(){return this.error=!0,null},n.Xb=function(t){return ra(this,t)},n.Yc=function(){return this.error=!0,null},g(oa,ia),oa.prototype.Ic=function(t){for(var e=0,n=0;e<t.length;){var i=this.Ab[n].b(t,e,this);if(i>e)e=i,n=0;else if(++n==this.Ab.length){this.error=!0;break}}return e},g(aa,ia),aa.prototype.Ic=function(t){if(t.length>this.Ab.length||!t.length)return this.error=!0,0;for(var e=0;e<this.Ab.length;e++){for(var n=e;n>=t.length;)n=1==n?0:n-2;if(this.Ab[e].b(t,n,this)!=n+1)return this.error=!0,0}return t.length},g(ua,ia),ua.prototype.Ic=function(t){for(var e=t.length,n=0;n<t.length;n++)if(t[n]===Ne){e=n;break}if(e>this.Ab.length||!t.length)return this.error=!0,0;for(n=0;n<this.Ab.length;n++){for(var i=n;i>=e;)i=1==i?0:i-2;var r;if(e+1<t.length)for(r=e+n+1;r>=t.length;)r-=r==e+2?1:2;else r=i;if(2!=this.Ab[n].b([t[i],t[r]],0,this))return this.error=!0,0}return t.length},g(sa,oa),sa.prototype.qc=function(t){for(var e={},n=0;n<t.values.length;n++){if(this.values={},t.values[n]instanceof Be)this.error=!0;else{t.values[n].fa(this);for(var i=this.values,r=l(this.f),o=r.next();!o.done;o=r.next()){var a=i[o=o.value]||this.b.l[o],u=e[o];u||(u=[],e[o]=u),u.push(a)}this.values["background-color"]&&n!=t.values.length-1&&(this.error=!0)}if(this.error)return null}for(var s in this.values={},e)this.values[s]="background-color"==s?e[s].pop():new Be(e[s]);return null},g(ha,oa),ha.prototype.Ue=function(t,e){oa.prototype.Ue.call(this,t,e),this.f.push("font-family","line-height","font-size")},ha.prototype.Ic=function(t){var e=oa.prototype.Ic.call(this,t);if(e+2>t.length)return this.error=!0,e;this.error=!1;var n=this.b.g;if(!t[e].fa(n["font-size"]))return this.error=!0,e;if(this.values["font-size"]=t[e++],t[e]===Ne){if(++e+2>t.length||!t[e].fa(n["line-height"]))return this.error=!0,e;this.values["line-height"]=t[e++]}var i=e==t.length-1?t[e]:new Me(t.slice(e,t.length));return i.fa(n["font-family"])?(this.values["font-family"]=i,t.length):(this.error=!0,e)},ha.prototype.qc=function(t){if(t.values[0].fa(this),this.error)return null;for(var e=[this.values["font-family"]],n=1;n<t.values.length;n++)e.push(t.values[n]);return(t=new Be(e)).fa(this.b.g["font-family"])?this.values["font-family"]=t:this.error=!0,null},ha.prototype.rc=function(t){if(t=this.b.f[t.name])for(var e in t)this.values[e]=t[e];else this.error=!0;return null};var la={SIMPLE:oa,INSETS:aa,INSETS_SLASH:ua,COMMA:sa,FONT:ha};function fa(){this.g={},this.B={},this.l={},this.b={},this.f={},this.h={},this.u=[],this.j=[]}function ca(t,e){var n;if(3==e.type)n=new je(e.L,e.text);else if(7==e.type)n=xr(e.text);else{if(1!=e.type)throw Error("unexpected replacement");n=Le(e.text)}if(Vo(t)){var i,r=t.X[0].eb.f;for(i in r)r[i]=n;return t}throw Error("unexpected replacement")}function pa(t,e,n){for(var i=new Uo,r=0;r<e;r++)Xo(i,t.clone(),1);if(n==Number.POSITIVE_INFINITY)Xo(i,t,3);else for(r=e;r<n;r++)Xo(i,t.clone(),2);return i}function ba(t){var e=new Uo,n=e.X.length;e.X.push(new Mo(t)),t=new Bo(n,!0);var i=new Bo(n,!1);return e.connect(e.match,n),e.g?(e.f.push(e.b.length),e.g=!1):e.error.push(e.b.length),e.b.push(i),e.match.push(e.b.length),e.b.push(t),e}function da(t,e){var n;switch(t){case"COMMA":n=new Zo(e);break;case"SPACE":n=new Jo(e);break;default:n=new qo(t.toLowerCase(),e)}return ba(n)}function ga(t){return!!t.match(/^[A-Z_0-9]+$/)}function va(t,e,n){var i=cr(e);if(0==i.type)return null;var r={"":!0};if(14==i.type){do{if(br(e),1!=(i=cr(e)).type)throw Error("Prefix name expected");r[i.text]=!0,br(e),i=cr(e)}while(16==i.type);if(15!=i.type)throw Error("']' expected");br(e),i=cr(e)}if(1!=i.type)throw Error("Property name expected");if(2==n?"SHORTHANDS"==i.text:"DEFAULTS"==i.text)return br(e),null;if(i=i.text,br(e),2!=n){if(39!=cr(e).type)throw Error("'=' expected");ga(i)||(t.B[i]=r)}else if(18!=cr(e).type)throw Error("':' expected");return i}function wa(t,e){for(var n={},i=l(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=(r=l((o=t.h[r])?o.f:[r])).next();!o.done;o=r.next()){o=o.value;var a=t.l[o];a?n[o]=a:C.b("Unknown property in makePropSet:",o)}}return n}function ma(t,e,n,i,r){var o="",a=e,u=(e=e.toLowerCase()).match(/^-([a-z]+)-([-a-z0-9]+)$/);if(u&&(o=u[1],e=u[2]),(u=t.B[e])&&u[o])if(o=t.g[e])(t=n===bn||n.ef()?n:n.fa(o))?r.Sb(e,t,i):r.kd(a,n);else if(e=t.h[e].clone(),n===bn)for(a=(n=l(e.f)).next();!a.done;a=n.next())r.Sb(a.value,bn,i);else{if(n.fa(e),e.error)i=!1;else{for(o=(t=l(e.f)).next();!o.done;o=t.next())o=o.value,r.Sb(o,e.values[o]||e.b.l[o],i);i=!0}i||r.kd(a,n)}else r.fe(a,n)}var ya=new _i(function(){var t=oi("loadValidatorSet.load"),e=I("validation.txt",N),n=vr(e),i=new fa;return function(t){t.b.HASHCOLOR=ba(new Yo(64,Ho,Ho)),t.b.POS_INT=ba(new Yo(32,Ho,Ho)),t.b.POS_NUM=ba(new Yo(16,Ho,Ho)),t.b.POS_PERCENTAGE=ba(new Yo(8,Ho,{"%":Ae})),t.b.NEGATIVE=ba(new Yo(256,Ho,Ho)),t.b.ZERO=ba(new Yo(512,Ho,Ho)),t.b.ZERO_PERCENTAGE=ba(new Yo(1024,Ho,Ho)),t.b.POS_LENGTH=ba(new Yo(8,Ho,{em:Ae,ex:Ae,ch:Ae,rem:Ae,vw:Ae,vh:Ae,vi:Ae,vb:Ae,vmin:Ae,vmax:Ae,pvw:Ae,pvh:Ae,pvi:Ae,pvb:Ae,pvmin:Ae,pvmax:Ae,cm:Ae,mm:Ae,in:Ae,px:Ae,pt:Ae,pc:Ae,q:Ae})),t.b.POS_ANGLE=ba(new Yo(8,Ho,{deg:Ae,grad:Ae,rad:Ae,turn:Ae})),t.b.POS_TIME=ba(new Yo(8,Ho,{s:Ae,ms:Ae})),t.b.FREQUENCY=ba(new Yo(8,Ho,{Hz:Ae,kHz:Ae})),t.b.RESOLUTION=ba(new Yo(8,Ho,{dpi:Ae,dpcm:Ae,dppx:Ae})),t.b.URI=ba(new Yo(128,Ho,Ho)),t.b.IDENT=ba(new Yo(4,Ho,Ho)),t.b.STRING=ba(new Yo(2,Ho,Ho)),t.b.SLASH=ba(new Yo(2048,Ho,Ho));var e={"font-family":Le("sans-serif")};t.f.caption=e,t.f.icon=e,t.f.menu=e,t.f["message-box"]=e,t.f["small-caption"]=e,t.f["status-bar"]=e}(i),n.then(function(n){try{if(n.responseText){var r=new fr(n.responseText,null);for(function(t,e){for(var n={};;){var i=va(t,e,1);if(!i)break;n.ra=[];var r=[];n.bb="";var o=void 0;n.ab=!0,n.ig=t;for(var a=function(t){return function(){if(!t.ra.length)throw Error("No values");var e;if(1==t.ra.length)e=t.ra[0];else{var n=t.bb,i=t.ra;if(e=new Uo,"||"==n){for(n=0;n<i.length;n++){var r=new Uo;if(r.X.length)throw Error("invalid call");(o=new Mo(Wo)).b=2*n+1,r.X.push(o);var o=new Bo(0,!0),a=new Bo(0,!1);r.f.push(r.b.length),r.b.push(a),r.match.push(r.b.length),r.b.push(o),Xo(r,i[n],1),zo(r,r.match,!1,n),Xo(e,r,n?4:1)}if((i=new Uo).X.length)throw Error("invalid call");for(zo(i,i.match,!0,-1),Xo(i,e,3),e=[i.match,i.f,i.error],n=0;n<e.length;n++)zo(i,e[n],!1,-1);e=i}else{switch(n){case" ":r=1;break;case"|":case"||":r=4;break;default:throw Error("unexpected op")}for(n=0;n<i.length;n++)Xo(e,i[n],n?r:1)}}return e}}(n),u=function(t){return function(e){if(t.ab)throw Error("'"+e+"': unexpected");if(t.bb&&t.bb!=e)throw Error("mixed operators: '"+e+"' and '"+t.bb+"'");t.bb=e,t.ab=!0}}(n),s=null;!s;)switch(br(e),(o=cr(e)).type){case 1:if(n.ab||u(" "),ga(o.text)){var h=t.b[o.text];if(!h)throw Error("'"+o.text+"' unexpected");n.ra.push(h.clone())}else(h={})[o.text.toLowerCase()]=Le(o.text),n.ra.push(ba(new Yo(0,h,Ho)));n.ab=!1;break;case 5:(h={})[""+o.L]=new Re(o.L),n.ra.push(ba(new Yo(0,h,Ho))),n.ab=!1;break;case 34:u("|");break;case 25:u("||");break;case 14:n.ab||u(" "),r.push({ra:n.ra,bb:n.bb,Nb:"["}),n.bb="",n.ra=[],n.ab=!0;break;case 6:n.ab||u(" "),r.push({ra:n.ra,bb:n.bb,Nb:"(",Pc:o.text}),n.bb="",n.ra=[],n.ab=!0;break;case 15:if(o=a(),"["!=(h=r.pop()).Nb)throw Error("']' unexpected");n.ra=h.ra,n.ra.push(o),n.bb=h.bb,n.ab=!1;break;case 11:if(o=a(),"("!=(h=r.pop()).Nb)throw Error("')' unexpected");n.ra=h.ra,n.ra.push(da(h.Pc,o)),n.bb=h.bb,n.ab=!1;break;case 18:if(n.ab)throw Error("':' unexpected");br(e),n.ra.push(ca(n.ra.pop(),cr(e)));break;case 22:if(n.ab)throw Error("'?' unexpected");n.ra.push(pa(n.ra.pop(),0,1));break;case 36:if(n.ab)throw Error("'*' unexpected");n.ra.push(pa(n.ra.pop(),0,Number.POSITIVE_INFINITY));break;case 23:if(n.ab)throw Error("'+' unexpected");n.ra.push(pa(n.ra.pop(),1,Number.POSITIVE_INFINITY));break;case 12:if(br(e),5!=(o=cr(e)).type)throw Error("<int> expected");var l=h=o.L;if(br(e),16==(o=cr(e)).type){if(br(e),5!=(o=cr(e)).type)throw Error("<int> expected");l=o.L,br(e),o=cr(e)}if(13!=o.type)throw Error("'}' expected");n.ra.push(pa(n.ra.pop(),h,l));break;case 17:if(s=a(),0<r.length)throw Error("unclosed '"+r.pop().Nb+"'");break;default:throw Error("unexpected token")}br(e),ga(i)?t.b[i]=s:t.g[i]=1!=s.X.length||s.X[0].b?new Jo(s):s.X[0].eb,n={ra:n.ra,ig:n.ig,bb:n.bb,ab:n.ab}}}(i,r);;){var o=va(i,r,2);if(!o)break;for(n=[];;){if(br(r),17==(d=cr(r)).type){br(r);break}switch(d.type){case 1:n.push(Le(d.text));break;case 4:n.push(new Oe(d.L));break;case 5:n.push(new Re(d.L));break;case 3:n.push(new je(d.L,d.text));break;default:throw Error("unexpected token")}}i.l[o]=1<n.length?new Me(n):n[0]}for(;;){var a=va(i,r,3);if(!a)break;var u,s=pr(r,1);1==s.type&&la[s.text]?(u=new la[s.text],br(r)):u=new oa,u.b=i,o=!1,d=[],n=!1;for(var h=[],l=[];!o;)switch(br(r),(s=cr(r)).type){case 1:if(i.g[s.text])d.push(new ta(u.b,s.text)),l.push(s.text);else{if(!(i.h[s.text]instanceof aa))throw Error("'"+s.text+"' is neither a simple property nor an inset shorthand");var c=i.h[s.text];d.push(new ea(c.b,c.f)),l.push.apply(l,[].concat(f(c.f)))}break;case 19:if(0<d.length||n)throw Error("unexpected slash");n=!0;break;case 14:h.push({sf:n,Ab:d}),d=[],n=!1;break;case 15:var p=new na(d,n),b=h.pop(),d=b.Ab;n=b.sf,d.push(p);break;case 17:o=!0,br(r);break;default:throw Error("unexpected token")}u.Ue(d,l),i.h[a]=u}i.j=wa(i,["background"]),i.u=wa(i,"margin border padding columns column-gap column-rule column-fill".split(" "))}else C.error("Error: missing",e)}catch(t){C.error(t,"Error:")}xi(t,i)}),t.result()},"validatorFetcher"),xa={azimuth:!0,"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,elevation:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-vertical":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,"pitch-range":!0,quotes:!0,richness:!0,"ruby-align":!0,"ruby-position":!0,"speak-header":!0,"speak-numeral":!0,"speak-punctuation":!0,"speech-rate":!0,"shape-rendering":!0,stress:!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-decoration-skip":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-rendering":!0,"text-size-adjust":!0,"text-transform":!0,"text-underline-position":!0,visibility:!0,"voice-family":!0,volume:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"writing-mode":!0},Ea=["box-decoration-break","image-resolution","orphans","widows"];for(var Sa={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0},ka="margin-% padding-% border-%-width border-%-style border-%-color %".split(" "),Ca=["max-%","min-%","%"],Aa=["left","right","top","bottom"],Ta={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0},Na=0;Na<ka.length;Na++)for(var Ia=0;Ia<Aa.length;Ia++){var _a=ka[Na].replace("%",Aa[Ia]);Ta[_a]=!0}function La(t,e){for(var n={},i=l(ka),r=i.next();!r.done;r=i.next()){var o;r=r.value;for(o in t){var a=r.replace("%",o),u=r.replace("%",t[o]);n[a]=u,n[u]=a}}for(o=(i=l(Ca)).next();!o.done;o=i.next())for(var s in o=o.value,e)r=o.replace("%",s),a=o.replace("%",e[s]),n[r]=a,n[a]=r;return n}var ja=La({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),Oa=La({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),Ra=La({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),Fa=La({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"});function Pa(t,e){this.value=t,this.cb=e}function Da(t,e,n){Pa.call(this,t,e),this.ia=n}function Ma(t,e,n){return(!e||n.cb>e.cb)&&n.zf(t)?n.Qf():e}(n=Pa.prototype).Qf=function(){return this},n.Pd=function(t){return(t=this.value.fa(t))===this.value?this:new Pa(t,this.cb)},n.Sf=function(t){return t?new Pa(this.value,this.cb+t):this},n.evaluate=function(t,e){return oo(t,this.value,e)},n.zf=function(){return!0},g(Da,Pa),Da.prototype.Qf=function(){return new Pa(this.value,this.cb)},Da.prototype.Pd=function(t){return(t=this.value.fa(t))===this.value?this:new Da(t,this.cb,this.ia)},Da.prototype.Sf=function(t){return t?new Da(this.value,this.cb+t,this.ia):this},Da.prototype.zf=function(t){return!!this.ia.evaluate(t)};var Ba={"region-id":!0,"fragment-selector-id":!0};function Ua(t){return"_"!=t.charAt(0)&&!Ba[t]}function za(t,e,n){n?t[e]=n:delete t[e]}function Va(t,e){var n=t[e];return n||(n={},t[e]=n),n}function Xa(t,e){var n=t[e];return n||(n=[],t[e]=n),n}function Ha(t,e,n,i,r,o,a){for(var u in[{id:r,mg:"_pseudos"},{id:o,mg:"_regions"}].forEach(function(t){if(t.id){var n=Va(e,t.mg);(e=n[t.id])||(e={},n[t.id]=e)}}),a&&(r=function(t){var e=t._viewConditionalStyles;return e||(e=[],t._viewConditionalStyles=e),e}(e),e={},r.push({Mg:e,Cg:a})),n)"_"!=u.charAt(0)&&(Ba[u]?(a=n[u],r=Xa(e,u),Array.prototype.push.apply(r,a)):za(e,u,Ma(t,e[u],n[u].Sf(i))))}function Ga(t,e){if(0<t.length){t.sort(function(t,e){return e.f()-t.f()});for(var n=null,i=t.length-1;0<=i;i--)(n=t[i]).b=e,e=n;return n}return e}function Ya(t,e){this.g=t,this.f=e,this.b=""}function Wa(t){var e;t:switch((t=t.g["font-size"].value).ka.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":e=!0;break t;default:e=!1}if(!e)throw Error("Unexpected state");return t.L*It[t.ka]}function $a(t,e,n){var i=t.ka,r=t.L;return"em"===i||"ex"===i?new je(It[i]/It.em*r*e,"px"):"rem"===i?new je(r*n.fontSize(),"px"):t}function Ka(){}function Ja(t){this.b=t}function Za(t){this.b=t}function qa(t,e,n,i,r){this.style=t,this.ba=e,this.b=n,this.h=i,this.j=r}function Qa(){this.b=null}function tu(t){this.b=null,this.h=t}function eu(t){this.b=null,this.id=t}function nu(t){this.b=null,this.localName=t}function iu(t,e){this.b=null,this.h=t,this.localName=e}function ru(t){this.b=null,this.h=t}function ou(t){this.b=null,this.h=t}function au(t,e){this.b=null,this.h=t,this.name=e}function uu(t,e,n){this.b=null,this.h=t,this.name=e,this.value=n}function su(t,e){this.b=null,this.h=t,this.name=e}function hu(t,e,n){this.b=null,this.j=t,this.name=e,this.h=n}function lu(t){this.b=null,this.h=t}function fu(){this.b=null}function cu(){this.b=null}function pu(t,e){this.b=null,this.h=t,this.Nb=e}function bu(t,e,n){return t-=n,e?!(t%e)&&0<=t/e:!t}function du(t,e){pu.call(this,t,e)}function gu(t,e){pu.call(this,t,e)}function vu(t,e){pu.call(this,t,e)}function wu(t,e){pu.call(this,t,e)}function mu(){this.b=null}function yu(){this.b=null}function xu(){this.b=null}function Eu(){this.b=null}function Su(t){this.b=null,this.ia=t}function ku(){this.b=!1}function Cu(t){this.b=null,this.h=new ku,this.j=Ga(t,this.h)}function Au(t,e,n){this.ia=t,this.b=e,this.j=n}function Tu(t,e){var n=t.ia,i=t.j;e.ca[n]=(e.ca[n]||0)+1,i&&(e.B[n]?e.B[n].push(i):e.B[n]=[i])}function Nu(t,e){!function(t,e,n){t.ca[e]--,t.B[e]&&(t.B[e]=t.B[e].filter(function(t){return t!==n}),t.B[e].length||delete t.B[e])}(e,t.ia,t.j)}function Iu(t,e,n){Au.call(this,t,e,n)}function _u(t,e,n){Au.call(this,t,e,n)}function Lu(t,e,n){Au.call(this,t,e,n),this.h=!1}function ju(t,e,n){Au.call(this,t,e,n),this.h=!1}function Ou(t,e){this.b=t,this.element=e}function Ru(t){this.lang=t}function Fu(t){this.b=t}function Pu(t){this.element=t}function Du(t,e){switch(e){case"url":return new Pe(t||"about:invalid");default:return new Ie(t||"")}}function Mu(t,e,n){this.f=t,this.element=e,this.b=n}g(Ya,Se),Ya.prototype.ad=function(t){if("font-size"===this.b){var e=Wa(this),n=this.f,i=(t=$a(t,e,n)).ka,r=t.L;return"px"===i?t:new je("%"===i?r/100*e:r*Ot(n,i,!1),"px")}return"em"==t.ka||"ex"==t.ka||"rem"==t.ka?$a(t,Wa(this),this.f):"%"==t.ka?"line-height"===this.b?t:(e=this.b.match(/height|^(top|bottom)$/)?"vh":"vw",new je(t.L,e)):t},Ya.prototype.Yc=function(t){return"font-size"==this.b?oo(this.f,t,this.b).fa(this):t},Ka.prototype.apply=function(){},Ka.prototype.l=function(t){return new Za([this,t])},Ka.prototype.clone=function(){return this},g(Ja,Ka),Ja.prototype.apply=function(t){var e=this.b.g(t);t.h[t.h.length-1].push(e)},g(Za,Ka),Za.prototype.apply=function(t){for(var e=0;e<this.b.length;e++)this.b[e].apply(t)},Za.prototype.l=function(t){return this.b.push(t),this},Za.prototype.clone=function(){return new Za([].concat(this.b))},g(qa,Ka),qa.prototype.apply=function(t){Ha(t.l,t.F,this.style,this.ba,this.b,this.h,qu(t,this.j))},g(Qa,Ka),Qa.prototype.apply=function(t){this.b.apply(t)},Qa.prototype.f=function(){return 0},Qa.prototype.g=function(){return!1},g(tu,Qa),tu.prototype.apply=function(t){t.G.includes(this.h)&&this.b.apply(t)},tu.prototype.f=function(){return 10},tu.prototype.g=function(t){return this.b&&Ju(t.Pa,this.h,this.b),!0},g(eu,Qa),eu.prototype.apply=function(t){t.Y!=this.id&&t.la!=this.id||this.b.apply(t)},eu.prototype.f=function(){return 11},eu.prototype.g=function(t){return this.b&&Ju(t.g,this.id,this.b),!0},g(nu,Qa),nu.prototype.apply=function(t){t.f==this.localName&&this.b.apply(t)},nu.prototype.f=function(){return 8},nu.prototype.g=function(t){return this.b&&Ju(t.Ad,this.localName,this.b),!0},g(iu,Qa),iu.prototype.apply=function(t){t.f==this.localName&&t.j==this.h&&this.b.apply(t)},iu.prototype.f=function(){return 8},iu.prototype.g=function(t){if(this.b){var e=t.b[this.h];e||(e="ns"+t.j+++":",t.b[this.h]=e),Ju(t.h,e+this.localName,this.b)}return!0},g(ru,Qa),ru.prototype.apply=function(t){var e=t.b;if(e&&"a"==t.f){var n=e.getAttribute("href");n&&n.match(/^#/)&&(e=e.ownerDocument.getElementById(n.substring(1)))&&(e=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))&&e.match(this.h)&&this.b.apply(t)}},g(ou,Qa),ou.prototype.apply=function(t){t.j==this.h&&this.b.apply(t)},g(au,Qa),au.prototype.apply=function(t){t.b&&t.b.hasAttributeNS(this.h,this.name)&&this.b.apply(t)},g(uu,Qa),uu.prototype.apply=function(t){t.b&&t.b.getAttributeNS(this.h,this.name)==this.value&&this.b.apply(t)},uu.prototype.f=function(){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h?9:0},uu.prototype.g=function(t){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h&&(this.b&&Ju(t.f,this.value,this.b),!0)},g(su,Qa),su.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.h,this.name);e&&Sa[e]&&this.b.apply(t)}},su.prototype.f=function(){return 0},su.prototype.g=function(){return!1},g(hu,Qa),hu.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.j,this.name);e&&e.match(this.h)&&this.b.apply(t)}},g(lu,Qa),lu.prototype.apply=function(t){t.lang.match(this.h)&&this.b.apply(t)},g(fu,Qa),fu.prototype.apply=function(t){t.ob&&this.b.apply(t)},fu.prototype.f=function(){return 6},g(cu,Qa),cu.prototype.apply=function(t){t.ta&&this.b.apply(t)},cu.prototype.f=function(){return 12},g(pu,Qa),g(du,pu),du.prototype.apply=function(t){bu(t.Za,this.h,this.Nb)&&this.b.apply(t)},du.prototype.f=function(){return 5},g(gu,pu),gu.prototype.apply=function(t){bu(t.Cb[t.j][t.f],this.h,this.Nb)&&this.b.apply(t)},gu.prototype.f=function(){return 5},g(vu,pu),vu.prototype.apply=function(t){var e=t.S;null===e&&(e=t.S=t.b.parentNode.childElementCount-t.Za+1),bu(e,this.h,this.Nb)&&this.b.apply(t)},vu.prototype.f=function(){return 4},g(wu,pu),wu.prototype.apply=function(t){var e=t.yb;if(!e[t.j]){var n=t.b;do{var i=n.namespaceURI,r=n.localName,o=e[i];o||(o=e[i]={}),o[r]=(o[r]||0)+1}while(n=n.nextElementSibling)}bu(e[t.j][t.f],this.h,this.Nb)&&this.b.apply(t)},wu.prototype.f=function(){return 4},g(mu,Qa),mu.prototype.apply=function(t){for(var e=t.b.firstChild;e;){switch(e.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(0<e.length)return}e=e.nextSibling}this.b.apply(t)},mu.prototype.f=function(){return 4},g(yu,Qa),yu.prototype.apply=function(t){!1===t.b.disabled&&this.b.apply(t)},yu.prototype.f=function(){return 5},g(xu,Qa),xu.prototype.apply=function(t){!0===t.b.disabled&&this.b.apply(t)},xu.prototype.f=function(){return 5},g(Eu,Qa),Eu.prototype.apply=function(t){var e=t.b;!0!==e.selected&&!0!==e.checked||this.b.apply(t)},Eu.prototype.f=function(){return 5},g(Su,Qa),Su.prototype.apply=function(t){if(t.ca[this.ia])try{t.fb.push(this.ia),this.b.apply(t)}finally{t.fb.pop()}},Su.prototype.f=function(){return 5},g(ku,Ka),ku.prototype.apply=function(){this.b=!0},ku.prototype.clone=function(){var t=new ku;return t.b=this.b,t},g(Cu,Qa),Cu.prototype.apply=function(t){this.j.apply(t),this.h.b||this.b.apply(t),this.h.b=!1},Cu.prototype.f=function(){return this.j.f()},g(Iu,Au),Iu.prototype.g=function(t){return new Iu(this.ia,this.b,qu(t,this.b))},Iu.prototype.push=function(t,e){return e||Tu(this,t),!1},Iu.prototype.f=function(t,e){return!e&&(Nu(this,t),!0)},g(_u,Au),_u.prototype.g=function(t){return new _u(this.ia,this.b,qu(t,this.b))},_u.prototype.push=function(t,e){return e?1==e&&Nu(this,t):Tu(this,t),!1},_u.prototype.f=function(t,e){return e?(1==e&&Tu(this,t),!1):(Nu(this,t),!0)},g(Lu,Au),Lu.prototype.g=function(t){return new Lu(this.ia,this.b,qu(t,this.b))},Lu.prototype.push=function(t){return!!this.h&&(Nu(this,t),!0)},Lu.prototype.f=function(t,e){return this.h?(Nu(this,t),!0):(e||(this.h=!0,Tu(this,t)),!1)},g(ju,Au),ju.prototype.g=function(t){return new ju(this.ia,this.b,qu(t,this.b))},ju.prototype.push=function(t,e){return this.h&&(-1==e?Tu(this,t):e||Nu(this,t)),!1},ju.prototype.f=function(t,e){if(this.h){if(-1==e)return Nu(this,t),!0;e||Tu(this,t)}else e||(this.h=!0,Tu(this,t));return!1},Ou.prototype.g=function(){return this},Ou.prototype.push=function(){return!1},Ou.prototype.f=function(t,e){return!e&&(os(t,this.b,this.element),!0)},Ru.prototype.g=function(){return this},Ru.prototype.push=function(){return!1},Ru.prototype.f=function(t,e){return!e&&(t.lang=this.lang,!0)},Fu.prototype.g=function(){return this},Fu.prototype.push=function(){return!1},Fu.prototype.f=function(t,e){return!e&&(t.J=this.b,!0)},g(Pu,Se),Pu.prototype.Xb=function(t){if("attr"!==t.name)return Se.prototype.Xb.call(this,t);var e,n="string";return t.values[0]instanceof Me?(2<=t.values[0].values.length&&(n=t.values[0].values[1].stringValue()),e=t.values[0].values[0].stringValue()):e=t.values[0].stringValue(),t=1<t.values.length?Du(t.values[1].stringValue(),n):Du(null,n),this.element&&this.element.hasAttribute(e)?Du(this.element.getAttribute(e),n):t},g(Mu,Se),Mu.prototype.rc=function(t){var e=this.f,n=e.J,i=Math.floor(n.length/2)-1;switch(t.name){case"open-quote":t=n[2*Math.min(i,e.D)],e.D++;break;case"close-quote":return 0<e.D&&e.D--,n[2*Math.min(i,e.D)+1];case"no-open-quote":return e.D++,new Ie("");case"no-close-quote":return 0<e.D&&e.D--,new Ie("")}return t};var Bu={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"Ö",8e3,"Ö",7e3,"Ö",6e3,"Ö",5e3,"Ö",4e3,"Õ¿",3e3,"Õ¾",2e3,"Õ½",1e3,"Õ¼",900,"Õ»",800,"Õº",700,"Õ¹",600,"Õ¸",500,"Õ·",400,"Õ¶",300,"Õµ",200,"Õ´",100,"Õ³",90,"Õ²",80,"Õ±",70,"Õ°",60,"Õ¯",50,"Õ®",40,"Õ­",30,"Õ¬",20,"Õ«",10,"Õª",9,"Õ©",8,"Õ¨",7,"Õ§",6,"Õ¦",5,"Õ¥",4,"Õ¤",3,"Õ£",2,"Õ¢",1,"Õ¡"],georgian:[19999,1e4,"áµ",9e3,"á°",8e3,"á¯",7e3,"á´",6e3,"á®",5e3,"á­",4e3,"á¬",3e3,"á«",2e3,"áª",1e3,"á©",900,"á¨",800,"á§",700,"á¦",600,"á¥",500,"á¤",400,"á³",300,"á¢",200,"á¡",100,"á ",90,"á",80,"á",70,"á",60,"á²",50,"á",40,"á",30,"á",20,"á",10,"á",9,"á",8,"á±",7,"á",6,"á",5,"á",4,"á",3,"á",2,"á",1,"á"],hebrew:[999,400,"×ª",300,"×©",200,"×¨",100,"×§",90,"×¦",80,"×¤",70,"×¢",60,"×¡",50,"× ",40,"×",30,"×",20,"×",19,"××",18,"××",17,"××",16,"××",15,"××",10,"×",9,"×",8,"×",7,"×",6,"×",5,"×",4,"×",3,"×",2,"×",1,"×"]},Uu={latin:"a-z",alpha:"a-z",greek:"Î±-ÏÏ-Ï",russian:"Ð°-Ð¸Ðº-ÑÑ-Ñ"},zu={square:"â ",disc:"â¢",circle:"â¦",none:""},Vu={ph:!1,fd:"é¶ä¸äºä¸åäºå­ä¸å«ä¹",Vd:"åç¾å",Fg:"è² "};function Xu(t,e){var n=e[0].toString(),i=1<e.length?e[1].stringValue():"decimal",r=t.f.g[n];return r&&r.length?new Ie(t.format(r&&r.length&&r[r.length-1]||0,i)):new Me([n=new ze(function(t,e,n){var i=new le(t.f,function(){var i=t.b.b[e];return n(i&&i.length?i[i.length-1]:null)},"page-counter-"+e);return Qc(t.b,e,function(t){return n(t[0])},i),i}(t.b,n,function(e){return t.format(e||0,i)}))])}function Hu(t,e){var n=e[0].toString(),i=e[1].stringValue(),r=2<e.length?e[2].stringValue():"decimal",o=t.f.g[n],a=new z;if(o&&o.length)for(var u=0;u<o.length;u++)0<u&&a.append(i),a.append(t.format(o[u],r));return new Me([n=new ze(function(t,e,n){var i=new le(t.f,function(){return n(t.b.b[e]||[])},"page-counters-"+e);return Qc(t.b,e,n,i),i}(t.b,n,function(e){var n=[];if(e.length)for(var o=0;o<e.length;o++)n.push(t.format(e[o],r));return(e=a.toString()).length&&n.push(e),n.length?n.join(i):t.format(0,r)}))])}function Gu(t,e){var n=(n=e[0])instanceof Pe?n.url:n.stringValue(),i=e[1].toString(),r=2<e.length?e[2].stringValue():"decimal";return new Me([n=new ze(function(t,e,n,i){var r=Wc(e),o=$c(t,e),a=Kc(t,r,o,!1);return a&&a[n]?(e=a[n],new pe(t.j,i(e[e.length-1]||null))):new le(t.f,function(){if(a=Kc(t,r,o,!0)){if(a[n]){var e=a[n];return i(e[e.length-1]||null)}return(e=t.b.j.g[o]?t.b.b:t.b.B[o]||null)?(Zc(t.b,o),e[n]?(e=e[n],i(e[e.length-1]||null)):i(0)):(qc(t.b,o,!1),"??")}return qc(t.b,o,!1),"??"},"target-counter-"+n+"-of-"+e)}(t.b,n,i,function(e){return t.format(e||0,r)}))])}function Yu(t,e){var n=(n=e[0])instanceof Pe?n.url:n.stringValue(),i=e[1].toString(),r=e[2].stringValue(),o=3<e.length?e[3].stringValue():"decimal";return new Me([n=new ze(function(t,e,n,i){var r=Wc(e),o=$c(t,e);return new le(t.f,function(){var e=t.b.j.g[o]?t.b.b:t.b.B[o]||null;if(e){Zc(t.b,o);var e=e[n]||[],a=Kc(t,r,o,!0)[n]||[];return i(e.concat(a))}return qc(t.b,o,!1),"??"},"target-counters-"+n+"-of-"+e)}(t.b,n,i,function(e){return(e=e.map(function(e){return t.format(e,o)})).length?e.join(r):t.format(0,o)}))])}Mu.prototype.format=function(t,e){var n,i=!1,r=!1;if((n=e.match(/^upper-(.*)/))?(i=!0,e=n[1]):(n=e.match(/^lower-(.*)/))&&(r=!0,e=n[1]),n="",Bu[e])t:{var o=t;if(o>(n=Bu[e])[0]||0>=o||o!=Math.round(o))n="";else{for(var a="",u=1;u<n.length;u+=2){var s=n[u],h=Math.floor(o/s);if(20<h){n="";break t}for(o-=h*s;0<h;)a+=n[u+1],h--}n=a}}else if(Uu[e])if(0>=(n=t)||n!=Math.round(n))n="";else{for(a=Uu[e],o=[],u=0;u<a.length;)if("-"==a.substr(u+1,1))for(h=a.charCodeAt(u),s=a.charCodeAt(u+2),u+=3;h<=s;h++)o.push(String.fromCharCode(h));else o.push(a.substr(u++,1));a="";do{a=o[u=--n%o.length]+a,n=(n-u)/o.length}while(0<n);n=a}else null!=zu[e]?n=zu[e]:"decimal-leading-zero"==e?1==(n=""+t).length&&(n="0"+n):n="cjk-ideographic"==e||"trad-chinese-informal"==e?function(t){if(9999<t||-9999>t)return""+t;if(!t)return Vu.fd.charAt(0);var e=new z;if(0>t&&(e.append(Vu.Fg),t=-t),10>t)e.append(Vu.fd.charAt(t));else{var n=Math.floor(t/1e3);n&&(e.append(Vu.fd.charAt(n)),e.append(Vu.Vd.charAt(2))),(n=Math.floor(t/100)%10)&&(e.append(Vu.fd.charAt(n)),e.append(Vu.Vd.charAt(1))),(n=Math.floor(t/10)%10)&&(e.append(Vu.fd.charAt(n)),e.append(Vu.Vd.charAt(0))),(t%=10)&&e.append(Vu.fd.charAt(t))}return e.toString()}(t):""+t;return i?n.toUpperCase():r?n.toLowerCase():n},Mu.prototype.Xb=function(t){switch(t.name){case"counter":if(2>=t.values.length)return Xu(this,t.values);break;case"counters":if(3>=t.values.length)return Hu(this,t.values);break;case"target-counter":if(3>=t.values.length)return Gu(this,t.values);break;case"target-counters":if(4>=t.values.length)return Yu(this,t.values)}return C.b("E_CSS_CONTENT_PROP:",t.toString()),new Ie("")};var Wu=1/1048576;function $u(t,e){for(var n in t)e[n]=t[n].clone()}function Ku(){this.j=0,this.b={},this.Ad={},this.h={},this.f={},this.Pa={},this.g={},this.od={},this.order=0}function Ju(t,e,n){var i=t[e];i&&(n=i.l(n)),t[e]=n}function Zu(t,e,n,i){this.u=t,this.l=e,this.Zb=n,this.xb=i,this.h=[[],[]],this.ca={},this.G=this.F=this.ua=this.b=null,this.Ba=this.la=this.Y=this.j=this.f="",this.Z=this.N=null,this.ta=this.ob=!0,this.g={},this.I=[{}],this.J=[new Ie("â"),new Ie("â"),new Ie("â"),new Ie("â")],this.D=0,this.lang="",this.Mb=[0],this.Za=0,this.sa=[{}],this.Cb=this.sa[0],this.S=null,this.Lb=[this.S],this.Jb=[{}],this.yb=this.sa[0],this.B={},this.fb=[],this.Kb=[]}function qu(t,e){var n=null;e&&(n=function(t,e){var n=e.split("_");if("NFS"==n[0])return new rw(t,parseInt(n[1],10),parseInt(n[2],10));return m("unknown view condition. condition="+e),null}(t.ua,e));var i=t.fb.map(function(e){return(e=t.B[e])&&0<e.length?1===e.length?e[0]:new ow([].concat(e)):null}).filter(function(t){return t});return 0>=i.length?n:n?new aw([n].concat(i)):1===i.length?i[0]:new aw(i)}function Qu(t,e,n){(e=e[n])&&e.apply(t)}Ku.prototype.clone=function(){var t=new Ku;for(var e in t.j=this.j,this.b)t.b[e]=this.b[e];return $u(this.Ad,t.Ad),$u(this.h,t.h),$u(this.f,t.f),$u(this.Pa,t.Pa),$u(this.g,t.g),$u(this.od,t.od),t.order=this.order,t},Ku.prototype.nf=function(){return this.order+=Wu};var ts=[];function es(t,e,n,i){t.b=null,t.ua=null,t.F=i,t.j="",t.f="",t.Y="",t.la="",t.G=e,t.Ba="",t.N=ts,t.Z=n,hs(t)}function ns(t,e,n){t.g[e]?t.g[e].push(n):t.g[e]=[n],(n=t.I[t.I.length-1])||(n={},t.I[t.I.length-1]=n),n[e]=!0}function is(t,e){var n=dn,i=e.display;i&&(n=i.evaluate(t.l));var r=null,o=i=null,a=e["counter-reset"];if(a&&(a=a.evaluate(t.l))&&(r=Po(a,!0)),(a=e["counter-set"])&&(a=a.evaluate(t.l))&&(o=Po(a,!1)),(a=e["counter-increment"])&&(a=a.evaluate(t.l))&&(i=Po(a,!1)),"ol"!=t.f&&"ul"!=t.f||"http://www.w3.org/1999/xhtml"!=t.j||(r||(r={}),r["ua-list-item"]=0),n===En&&(i||(i={}),i["ua-list-item"]=1),r)for(var u in r)ns(t,u,r[u]);if(o)for(var s in o)t.g[s]?(u=t.g[s])[u.length-1]=o[s]:ns(t,s,o[s]);if(i)for(var h in i)t.g[h]||ns(t,h,0),(u=t.g[h])[u.length-1]+=i[h];n===En&&(n=t.g["ua-list-item"],e["ua-list-item-count"]=new Pa(new Oe(n[n.length-1]),0)),t.I.push(null)}function rs(t){var e=t.I.pop();if(e)for(var n in e)(e=t.g[n])&&(1==e.length?delete t.g[n]:e.pop())}function os(t,e,n){is(t,e),e.content&&(e.content=e.content.Pd(new Mu(t,n,t.xb))),rs(t)}var as="before transclusion-before footnote-call footnote-marker inner first-letter first-line  transclusion-after after".split(" ");function us(t,e,n,i){t.Kb.push(e),t.Z=null,t.b=e,t.ua=i,t.F=n,t.j=e.namespaceURI,t.f=e.localName,i=t.u.b[t.j],t.Ba=i?i+t.f:"",t.Y=e.getAttribute("id"),t.la=e.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"),(i=e.getAttribute("class"))?t.G=i.split(/\s+/):t.G=ts,(i=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))?t.N=i.split(/\s+/):t.N=ts,"style"==t.f&&"http://www.gribuser.ru/xml/fictionbook/2.0"==t.j&&(t.G=[e.getAttribute("name")||""]),(i=U(e))&&(t.h[t.h.length-1].push(new Ru(t.lang)),t.lang=i.toLowerCase()),i=t.ta;var r=t.Mb;t.Za=++r[r.length-1],r.push(0);r=t.sa;var o=t.Cb=r[r.length-1],a=o[t.j];if(a||(a=o[t.j]={}),a[t.f]=(a[t.f]||0)+1,r.push({}),null!==(r=t.Lb)[r.length-1]?t.S=--r[r.length-1]:t.S=null,r.push(null),r=t.Jb,(o=t.yb=r[r.length-1])&&o[t.j]&&o[t.j][t.f]--,r.push({}),hs(t),function(t,e){var n,i=new Pu(e),r=t.F,o=r._pseudos;for(n in o)ss(i,o[n]);ss(i,r)}(t,e),r=n.quotes,n=null,r&&(r=r.evaluate(t.l))&&(n=new Fu(t.J),r===kn?t.J=[new Ie(""),new Ie("")]:r instanceof Me&&(t.J=r.values)),is(t,t.F),r=t.Y||t.la||e.getAttribute("name")||"",i||r){var u={};Object.keys(t.g).forEach(function(t){u[t]=Array.from(this.g[t])},t),function(t,e,n){e=t.b.J.Re(e,t.f),t.b.l[e]=n}(t.Zb,r,u)}if(i=t.F._pseudos)for(r=!0,a=(o=l(as)).next();!a.done;a=o.next())(a=a.value)||(r=!1),(a=i[a])&&(r?os(t,a,e):t.h[t.h.length-2].push(new Ou(a,e)));n&&t.h[t.h.length-2].push(n)}function ss(t,e){for(var n in e)Ua(n)&&(e[n]=e[n].Pd(t))}function hs(t){var e;for(e=0;e<t.G.length;e++)Qu(t,t.u.Pa,t.G[e]);for(e=0;e<t.N.length;e++)Qu(t,t.u.f,t.N[e]);Qu(t,t.u.g,t.Y),Qu(t,t.u.Ad,t.f),""!=t.f&&Qu(t,t.u.Ad,"*"),Qu(t,t.u.h,t.Ba),null!==t.Z&&(Qu(t,t.u.od,t.Z),Qu(t,t.u.od,"*")),t.b=null,t.h.push([]);for(var n=1;-1<=n;--n){var i=t.h[t.h.length-n-2];for(e=0;e<i.length;)i[e].push(t,n)?i.splice(e,1):e++}t.ob=!0,t.ta=!1}function ls(t){for(var e=1;-1<=e;--e)for(var n=t.h[t.h.length-e-2],i=0;i<n.length;)n[i].f(t,e)?n.splice(i,1):i++;t.h.pop(),t.ob=!1}var fs=null;function cs(t,e,n,i,r,o,a){Tr.call(this,t,e,a),this.b=null,this.ba=0,this.h=this.mb=null,this.D=!1,this.ia=n,this.l=i?i.l:fs?fs.clone():new Ku,this.G=r,this.B=o,this.u=0,this.j=null}function ps(t,e){var n=Ga(t.b,e);n!==e&&n.g(t.l)||t.Uf(n)}g(cs,Nr),cs.prototype.Uf=function(t){Ju(this.l.Ad,"*",t)},cs.prototype.Wb=function(t,e){(e||t)&&(this.ba+=1,e&&t?this.b.push(new iu(t,e.toLowerCase())):e?this.b.push(new nu(e.toLowerCase())):this.b.push(new ou(t)))},cs.prototype.oe=function(t){this.h?(C.b("::"+this.h,"followed by ."+t),this.b.push(new Su(""))):(this.ba+=256,this.b.push(new tu(t)))};var bs={"nth-child":du,"nth-of-type":gu,"nth-last-child":vu,"nth-last-of-type":wu};cs.prototype.qd=function(t,e){if(this.h)C.b("::"+this.h,"followed by :"+t),this.b.push(new Su(""));else{switch(t.toLowerCase()){case"enabled":this.b.push(new yu);break;case"disabled":this.b.push(new xu);break;case"checked":this.b.push(new Eu);break;case"root":this.b.push(new cu);break;case"link":this.b.push(new nu("a")),this.b.push(new au("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(e&&1==e.length&&"string"==typeof e[0]){var n=new RegExp("(^|s)"+W(e[0])+"($|s)");this.b.push(new ru(n))}else this.b.push(new Su(""));break;case"-adapt-footnote-content":case"footnote-content":this.D=!0;break;case"visited":case"active":case"hover":case"focus":this.b.push(new Su(""));break;case"lang":e&&1==e.length&&"string"==typeof e[0]?this.b.push(new lu(new RegExp("^"+W(e[0].toLowerCase())+"($|-)"))):this.b.push(new Su(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":n=bs[t.toLowerCase()],e&&2==e.length?this.b.push(new n(e[0],e[1])):this.b.push(new Su(""));break;case"first-child":this.b.push(new fu);break;case"last-child":this.b.push(new vu(0,1));break;case"first-of-type":this.b.push(new gu(0,1));break;case"last-of-type":this.b.push(new wu(0,1));break;case"only-child":this.b.push(new fu),this.b.push(new vu(0,1));break;case"only-of-type":this.b.push(new gu(0,1)),this.b.push(new wu(0,1));break;case"empty":this.b.push(new mu);break;case"before":case"after":case"first-line":case"first-letter":return void this.rd(t,e);default:C.b("unknown pseudo-class selector: "+t),this.b.push(new Su(""))}this.ba+=256}},cs.prototype.rd=function(t,e){switch(t){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":this.h?(C.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new Su(""))):this.h=t;break;case"first-n-lines":if(e&&1==e.length&&"number"==typeof e[0]){var n=Math.round(e[0]);if(0<n&&n==e[0]){this.h?(C.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new Su(""))):this.h="first-"+n+"-lines";break}}case"nth-fragment":e&&2==e.length?this.j="NFS_"+e[0]+"_"+e[1]:this.b.push(new Su(""));break;default:C.b("Unrecognized pseudoelement: ::"+t),this.b.push(new Su(""))}this.ba+=1},cs.prototype.ze=function(t){this.ba+=65536,this.b.push(new eu(t))},cs.prototype.Hd=function(t,e,n,i){var r;switch(this.ba+=256,e=e.toLowerCase(),i=i||"",n){case 0:r=new au(t,e);break;case 39:r=new uu(t,e,i);break;case 45:r=!i||i.match(/\s/)?new Su(""):new hu(t,e,new RegExp("(^|\\s)"+W(i)+"($|\\s)"));break;case 44:r=new hu(t,e,new RegExp("^"+W(i)+"($|-)"));break;case 43:r=i?new hu(t,e,new RegExp("^"+W(i))):new Su("");break;case 42:r=i?new hu(t,e,new RegExp(W(i)+"$")):new Su("");break;case 46:r=i?new hu(t,e,new RegExp(W(i))):new Su("");break;case 50:"supported"==i?r=new su(t,e):(C.b("Unsupported :: attr selector op:",i),r=new Su(""));break;default:C.b("Unsupported attr selector:",n),r=new Su("")}this.b.push(r)};var ds=0;function gs(t){if(t.b){var e=t.ba+t.l.nf();ps(t,t.Xf(e)),t.b=null,t.h=null,t.j=null,t.D=!1,t.ba=0}}function vs(t){cs.call(this,t.f,t.oa,t.ia,t,t.G,t.B,!1),this.parent=t,this.g=t.b}function ws(t,e){Tr.call(this,t,e,!1)}function ms(t,e,n,i,r){Tr.call(this,t,e,!1),this.mb=i,this.ia=n,this.b=r}function ys(t,e){Qr.call(this,t),this.mb={},this.b=e,this.order=0}function xs(t,e,n){return(t=t["writing-mode"])&&(e=t.evaluate(e,"writing-mode"))&&e!==bn?e===Hn:n}function Es(t,e,n){return(t=t.direction)&&(e=t.evaluate(e,"direction"))&&e!==bn?e===Fn:n}function Ss(t,e,n,i){var r,o={};for(r in t)Ua(r)&&(o[r]=t[r]);return uw(o,e,t),ks(t,n,i,function(t,n){Cs(o,n,e),uw(o,e,n)}),o}function ks(t,e,n,i){if(t=t._regions,(e||n)&&t)for(n&&(n=["footnote"],e=e?e.concat(n):n),n=(e=l(e)).next();!n.done;n=e.next()){var r=t[n=n.value];r&&i(n,r)}}function Cs(t,e,n){for(var i in e)Ua(i)&&(t[i]=Ma(n,t[i],e[i]))}function As(t,e,n,i,r){for(var o in n=n?i?Ra:ja:i?Fa:Oa,t)if(t.hasOwnProperty(o)&&(i=t[o])){var a=n[o];if(a){var u=t[a];if(u&&u.cb>i.cb)continue;a=Ta[a]?a:o}else a=o;e[a]=r(o,i)}}(n=cs.prototype).cc=function(){var t="d"+ds++;ps(this,new Ja(new Iu(t,this.j,null))),this.b=[new Su(t)],this.j=null},n.ne=function(){var t="c"+ds++;ps(this,new Ja(new _u(t,this.j,null))),this.b=[new Su(t)],this.j=null},n.me=function(){var t="a"+ds++;ps(this,new Ja(new Lu(t,this.j,null))),this.b=[new Su(t)],this.j=null},n.te=function(){var t="f"+ds++;ps(this,new Ja(new ju(t,this.j,null))),this.b=[new Su(t)],this.j=null},n.Sc=function(){gs(this),this.h=null,this.D=!1,this.ba=0,this.b=[]},n.Tb=function(){var t;0!=this.u?(_r(this,"E_CSS_UNEXPECTED_SELECTOR"),t=!0):t=!1,t||(this.u=1,this.mb={},this.h=null,this.ba=0,this.D=!1,this.b=[])},n.error=function(t,e){Nr.prototype.error.call(this,t,e),1==this.u&&(this.u=0)},n.Wc=function(t){Nr.prototype.Wc.call(this,t),this.u=0},n.La=function(){gs(this),Nr.prototype.La.call(this),1==this.u&&(this.u=0)},n.dc=function(){Nr.prototype.dc.call(this)},n.Xf=function(t){var e=this.G;return this.D&&(e=e?"xxx-bogus-xxx":"footnote"),new qa(this.mb,t,this.h,e,this.j)},n.Qb=function(t,e,n){ma(this.B,t,e,n,this)},n.kd=function(t,e){Ir(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},n.fe=function(t,e){Ir(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},n.Sb=function(t,e,n){"display"!=t||e!==Tn&&e!==An||(this.Sb("flow-options",new Me([an,Rn]),n),this.Sb("flow-into",e,n),e=Ke),ni("SIMPLE_PROPERTY").forEach(function(i){i=i({name:t,value:e,important:n}),t=i.name,e=i.value,n=i.important});var i=n?Sr(this):kr(this);za(this.mb,t,this.ia?new Da(e,i,this.ia):new Pa(e,i))},n.xd=function(t){switch(t){case"not":(t=new vs(this)).Tb(),Ar(this.oa,t)}},g(vs,cs),(n=vs.prototype).xd=function(t){"not"==t&&_r(this,"E_CSS_UNEXPECTED_NOT")},n.La=function(){_r(this,"E_CSS_UNEXPECTED_RULE_BODY")},n.Sc=function(){_r(this,"E_CSS_UNEXPECTED_NEXT_SELECTOR")},n.Nd=function(){this.b&&0<this.b.length&&this.g.push(new Cu(this.b)),this.parent.ba+=this.ba;var t=this.oa;t.b=t.g.pop()},n.error=function(t,e){cs.prototype.error.call(this,t,e);var n=this.oa;n.b=n.g.pop()},g(ws,Nr),ws.prototype.Qb=function(t,e){if(this.f.values[t])this.error("E_CSS_NAME_REDEFINED "+t,this.jd());else{var n=t.match(/height|^(top|bottom)$/)?"vh":"vw";n=new ue(this.f,100,n),n=e.Aa(this.f,n);this.f.values[t]=n}},g(ms,Nr),ms.prototype.Qb=function(t,e,n){n?C.b("E_IMPORTANT_NOT_ALLOWED"):ma(this.b,t,e,n,this)},ms.prototype.kd=function(t,e){C.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},ms.prototype.fe=function(t,e){C.b("E_INVALID_PROPERTY",t+":",e.toString())},ms.prototype.Sb=function(t,e,n){n=n?Sr(this):kr(this),n+=this.order,this.order+=Wu,za(this.mb,t,this.ia?new Da(e,n,this.ia):new Pa(e,n))},g(ys,Qr),ys.prototype.Qb=function(t,e,n){ma(this.b,t,e,n,this)},ys.prototype.kd=function(t,e){C.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},ys.prototype.fe=function(t,e){C.b("E_INVALID_PROPERTY",t+":",e.toString())},ys.prototype.Sb=function(t,e,n){n=(n?67108864:50331648)+this.order,this.order+=Wu,za(this.mb,t,new Pa(e,n))};var Ts=!1,Ns={dh:"ltr",eh:"rtl"};d("vivliostyle.constants.PageProgression",Ns),Ns.LTR="ltr",Ns.RTL="rtl";var Is={pg:"left",qg:"right"};d("vivliostyle.constants.PageSide",Is),Is.LEFT="left",Is.RIGHT="right";var _s={LOADING:"loading",bh:"interactive",Zg:"complete"};function Ls(t,e,n){if(this.u=t,this.url=e,this.b=n,this.lang=null,this.h=-1,this.root=n.documentElement,e=t=null,"http://www.w3.org/1999/xhtml"==this.root.namespaceURI){for(var i=this.root.firstChild;i;i=i.nextSibling)if(1==i.nodeType&&"http://www.w3.org/1999/xhtml"==(n=i).namespaceURI)switch(n.localName){case"head":e=n;break;case"body":t=n}this.lang=this.root.getAttribute("lang")}else if("http://www.gribuser.ru/xml/fictionbook/2.0"==this.root.namespaceURI){for(e=this.root,i=this.root.firstChild;i;i=i.nextSibling)1==i.nodeType&&("http://www.gribuser.ru/xml/fictionbook/2.0"==(n=i).namespaceURI&&"body"==n.localName&&(t=n));0<(n=Ws(Ws(Ws(Ws(new Xs([this.b]),"FictionBook"),"description"),"title-info"),"lang").textContent()).length&&(this.lang=n[0])}else if("http://example.com/sse"==this.root.namespaceURI)for(n=this.root.firstElementChild;n;n=n.nextElementSibling)"meta"===(i=n.localName)?e=n:"body"===i&&(t=n);this.body=t,this.l=e,this.g=this.root,this.j=1,this.g.setAttribute("data-adapt-eloff","0")}function js(t,e){if(n=e.getAttribute("data-adapt-eloff"))return parseInt(n,10);for(var n=t.j,i=t.g;i!=e;){var r=i.firstChild;if(!r)for(;!(r=i.nextSibling);)if(!(i=i.parentNode))throw Error("Internal error");i=r,1==r.nodeType?(r.setAttribute("data-adapt-eloff",n.toString()),++n):n+=r.textContent.length}return t.j=n,t.g=e,n-1}function Os(t,e,n,i){var r=0;if(1==e.nodeType){if(!i)return js(t,e)}else{if(r=n,!(n=e.previousSibling))return r+=1,js(t,e=e.parentNode)+r;e=n}for(;;){for(;e.lastChild;)e=e.lastChild;if(1==e.nodeType)break;if(r+=e.textContent.length,!(n=e.previousSibling)){e=e.parentNode;break}e=n}return r+=1,js(t,e)+r}function Rs(t){return 0>t.h&&(t.h=Os(t,t.root,0,!0)),t.h}function Fs(t,e){for(var n,i=t.root,r={};;){if((n=js(t,i))>=e)return i;if(r.children=i.children,!r.children)break;if(!(o=K(r.children.length,function(n){return function(i){return js(t,n.children[i])>e}}(r))))break;if(o<r.children.length&&js(t,r.children[o])<=e)throw Error("Consistency check failed!");i=r.children[o-1],r={children:r.children}}n+=1;for(var o=(r=i).firstChild||r.nextSibling,a=null;;){if(o){if(1==o.nodeType)break;if(a=r=o,(n+=o.textContent.length)>e)break}else if(!(r=r.parentNode))break;o=r.nextSibling}return a||i}function Ps(t,e){if(!(n=e.match(/([^#]*)\#(.+)$/))||n[1]&&n[1]!=t.url)return null;var n=n[2],i=t.b.getElementById(n);return!i&&t.b.getElementsByName&&(i=t.b.getElementsByName(n)[0]),i||(t.f||(t.f={},function t(e,n){var i=n.getAttribute("id");for(i&&!e.f[i]&&(e.f[i]=n),(i=n.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&!e.f[i]&&(e.f[i]=n),i=n.firstElementChild;i;i=i.nextElementSibling)t(e,i)}(t,t.b.documentElement)),i=t.f[n]),i}d("vivliostyle.constants.ReadyState",_s),_s.LOADING="loading",_s.INTERACTIVE="interactive",_s.COMPLETE="complete";var Ds={hh:"text/html",ih:"text/xml",Ug:"application/xml",Tg:"application/xhtml_xml",ah:"image/svg+xml"};function Ms(t,e,n){var i;n=n||new DOMParser;try{i=n.parseFromString(t,e)}catch(t){}if(!i)return null;if("parsererror"===(t=i.documentElement).localName)return null;for(t=t.firstChild;t;t=t.nextSibling)if("parsererror"===t.localName)return null;return i}function Bs(t,e){var n=t.responseXML;if(!n){var i=new DOMParser,r=t.responseText;if(r){var o=function(t){var e=t.contentType;if(e){for(var n=Object.keys(Ds),i=0;i<n.length;i++)if(Ds[n[i]]===e)return e;if(e.match(/\+xml$/))return"application/xml"}if(t=t.url.match(/\.([^.\/]+)$/))switch(t[1]){case"html":case"htm":return"text/html";case"xhtml":case"xht":return"application/xhtml_xml";case"svg":case"svgz":return"image/svg+xml";case"opf":case"xml":return"application/xml"}return null}(t);(n=Ms(r,o||"application/xml",i))&&!o&&("html"!==(o=n.documentElement).localName.toLowerCase()||o.namespaceURI?"svg"===o.localName.toLowerCase()&&"image/svg+xml"!==n.contentType&&(n=Ms(r,"image/svg+xml",i)):n=Ms(r,"text/html",i)),n||(n=Ms(r,"text/html",i))}}return ai(n=n?new Ls(e,t.url,n):null)}function Us(t){this.Pc=t}function zs(){var t=function(){var t=Vs;return new Us(function(e){return t.Pc(e)&&1==e.nodeType&&"http://www.idpf.org/2008/embedding"==e.getAttribute("Algorithm")})}(),e=Vs;return new Us(function(n){return!!e.Pc(n)&&(n=Ws(n=new Xs([n]),"EncryptionMethod"),t&&(n=Hs(n,t)),0<n.size())})}var Vs=new Us(function(){return!0});function Xs(t){this.X=t}function Hs(t,e){for(var n=[],i=l(t.X),r=i.next();!r.done;r=i.next())r=r.value,e.Pc(r)&&n.push(r);return new Xs(n)}function Gs(t,e){function n(t){i.push(t)}for(var i=[],r=0;r<t.X.length;r++)e(t.X[r],n);return new Xs(i)}function Ys(t,e){for(var n=[],i=0;i<t.X.length;i++){var r=e(t.X[i]);null!=r&&n.push(r)}return n}function Ws(t,e){return Gs(t,function(t,n){for(var i=t.firstChild;i;i=i.nextSibling)i.localName==e&&n(i)})}function $s(t,e){return Ys(t,function(t){return 1==t.nodeType?t.getAttribute(e):null})}Xs.prototype.size=function(){return this.X.length},Xs.prototype.forEach=function(t){for(var e=[],n=0;n<this.X.length;n++)e.push(t(this.X[n]));return e},Xs.prototype.textContent=function(){return this.forEach(function(t){return t.textContent})};var Ks={transform:!0,"transform-origin":!0},Js={top:!0,bottom:!0,left:!0,right:!0};function Zs(t,e,n){this.target=t,this.name=e,this.value=n}var qs={show:function(t){t.style.visibility="visible"},hide:function(t){t.style.visibility="hidden"},play:function(t){t.currentTime=0,t.play()},pause:function(t){t.pause()},resume:function(t){t.play()},mute:function(t){t.muted=!0},unmute:function(t){t.muted=!1}};function Qs(t,e){var n=qs[e];return n?function(){for(var e=0;e<t.length;e++)try{n(t[e])}catch(t){}}:null}function th(t,e){this.Pb={},this.H=t,this.h=e,this.G=null,this.l=[];var n=this;this.J=function(t){var e=t.currentTarget,i=e.getAttribute("href")||e.getAttributeNS("http://www.w3.org/1999/xlink","href");i&&nt(n,{type:"hyperlink",target:null,currentTarget:null,mh:e,href:i,preventDefault:function(){t.preventDefault()}})},this.g={},this.f={width:0,height:0},this.B=this.u=!1,this.D=this.F=!0,this.P=0,this.position=null,this.offset=-1,this.b=null,this.j=[],this.I={top:{},bottom:{},left:{},right:{}}}function eh(t,e,n){var i=t.g[n];i?i.push(e):t.g[n]=[e]}function nh(t){switch(t){case"normal":case"nowrap":return 0;case"pre-line":return 1;case"pre":case"pre-wrap":return 2;default:return null}}function ih(t,e){if(1==t.nodeType)return!1;var n=t.textContent;switch(e){case 0:return!!n.match(/^\s*$/);case 1:return!!n.match(/^[ \t\f]*$/);case 2:return!n.length}throw Error("Unexpected whitespace: "+e)}function rh(t){this.f=t,this.b=[],this.C=null}function oh(t,e,n,i,r,o,a,u,s){this.b=t,this.element=e,this.f=n,this.cb=i,this.l=r,this.h=o,this.u=a,this.j=u,this.wb=-1,this.g=s}function ah(t,e){return!!t.h&&(!e.h||t.cb>e.cb||t.j)}function uh(t,e){return t.top-e.top}function sh(t,e){return e.right-t.right}function hh(t,e){return t===e||!(!t||!e)&&(t.node===e.node&&t.kb===e.kb&&dh(t.wa,e.wa)&&dh(t.Ja,e.Ja)&&hh(t.Fa,e.Fa))}function lh(t,e){if(t===e)return!0;if(!t||!e||t.na!==e.na||t.K!==e.K||t.pa.length!==e.pa.length)return!1;for(var n=0;n<t.pa.length;n++)if(!hh(t.pa[n],e.pa[n]))return!1;return!0}function fh(t){return{pa:[{node:t.M,kb:ph,wa:t.wa,Ja:null,Fa:null,Sa:0}],na:0,K:!1,Qa:t.Qa}}function ch(t,e){var n=new vh(t.node,e,0);return n.kb=t.kb,n.wa=t.wa,n.Ja=t.Ja,n.Fa=t.Fa?ch(t.Fa,yh(e)):null,n.C=t.C,n.Sa=t.Sa+1,n}g(th,et),th.prototype.zoom=function(t){M(this.H,"transform","scale("+t+")")};var ph=0;function bh(t,e,n,i,r,o,a){this.oa=t,this.pd=i,this.vf=null,this.root=e,this.da=n,this.type=o,r&&(r.vf=this),this.b=a}function dh(t,e){return t===e||!!t&&!!e&&!!e&&t.oa===e.oa&&t.da===e.da&&t.type===e.type&&dh(t.pd,e.pd)}function gh(t,e){this.Ig=t,this.count=e}function vh(t,e,n){this.M=t,this.parent=e,this.Ma=n,this.na=0,this.K=!1,this.kb=ph,this.wa=e?e.wa:null,this.Fa=this.Ja=null,this.Ba=!1,this.ya=!0,this.xa=!1,this.j=e?e.j:0,this.display=null,this.W=$l,this.ca=this.N=this.l=this.Ca=null,this.Z="baseline",this.la="top",this.ta=this.sa=0,this.I=!1,this.uc=e?e.uc:0,this.F=e?e.F:null,this.B=!!e&&e.B,this.S=this.hd=!1,this.D=this.A=this.G=this.g=null,this.h=e?e.h:{},this.b=!!e&&e.b,this.direction=e?e.direction:"ltr",this.f=e?e.f:null,this.Qa=this.lang=null,this.C=e?e.C:null,this.u=null,this.ua={},this.Sa=1,this.Y=this.J=null}function wh(t){t.ya=!0,t.j=t.parent?t.parent.j:0,t.A=null,t.D=null,t.na=0,t.K=!1,t.display=null,t.W=$l,t.Ca=null,t.l=null,t.N=null,t.ca=null,t.Z="baseline",t.I=!1,t.uc=t.parent?t.parent.uc:0,t.F=t.parent?t.parent.F:null,t.B=!!t.parent&&t.parent.B,t.g=null,t.G=null,t.Ja=null,t.hd=!1,t.S=!1,t.b=!!t.parent&&t.parent.b,t.Ja=null,t.Qa=null,t.C=t.parent?t.parent.C:null,t.u=null,t.ua={},t.Sa=1,t.J=null,t.Y=null}function mh(t){var e=new vh(t.M,t.parent,t.Ma);return e.na=t.na,e.K=t.K,e.Ja=t.Ja,e.kb=t.kb,e.wa=t.wa,e.Fa=t.Fa,e.ya=t.ya,e.j=t.j,e.display=t.display,e.W=t.W,e.Ca=t.Ca,e.l=t.l,e.N=t.N,e.ca=t.ca,e.Z=t.Z,e.la=t.la,e.sa=t.sa,e.ta=t.ta,e.hd=t.hd,e.S=t.S,e.I=t.I,e.uc=t.uc,e.F=t.F,e.B=t.B,e.g=t.g,e.G=t.G,e.A=t.A,e.D=t.D,e.f=t.f,e.b=t.b,e.xa=t.xa,e.Qa=t.Qa,e.C=t.C,e.u=t.u,e.ua=Object.create(t.ua),e.Sa=t.Sa,e.J=t.J,e.Y=t.Y,e}function yh(t){var e=t;do{if(e.Ba)break;e.Ba=!0,e=e.parent}while(e);return t}function xh(t){return{node:t.M,kb:t.kb,wa:t.wa,Ja:t.Ja,Fa:t.Fa?xh(t.Fa):null,C:t.C,Sa:t.Sa}}function Eh(t){var e=t,n=[];do{e.f&&e.parent&&e.parent.f!==e.f||n.push(xh(e)),e=e.parent}while(e);return{pa:n,na:e=t.Qa?wv(t.Qa,t.na,-1):t.na,K:t.K,Qa:t.Qa}}function Sh(t,e){for(var n=t;n;)n.ya||e(n),n=n.parent}function kh(t,e){return t.C===e&&!!t.parent&&t.parent.C===e}function Ch(t){this.f=t,this.b=null}function Ah(t,e){if(!e)return!1;if(t===e)return!0;if(!lh(t.f,e.f))return!1;if(t.b){if(!e.b||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++)if(!lh(t.b[n],e.b[n]))return!1}else if(e.b)return!1;return!0}function Th(t,e){this.b=t,this.qa=e}function Nh(){this.b=[],this.g="any",this.f=null}function Ih(t,e){if(t===e)return!0;if(!e||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++){var i=t.b[n],r=e.b[n];if(!r||i!==r&&!Ah(i.b,r.b))return!1}return!0}function _h(){this.page=0,this.f={},this.b={},this.g=0}function Lh(t,e){if(t===e)return!0;if(!e||t.page!==e.page||t.g!==e.g)return!1;var n=Object.keys(t.b),i=Object.keys(e.b);if(n.length!==i.length)return!1;for(i=(n=l(n)).next();!i.done;i=n.next())if(i=i.value,!Ih(t.b[i],e.b[i]))return!1;return!0}function jh(t){this.element=t,this.G=this.F=this.height=this.width=this.S=this.J=this.Y=this.I=this.Ba=this.ca=this.Za=this.Z=this.marginBottom=this.marginTop=this.marginRight=this.marginLeft=this.top=this.left=0,this.Lb=this.ob=null,this.yb=this.Od=this.Mb=this.Rd=this.h=0,this.b=!1}function Oh(t){return t.marginTop+t.ca+t.J}function Rh(t){return t.marginBottom+t.Ba+t.S}function Fh(t){return t.marginLeft+t.Z+t.I}function Ph(t){return t.marginRight+t.Za+t.Y}function Dh(t){return t.b?-1:1}function Mh(t,e,n){t.top=e,t.height=n,M(t.element,"top",e+"px"),M(t.element,"height",n+"px")}function Bh(t,e,n){t.left=e,t.width=n,M(t.element,"left",e+"px"),M(t.element,"width",n+"px")}function Uh(t,e,n){t.b?Bh(t,e+n*Dh(t),n):Mh(t,e,n)}function zh(t,e,n){t.b?Mh(t,e,n):Bh(t,e,n)}function Vh(t){t=t.element;for(var e;e=t.lastChild;)t.removeChild(e)}function Xh(t){var e=t.F+t.left+t.marginLeft+t.Z,n=t.G+t.top+t.marginTop+t.ca;return new ao(e,n,e+(t.I+t.width+t.Y),n+(t.J+t.height+t.S))}function Hh(t,e,n){return Ro(e,(t=Gh(t)).V,t.T,t.U-t.V,t.R-t.T,n)}function Gh(t){var e=t.F+t.left,n=t.G+t.top;return new ao(e,n,e+(Fh(t)+t.width+Ph(t)),n+(Oh(t)+t.height+Rh(t)))}function Yh(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function Wh(t){return!!t&&t!==Cn&&t!==kn&&t!==bn}function $h(t,e,n){this.g=t,this.f=e,this.b=n}function Kh(){this.map=[]}function Jh(t){return t.map.length?t.map[t.map.length-1].b:0}function Zh(t,e){if(t.map.length){var n=t.map[t.map.length-1],i=n.b+e-n.f;n.f==n.g?(n.f=e,n.g=e,n.b=i):t.map.push(new $h(e,e,i))}else t.map.push(new $h(e,e,e))}function qh(t,e){t.map.length?t.map[t.map.length-1].f=e:t.map.push(new $h(e,0,0))}function Qh(t,e){var n=K(t.map.length,function(n){return e<=t.map[n].f});return(n=t.map[n]).b-Math.max(0,n.g-e)}function tl(t,e){var n=K(t.map.length,function(n){return e<=t.map[n].b});return(n=t.map[n]).g-(n.b-e)}function el(t,e,n,i,r,o,a,u){this.B=t,this.style=e,this.offset=n,this.D=i,this.qa=r,this.b=r.b,this.ib=o,this.pb=a,this.F=u,this.j=this.l=null,this.u={},this.g=this.f=this.h=null,ol(this)&&(e=e._pseudos)&&e.before&&(Wh(n=nl(t=new el(t,e.before,n,!1,r,rl(this),a,!0),"content"))&&(this.h=t,this.g=t.g)),this.g=Ol(al(this,"before"),this.g),this.pb&&Ll[this.g]&&(r.g=Ol(r.g,this.g))}function nl(t,e,n){if(!(e in t.u)){var i=t.style[e];t.u[e]=i?i.evaluate(t.B,e):n||null}return t.u[e]}function il(t){return nl(t,"display",dn)}function rl(t){if(null===t.l){var e=il(t),n=nl(t,"position"),i=nl(t,"float");t.l=$p(e,n,i,t.D).display===Ke}return t.l}function ol(t){return null===t.j&&(t.j=t.F&&il(t)!==kn),t.j}function al(t,e){var n=null;if(rl(t)){var i=nl(t,"break-"+e);i&&(n=i.toString())}return n}function ul(t){this.g=t,this.b=[],this.pb=this.ib=!0,this.f=[]}function sl(t){return t.b[t.b.length-1]}function hl(t,e){if(!e.ib)return e.offset;var n=t.b.length-1,i=t.b[n];for(i===e&&(n--,i=t.b[n]);0<=n;){if(i.b!==e.b)return e.offset;if(!i.ib||i.D)return i.offset;e=i,i=t.b[--n]}throw Error("No block start offset found!")}function ll(t,e,n,i,r,o,a,u){switch(this.da=t,this.root=t.root,this.fb=n,this.h=i,this.B=o,this.f=this.root,this.F={},this.Y={},this.G={},this.J=[],this.D=this.S=this.N=null,this.Ba=a,this.Z=new Zu(e,i,a,u),this.g=new Kh,this.u=!0,this.la=[],this.Za=r,this.ua=this.ta=!1,this.b=t=js(t,this.root),this.ca={},this.j=new ul(i),Zh(this.g,t),i=dl(this,this.root),us(this.Z,this.root,i,t),bl(this,i,!1),this.I=!0,this.root.namespaceURI){case"http://www.w3.org/1999/xhtml":case"http://www.gribuser.ru/xml/fictionbook/2.0":this.I=!1}this.la.push(!0),this.Y={},this.Y["e"+t]=i,this.b++,gl(this,-1)}function fl(t,e,n,i){return(e=e[i])&&e.evaluate(t.h)!==n[i]}function cl(t,e,n){for(var i in n){var r=e[i];r?(t.F[i]=r,delete e[i]):(r=n[i])&&(t.F[i]=new Pa(r,33554432))}}vh.prototype.modify=function(){return this.Ba?mh(this):this},vh.prototype.clone=function(){for(var t,e=mh(this),n=e;t=n.parent;)t=mh(t),n=n.parent=t;return e},Ch.prototype.clone=function(){var t=new Ch(this.f);if(this.b){t.b=[];for(var e=0;e<this.b.length;++e)t.b[e]=this.b[e]}return t},Th.prototype.clone=function(){return new Th(this.b.clone(),this.qa)},Nh.prototype.clone=function(){for(var t=new Nh,e=this.b,n=t.b,i=0;i<e.length;i++)n[i]=e[i].clone();return t.g=this.g,t.f=this.f,t},_h.prototype.clone=function(){var t=new _h;for(var e in t.page=this.page,t.h=this.h,t.g=this.g,t.j=this.j,t.f=this.f,this.b)t.b[e]=this.b[e].clone();return t},g(Yh,Ee),Yh.prototype.Bd=function(t){return this.b.appendChild(this.b.ownerDocument.createTextNode(t.Xc)),null},Yh.prototype.bd=function(t){if(this.h.url)this.b.setAttribute("src",t.url);else{var e=this.b.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","img");e.setAttribute("src",t.url),this.b.appendChild(e)}return null},Yh.prototype.Ub=function(t){return this.sc(t.values),null},Yh.prototype.Yc=function(t){var e=t.Aa();return"string"==typeof(t=e.evaluate(this.f))&&(e instanceof se&&(t=io(e.b,new fr(t,null)).stringValue()),(e=this.g(e,t,this.b.ownerDocument))||(e=this.b.ownerDocument.createTextNode(t)),this.b.appendChild(e)),null},ul.prototype.push=function(t,e,n,i){var r=sl(this);i&&r&&i.b!==r.b&&this.f.push({ib:this.ib,pb:this.pb}),r=i||r.qa,i=this.pb||!!i;var o=function(t){return t.b.every(function(t){return il(t)!==kn})}(this);return t=new el(this.g,t,e,n,r,i||this.ib,i,o),this.b.push(t),this.ib=ol(t)?!t.h&&rl(t):this.ib,this.pb=ol(t)?!t.h&&i:this.pb,t};var pl=["column-count","column-width","column-fill"];function bl(t,e,n){if(["writing-mode","direction"].forEach(function(i){!e[i]||n&&t.F[i]||(t.F[i]=e[i])}),!t.ta){var i=fl(t,e,t.B.j,"background-color")?e["background-color"].evaluate(t.h):null,r=fl(t,e,t.B.j,"background-image")?e["background-image"].evaluate(t.h):null;(i&&i!==bn||r&&r!==bn)&&(cl(t,e,t.B.j),t.ta=!0)}if(!t.ua)for(i=0;i<pl.length;i++)if(fl(t,e,t.B.u,pl[i])){cl(t,e,t.B.u),t.ua=!0;break}if(!n&&(i=e["font-size"])){switch(r=i.evaluate(t.h),i=r.L,r.ka){case"em":case"rem":i*=t.h.u;break;case"ex":i*=t.h.u*It.ex/It.em;break;case"%":i*=t.h.u/100;break;default:(r=It[r.ka])&&(i*=r)}t.h.Za=i}}function dl(t,e){if(e.style instanceof CSSStyleDeclaration&&(r=e.getAttribute("style"))){var n=t.da.url,i=new ys(t.fb,t.B),r=new fr(r,i);try{qr(new Hr(jr,r,i,n),Number.POSITIVE_INFINITY,!1,!0,!1,!1)}catch(t){C.b(t,"Style attribute parse error:")}return i.mb}return{}}function gl(t,e){if(!(e>=t.b)){var n=t.h,i=js(t.da,t.root);if(e<i){var r=t.l(t.root,!1),o=vl(t,o=(o=r["flow-into"])?o.evaluate(n,"flow-into").toString():"body",r,t.root,i);!t.j.b.length&&t.j.push(r,i,!0,o)}if(i=Fs(t.da,e),!((r=Os(t.da,i,0,!1))>=t.b))for(;;){if(1!=i.nodeType)r+=i.textContent.length;else{var a=i;if(r!=js(t.da,a))throw Error("Inconsistent offset");var u=t.l(a,!1);(o=u["flow-into"])&&vl(t,o=o.evaluate(n,"flow-into").toString(),u,a,r),r++}if(r>=t.b)break;if(!(o=i.firstChild))for(;!(o=i.nextSibling);)if((i=i.parentNode)===t.root)return;i=o}}}function vl(t,e,n,i,r){var o=0,a=Number.POSITIVE_INFINITY,u=!1,s=!1,h=!1,l=n["flow-options"];if(l){var f;t:{if(u=l.evaluate(t.h,"flow-options")){s=new _o;try{u.fa(s),f=s.b;break t}catch(t){C.b(t,"toSet:")}}f={}}u=!!(h=f).exclusive,s=!!h.static,h=!!h.last}return(f=n["flow-linger"])&&(a=jo(f.evaluate(t.h,"flow-linger"),Number.POSITIVE_INFINITY)),(n=n["flow-priority"])&&(o=jo(n.evaluate(t.h,"flow-priority"),0)),n=t.ca[r]||null,(f=t.G[e])||(f=sl(t.j),f=t.G[e]=new rh(f?f.qa.b:null)),i=new oh(e,i,r,o,a,u,s,h,n),t.J.push(i),t.S==e&&(t.S=null),t.N&&Gd(t.N,i,f),i}function wl(t,e,n,i){Ll[e]&&((!(i=t.G[i].b).length||i[i.length-1]<n)&&i.push(n)),t.ca[n]=Ol(t.ca[n],e)}function ml(t,e,n){var i=-1;if(e<=t.b&&(i=Qh(t.g,e),(i+=n)<Jh(t.g)))return tl(t.g,i);if(!t.f)return Number.POSITIVE_INFINITY;for(var r=t.h;;){if(!(o=t.f.firstChild))for(;;){if(1==t.f.nodeType){var o=t.Z,a=t.f;if(o.Kb.pop()!==a)throw Error("Invalid call to popElement");o.Mb.pop(),o.sa.pop(),o.Lb.pop(),o.Jb.pop(),ls(o),rs(o),t.u=t.la.pop();o=t.j;var u=t.b,s=a=o.b.pop(),h=o.ib,l=o.pb;if(ol(s)){var f=s.style._pseudos;f&&f.after&&(Wh(h=nl(u=new el(s.B,f.after,u,!1,s.qa,h,l,!0),"content"))&&(s.f=u))}o.pb&&a.f&&(s=al(a.f,"before"),a.qa.g=Ol(a.qa.g,s)),(s=sl(o))&&(s.b===a.b?ol(a)&&(o.ib=o.pb=!1):(s=o.f.pop(),o.ib=s.ib,o.pb=s.pb)),o=null,a.f&&(wl(t,o=al(a.f,"before"),a.f.ib?hl(t.j,a):a.f.offset,a.b),o=al(a.f,"after")),wl(t,o=Ol(o,al(a,"after")),t.b,a.b)}if(o=t.f.nextSibling)break;if(t.f=t.f.parentNode,t.f===t.root)return t.f=null,e<t.b&&(0>i&&(i=Qh(t.g,e),i+=n),i<=Jh(t.g))?tl(t.g,i):Number.POSITIVE_INFINITY}if(t.f=o,1!=t.f.nodeType)t.b+=t.f.textContent.length,o=t.j,a=t.f,s=sl(o),(o.ib||o.pb)&&ol(s)&&(ih(a,nh(s=nl(s,"white-space",Cn).toString()))||(o.ib=!1,o.pb=!1)),t.u?Zh(t.g,t.b):qh(t.g,t.b);else{if(o=dl(t,a=t.f),t.la.push(t.u),us(t.Z,a,o,t.b),(s=a.getAttribute("id")||a.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&s===t.D&&(t.D=null),t.I||"body"!=a.localName||a.parentNode!=t.root||(bl(t,o,!0),t.I=!0),(s=o["flow-into"])?(u=vl(t,s=s.evaluate(r,"flow-into").toString(),o,a,t.b),t.u=!!t.Za[s],a=t.j.push(o,t.b,a===t.root,u)):a=t.j.push(o,t.b,a===t.root),s=hl(t.j,a),wl(t,a.g,s,a.b),a.h&&wl(t,u=al(a.h,"after"),a.h.ib?s:a.offset,a.b),t.u&&il(a)===kn&&(t.u=!1),js(t.da,t.f)!=t.b)throw Error("Inconsistent offset");if(t.Y["e"+t.b]=o,t.b++,t.u?Zh(t.g,t.b):qh(t.g,t.b),e<t.b&&(0>i&&(i=Qh(t.g,e),i+=n),i<=Jh(t.g)))return tl(t.g,i)}}}ll.prototype.l=function(t,e){var n=js(this.da,t),i="e"+n;return e&&(n=Os(this.da,t,0,!0)),this.b<=n&&ml(this,n,0),this.Y[i]},ll.prototype.sa=function(){};var yl={"font-style":Cn,"font-variant":Cn,"font-weight":Cn},xl="OTTO"+(new Date).valueOf(),El=1;function Sl(t,e){var n,i={};for(n in t)i[n]=t[n].evaluate(e,n);for(var r in yl)i[r]||(i[r]=yl[r]);return i}function kl(t){t=this.Ec=t;var e,n=new z;for(e in yl)n.append(" "),n.append(t[e].toString());this.f=n.toString(),this.src=this.Ec.src?this.Ec.src.toString():null,this.g=[],this.h=[],this.b=(e=this.Ec["font-family"])?e.stringValue():null}function Cl(t,e,n){var i=new z;for(var r in i.append("@font-face {\n  font-family: "),i.append(t.b),i.append(";\n  "),yl)i.append(r),i.append(": "),t.Ec[r].$a(i,!0),i.append(";\n  ");return n?(i.append('src: url("'),e=(window.URL||window.webkitURL).createObjectURL(n),i.append(e),t.g.push(e),t.h.push(n),i.append('")')):(i.append("src: "),i.append(e)),i.append(";\n}\n"),i.toString()}function Al(t){this.f=t,this.b={}}function Tl(t,e){if(e instanceof Be){for(var n=[],i=l(e.values),r=i.next();!r.done;r=i.next()){r=r.value;var o=t.b[r.stringValue()];o&&n.push(Le(o)),n.push(r)}return new Be(n)}return(n=t.b[e.stringValue()])?new Be([Le(n),e]):e}function Nl(t,e){this.b=t,this.body=e,this.f={},this.g=0}function Il(t,e,n,i){var r,o=oi("initFont"),a=e.src,u={};for(r in yl)u[r]=e.Ec[r];i=function(t,e,n){e=e.b;var i=n.b[e];return i||(i="Fnt_"+ ++t.g,n.b[e]=i)}(t,e,i),u["font-family"]=Le(i);var s=new kl(u),h=t.body.ownerDocument.createElement("span");h.textContent="M";var l=(new Date).valueOf()+1e3;for(var f in e=t.b.ownerDocument.createElement("style"),r=xl+El++,e.textContent=Cl(s,"",wr([r])),t.b.appendChild(e),t.body.appendChild(h),h.style.visibility="hidden",h.style.fontFamily=i,yl)M(h,f,u[f].toString());var c=(u=h.getBoundingClientRect()).right-u.left,p=u.bottom-u.top;e.textContent=Cl(s,a,n),C.g("Starting to load font:",a);var b=!1;return ki(function(){var t=h.getBoundingClientRect(),e=t.bottom-t.top;return c!=t.right-t.left||p!=e?(b=!0,ai(!1)):(new Date).valueOf()>l?ai(!1):Si(10)}).then(function(){b?C.g("Loaded font:",a):C.b("Failed to load font:",a),t.body.removeChild(h),xi(o,s)}),o.result()}function _l(t,e,n){var i=e.src,r=t.f[i];return r?function(t,e){t.f?e(t.h):t.g.push(e)}(r,function(t){if(t.f==e.f){var r=e.b,o=n.b[r];if(t=t.b,o){if(o!=t)throw Error("E_FONT_FAMILY_INCONSISTENT "+e.b)}else n.b[r]=t;C.b("Found already-loaded font:",i)}else C.b("E_FONT_FACE_INCOMPATIBLE",e.src)}):(r=new _i(function(){var r=oi("loadFont"),o=n.f?n.f(i):null;return o?vr(i,"blob").then(function(i){i.vd?o(i.vd).then(function(i){Il(t,e,i,n).Ga(r)}):xi(r,null)}):Il(t,e,null,n).Ga(r),r.result()},"loadFont "+i),t.f[i]=r,r.start()),r}ei("SIMPLE_PROPERTY",function(t){var e=t.name,n=t.value;switch(e){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:e.replace(/^page-/,""),value:n===Ge?Nn:n,important:t.important};default:return t}});var Ll={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0},jl={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function Ol(t,e){if(!t)return e;if(!e)return t;var n=!!Ll[t],i=!!Ll[e];if(!n||!i)return i?e:n?t:jl[e]?e:jl[t]?t:e;switch(e){case"column":return t;case"region":return"column"===t?e:t;default:return e}}function Rl(t){switch(t){case"left":case"right":case"recto":case"verso":return t;default:return"any"}}function Fl(){}function Pl(t,e){this.b=t,this.f=e}function Dl(t,e){var n=t.b,i=n.Tf(e),r=oi("LayoutIterator");return Ci(function(e){for(var r;i.w;){if((r=((r=i.w.A?1!==i.w.A.nodeType?ih(i.w.A,i.w.uc)?void 0:i.w.K?n.Df(i):n.uf(i):i.w.ya?i.w.K?n.Cf(i):n.kg(i):i.w.K?n.tc(i):n.Cd(i):void 0)&&r.Xa()?r:ai(!0)).ea(function(){return i.Vb?ai(null):yb(t.f,i.w,i.Gd)})).Xa())return void r.then(function(t){i.Vb?Ii(e):(i.w=t,Ni(e))});if(i.Vb)return void Ii(e);i.w=r.get()}Ii(e)}).then(function(){xi(r,i.w)}),r.result()}function Ml(t){this.gc=t}function Bl(t,e,n){this.tf=[],this.za=Object.create(t),this.za.element=e,this.za.j=t.j.clone(),this.za.u=!1,this.za.kf=n.C,this.za.Md=t,t=mc(this.za,n),this.za.la-=t;var i=this;this.za.Lc=function(t){return Gf.prototype.Lc.call(this,t).ea(function(t){return i.tf.push(yh(t)),ai(t)})}}function Ul(t,e){return Oc(t.za,e,!0)}function zl(){this.u=this.h=null}function Vl(t,e,n){return t.eg(e,n),function t(e,n,i){var r=oi("vivliostyle.layoututil.AbstractLayoutRetryer.tryLayout");e.yf(n,i);var o=e.qf(n);o.b(n,i).then(function(e){var a=o.f(e,i);(a=o.g(e,this.f,i,a))?xi(r,e):(this.Jd(this.f),this.ie(n,i),t(this,this.f,i).Ga(r))}.bind(e));return r.result()}(t,e,n)}function Xl(t,e,n,i){if(!(i=i[e]))throw Error("unknown writing-mode: "+e);if(!(e=i[n||"ltr"]))throw Error("unknown direction: "+n);for(e=(n=l(e)).next();!e.done;e=n.next())if(e=e.value,(e=t.replace(e.h,e.b))!==t)return e;return t}function Hl(t){var e=Gl,n={};return Object.keys(e).forEach(function(i){var r=n[i]={},o=e[i];Object.keys(o).forEach(function(e){r[e]=o[e].map(function(e){return{h:new RegExp("(-?)"+(t?e.ga:e.ha)+"(-?)"),b:"$1"+(t?e.ha:e.ga)+"$2"}})})}),n}(n=Fl.prototype).Tf=function(t){return{w:t,Gd:!1,Vb:!1}},n.uf=function(){},n.Df=function(){},n.kg=function(){},n.Cf=function(){},n.Cd=function(){},n.tc=function(){},g(Ml,Fl),(n=Ml.prototype).lg=function(){},n.Nf=function(){},n.Tf=function(t){return{w:t,Gd:!!this.gc&&t.K,Vb:!1,gc:this.gc,dd:null,Je:!1,Wf:[],ld:null}},n.uf=function(t){t.Je=!1},n.Cd=function(t){return t.Wf.push(yh(t.w)),t.dd=Ol(t.dd,t.w.g),t.Je=!0,this.lg(t)},n.tc=function(t){var e;return t.Je?(e=void 0,e=(e=ai(!0)).ea(function(){return t.Vb||(t.Wf=[],t.gc=!1,t.Gd=!1,t.dd=null),ai(!0)})):e=(e=this.Nf(t))&&e.Xa()?e:ai(!0),e.ea(function(){return t.Vb||(t.Je=!1,t.ld=yh(t.w),t.dd=Ol(t.dd,t.w.G)),ai(!0)})},Bl.prototype.ec=function(t){var e=this.za.ec();if(t){var n=new Vf(t=yh(this.tf[0]),null,t.xa,0);if(n.f(this.za,0),!e.w)return{Eb:n,w:t}}return e},Bl.prototype.Na=function(t,e,n){return this.za.Na(t,e,n)},zl.prototype.eg=function(){},zl.prototype.Jd=function(t){t=t.A||t.parent.A;for(var e;e=t.lastChild;)t.removeChild(e);for(;e=t.nextSibling;)e.parentNode.removeChild(e)},zl.prototype.yf=function(t,e){this.f=yh(t),this.h=[].concat(e.N),this.D=[].concat(e.B),t.C&&(this.u=t.C.Ye())},zl.prototype.ie=function(t,e){e.N=this.h,e.B=this.D,t.C&&t.C.Xe(this.u)};var Gl={"horizontal-tb":{ltr:[{ga:"inline-start",ha:"left"},{ga:"inline-end",ha:"right"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}],rtl:[{ga:"inline-start",ha:"right"},{ga:"inline-end",ha:"left"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}]},"vertical-rl":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]},"vertical-lr":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]}},Yl=Hl(!0),Wl=Hl(!1),$l="inline";function Kl(t){switch(t){case $l:return!1;case"column":case"region":case"page":return!0;default:throw Error("Unknown float-reference: "+t)}}function Jl(t,e,n,i,r,o){this.b=t,this.W=e,this.Ca=n,this.h=i,this.f=r,this.j=o,this.id=this.order=null}function Zl(t){if(!t.id)throw Error("The page float is not yet added");return t.id}function ql(){this.b=[],this.f=0}function Ql(t,e,n,i,r){this.W=t,this.Ca=e,this.Ob=n,this.b=i,this.g=r}function tf(t,e){return t.Ob.some(function(t){return t.ja===e})}function ef(t,e){this.ja=t,this.b=e}function nf(t,e,n,i,r,o,a){(this.parent=t)&&t.children.push(this),this.children=[],this.W=e,this.H=n,this.h=i,this.I=r,this.F=o||t&&t.F||pn,this.direction=a||t&&t.direction||Sn,this.Qc=!1,this.u=t?t.u:new ql,this.B=[],this.b=[],this.j=[],this.l={},this.f=[];t:{for(e=this,t=this.parent;t;){if(e=of(t,e,this.W,this.h,this.I)){t=e;break t}e=t,t=t.parent}t=null}this.G=t?[].concat(t.f):[],this.D=[],this.g=!1}function rf(t,e){if(!t.parent)throw Error("No PageFloatLayoutContext for "+e);return t.parent}function of(t,e,n,i,r){for(0>(e=t.children.indexOf(e))&&(e=t.children.length),--e;0<=e;e--){var o=t.children[e];if(o.W===n&&o.h===i&&lh(o.I,r)||(o=of(o,null,n,i,r)))return o}return null}function af(t,e){return e&&e!==t.W?af(rf(t,e),e):t.H}function uf(t,e){t.H=e,_f(t)}function sf(t,e){return e===t.W?t:sf(rf(t,e),e)}function hf(t,e){var n=Zl(e),i=e.W;i===t.W?t.B.includes(n)||(t.B.push(n),Of(e).og(e,t)):hf(rf(t,i),e)}function lf(t,e){var n=Zl(e),i=e.W;return i===t.W?t.B.includes(n):lf(rf(t,i),e)}function ff(t,e,n){var i=e.W;i!==t.W?ff(rf(t,i),e,n):t.b.includes(e)||(t.b.push(e),t.b.sort(function(t,e){return t.Ia()-e.Ia()})),n||kf(t)}function cf(t,e,n){var i=e.W;i!==t.W?cf(rf(t,i),e,n):0<=(e=t.b.indexOf(e))&&((e=(e=t.b.splice(e,1)[0]).b&&e.b.element)&&e.parentNode&&e.parentNode.removeChild(e),n||kf(t))}function pf(t,e){if(e.W!==t.W)return pf(rf(t,e.W),e);var n=t.b.findIndex(function(t){return tf(t,e)});return 0<=n?t.b[n]:null}function bf(t,e){return!(!(0<t.b.length)||e&&!t.b.some(e))||!!t.parent&&bf(t.parent,e)}function df(t,e,n){t.l[Zl(e)]=n}function gf(t,e){if(mf(t).some(function(t){return Zl(t.ja)===e}))return!0;var n=function t(e){var n=Object.assign({},e.l);return e.children.reduce(function(e,n){return Object.assign(e,t(n))},n)}(t)[e];return!!n&&(!(!t.H||!t.H.element)&&t.H.element.contains(n))}function vf(t,e){var n=e.ja;if(n.W===t.W){var i=t.f.findIndex(function(t){return t.ja===n});0<=i?t.f.splice(i,1,e):t.f.push(e)}else vf(rf(t,n.W),e)}function wf(t,e,n){if(!n&&e.W!==t.W)return wf(rf(t,e.W),e,!1);var i=e.Ia();return!!t.f.some(function(t){return t.ja.Ia()<i&&!e.df(t.ja)})||!!t.parent&&wf(t.parent,e,!0)}function mf(t,e){e=e||t.h;var n=t.G.filter(function(t){return!e||t.ja.f===e});return t.parent&&(n=mf(t.parent,e).concat(n)),n.sort(function(t,e){return t.ja.Ia()-e.ja.Ia()})}function yf(t,e){e=e||t.h;var n=t.f.filter(function(t){return!e||t.ja.f===e});return t.parent?yf(t.parent,e).concat(n):n}function xf(t){if(function(t){var e=function t(e){for(var n=[],i=[],r=e.children.length-1;0<=r;r--){var o=e.children[r];i.includes(o.h)||(i.push(o.h),n=(n=n.concat(o.f.map(function(t){return t.ja}))).concat(t(o)))}return n}(t);(n=t.b.reduce(function(t,e){return t.concat(e.Ob.map(function(t){return t.ja}))},[])).sort(function(t,e){return e.Ia()-t.Ia()});for(var n,i={},r=(n=l(n)).next();!r.done;i={ja:i.ja,order:i.order},r=n.next())if(i.ja=r.value,i.order=i.ja.Ia(),e.some(function(t){return function(e){return!t.ja.df(e)&&t.order>e.Ia()}}(i)))return t.g?kf(t):(hf(t,i.ja),e=pf(t,i.ja),cf(t,e)),!0;return!1}(t))return!0;for(var e=t.b.length-1;0<=e;e--){var n,i=t.b[e];t:{n=t;for(var r=i.Ob.length-1;0<=r;r--){var o=i.Ob[r].ja;if(!gf(n,Zl(o))){n=o;break t}}n=null}if(n){if(t.g)kf(t);else if(cf(t,i),hf(t,n),"block-end"===(i=Af(t,i.Ca))||"inline-end"===i)for(e=0;e<t.b.length;)Af(t,(n=t.b[e]).Ca)===i?cf(t,n):e++;return!0}}return!("region"!==t.W||!t.parent.g)&&xf(t.parent)}function Ef(t){if(!xf(t)){for(var e=t.f.length-1;0<=e;e--)if(!gf(t,Zl(t.f[e].ja))){if(t.g)return void kf(t);t.f.splice(e,1)}t.G.forEach(function(t){0<=this.f.findIndex(function(e){return!!e&&(t===e||t.ja===e.ja&&lh(t.b,e.b))})||this.b.some(function(e){return tf(e,t.ja)})||this.f.push(t)},t)}}function Sf(t,e){return!!t.H&&!!e.H&&t.H.element===e.H.element}function kf(t){t.Qc=!0,t.g||(t.H&&(t.children.forEach(function(t){Sf(this,t)&&t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})},t),Vh(t.H)),t.children.forEach(function(t){t.D.splice(0)}),t.children.splice(0),Object.keys(t.l).forEach(function(t){delete this.l[t]},t))}function Cf(t){return t.Qc||!!t.parent&&Cf(t.parent)}function Af(t,e){return Xl(e,t.F.toString(),t.direction.toString()||null,Wl)}function Tf(t,e,n,i,r){var o=Af(t,e);e=Xl(e,t.F.toString(),t.direction.toString()||null,Yl);t:{var a=Nf(t,n,i,r);switch(o){case"block-start":o=t.H.b?a.right:a.top;break t;case"block-end":o=t.H.b?a.left:a.bottom;break t;case"inline-start":o=t.H.b?a.top:a.left;break t;case"inline-end":o=t.H.b?a.bottom:a.right;break t;default:throw Error("Unknown logical side: "+o)}}if(t.parent&&t.parent.H)switch(t=Tf(t.parent,e,n,i,r),e){case"top":case"left":return Math.max(o,t);case"bottom":case"right":return Math.min(o,t);default:m("Should be unreachable")}return o}function Nf(t,e,n,i){function r(t,i,r){if("%"===t.ka)t=r*t.L/100;else{r=t.L;var o,a=t.ka;t:switch(a.toLowerCase()){case"em":case"ex":case"rem":o=!0;break t;default:o=!1}if(o){for(;i&&1!==i.nodeType;)i=i.parentNode;t=$a(t,i=parseFloat(Lb(n,i)["font-size"]),e.b).L}else t=(i=Ot(e.b,a,!1))?r*i:t}return t}var o=t.H.F,a=t.H.G,u=Xh(t.H),s={top:u.T-a,left:u.V-o,bottom:u.R-a,right:u.U-o,Oc:0,Nc:0},h=t.b;return 0<h.length&&(s=h.reduce(function(e,n){if(i&&!i(n,t))return e;var o=Af(t,n.Ca),a=n.b,s=n.Ob[0].ja.j,h=e.top,l=e.left,f=e.bottom,c=e.right,p=e.Oc,b=e.Nc;switch(o){case"inline-start":a.b?h=Math.max(h,a.top+a.height):l=Math.max(l,a.left+a.width);break;case"block-start":a.b?(s&&a.left<c&&(p=r(s,a.Jb[0],u.U-u.V)),c=Math.min(c,a.left)):(s&&a.top+a.height>h&&(p=r(s,a.Jb[0],u.R-u.T)),h=Math.max(h,a.top+a.height));break;case"inline-end":a.b?f=Math.min(f,a.top):c=Math.min(c,a.left);break;case"block-end":a.b?(s&&a.left+a.width>l&&(b=r(s,a.Jb[0],u.U-u.V)),l=Math.max(l,a.left+a.width)):(s&&a.top<f&&(b=r(s,a.Jb[0],u.R-u.T)),f=Math.min(f,a.top));break;default:throw Error("Unknown logical float side: "+o)}return{top:h,left:l,bottom:f,right:c,Oc:p,Nc:b}},s)),s.left+=o,s.right+=o,s.top+=a,s.bottom+=a,s}function If(t,e,n,i,r,o,a,u){function s(t,n){var i=t(e.Cb,n);return i?(e.b&&(i=new ao(-i.R,i.V,-i.T,i.U)),l=e.b?Math.min(l,i.U):Math.max(l,i.T),f=e.b?Math.max(f,i.V):Math.min(f,i.R),!0):a}if(n!==t.W)return If(rf(t,n),e,n,i,r,o,a,u);var h=Af(t,i);if("snap-block"===h){if(!u["block-start"]&&!u["block-end"])return null}else if(!u[h])return null;var l=Tf(t,"block-start",e.j,e.f),f=Tf(t,"block-end",e.j,e.f);n=Tf(t,"inline-start",e.j,e.f);var c,p=Tf(t,"inline-end",e.j,e.f),b=e.b?e.F:e.G,d=e.b?e.G:e.F;l=e.b?Math.min(l,e.left+Fh(e)+e.width+Ph(e)+b):Math.max(l,e.top+b),f=e.b?Math.max(f,e.left+b):Math.min(f,e.top+Oh(e)+e.height+Rh(e)+b);if(o){if(t=e.b?ko(new ao(f,n,l,p)):new ao(n,l,p,f),("block-start"===h||"snap-block"===h||"inline-start"===h)&&!s(No,t)||("block-end"===h||"snap-block"===h||"inline-end"===h)&&!s(Io,t))return null;if(o=(c=(f-l)*Dh(e))-(e.b?Ph(e):Oh(e))-(e.b?Fh(e):Rh(e)),t=(r=p-n)-(e.b?Oh(e):Fh(e))-(e.b?Rh(e):Ph(e)),!a&&(0>=o||0>=t))return null}else{c=(o=e.h)+(e.b?Ph(e):Oh(e))+(e.b?Fh(e):Rh(e));var g=(f-l)*Dh(e);if("snap-block"===h&&(null===r?h="block-start":(h=Xh(t.H),h=Dh(t.H)*(r-(t.H.b?h.U:h.T))<=Dh(t.H)*((t.H.b?h.V:h.R)-r-c)?"block-start":"block-end"),!u[h])){if(!u["block-end"])return null;h="block-end"}if(!a&&g<c)return null;if(r=(t="inline-start"===h||"inline-end"===h?Fb(e.f,e.element,[Rb])[Rb]:e.ve?function(t){return Math.max.apply(null,t.Jb.map(function(t,e){var n=_b(this.f,t),i=this.fg[e];return this.b?i.top+n.height+i.bottom:i.left+n.width+i.right},t))}(e):e.b?e.height:e.width)+(e.b?Oh(e):Fh(e))+(e.b?Rh(e):Ph(e)),!a&&p-n<r)return null}switch(l-=b,f-=b,n-=d,p-=d,h){case"inline-start":case"block-start":case"snap-block":zh(e,n,t),Uh(e,l,o);break;case"inline-end":case"block-end":zh(e,p-r,t),Uh(e,f-c*Dh(e),o);break;default:throw Error("unknown float direction: "+i)}return h}function _f(t){var e=t.H.element&&t.H.element.parentNode;e&&t.b.forEach(function(t){e.appendChild(t.b.element)})}function Lf(t,e,n,i){function r(t){return function(e){return e.Ca===t&&e.Ia()<a}}if(e.W!==t.W)return Lf(rf(t,e.W),e,n,i);var o={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!i)return o;n=Af(t,n),i="all"===(i=Af(t,i))?["block-start","block-end","inline-start","inline-end"]:"both"===i?["inline-start","inline-end"]:"same"===i?"snap-block"===n?["block-start","block-end"]:[n]:[i];var a=e.Ia();return i.forEach(function(t){switch(t){case"block-start":case"inline-start":o[t]=!function t(e,n){return e.children.some(function(e){return e.b.some(r(n))||t(e,n)})}(this,t);break;case"block-end":case"inline-end":o[t]=!function t(e,n){var i=e.parent;return!!i&&(i.b.some(r(n))||t(i,n))}(this,t);break;default:throw Error("Unexpected side: "+t)}},t),o}Jl.prototype.Ia=function(){if(null===this.order)throw Error("The page float is not yet added");return this.order},Jl.prototype.df=function(){return!1},ql.prototype.nf=function(){return this.f++},ql.prototype.le=function(t){if(0<=this.b.findIndex(function(e){return lh(e.b,t.b)}))throw Error("A page float with the same source node is already registered");var e=t.order=this.nf();t.id="pf"+e,this.b.push(t)},ql.prototype.cf=function(t){var e=this.b.findIndex(function(e){return lh(e.b,t)});return 0<=e?this.b[e]:null},Ql.prototype.Ia=function(){var t=this.Ob.map(function(t){return t.ja});return Math.min.apply(null,t.map(function(t){return t.Ia()}))},Ql.prototype.f=function(t){return this.Ia()<t.Ia()},nf.prototype.le=function(t){this.u.le(t)},nf.prototype.cf=function(t){return this.u.cf(t)};var jf=[];function Of(t){for(var e=jf.length-1;0<=e;e--){var n=jf[e];if(n.Ef(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}function Rf(){}(n=Rf.prototype).Ff=function(t){return Kl(t.W)},n.Ef=function(){return!0},n.Lf=function(t,e,n){var i=t.W,r=t.Ca,o=Eh(t);return function(t,e,n,i){var r=oi("resolveFloatReferenceFromColumnSpan"),o=t.l,a=sf(o,"region");return af(o).width<af(a).width&&"column"===e?n===Ye?Qf(t,yh(i)).then(function(n){var i=n.A;n=Fb(t.f,i,[Ob])[Ob],i=oc(t,i),(n=t.b?n+(i.top+i.bottom):n+(i.left+i.right))>t.width?xi(r,"region"):xi(r,e)}):xi(r,n===He?"region":e):xi(r,e),r.result()}(n,i,t.ca,t).ea(function(n){return n=new Jl(o,i=n,r,t.l,e.h,t.N),e.le(n),ai(n)})},n.Mf=function(t,e,n,i){return new Ql(t[0].ja.W,e,t,n,i)},n.xf=function(t,e){return pf(e,t)},n.Bf=function(){},n.og=function(){},jf.push(new Rf);var Ff={img:!0,svg:!0,audio:!0,video:!0};function Pf(t,e,n,i){var r=t.A;if(!r)return NaN;if(1==r.nodeType){if(t.K||!t.ya)if((o=_b(e,r)).right>=o.left&&o.bottom>=o.top)return t.K?i?o.left:o.bottom:i?o.right:o.top;return NaN}var o=NaN,a=r.ownerDocument.createRange(),u=r.textContent.length;if(!u)return NaN;if(t.K&&(n+=u),n>=u&&(n=u-1),a.setStart(r,n),a.setEnd(r,n+1),t=Ib(e,a),n=i){if(n=document.body,null==it){var s=n.ownerDocument;(a=s.createElement("div")).style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width="100px",a.style.height="100px",a.style.overflow="hidden",a.style.lineHeight="16px",a.style.fontSize="16px",M(a,"writing-mode","vertical-rl"),n.appendChild(a),u=s.createTextNode("a a a a a a a a a a a a a a a a"),a.appendChild(u),(s=s.createRange()).setStart(u,0),s.setEnd(u,1),u=s.getBoundingClientRect(),it=10>u.right-u.left,n.removeChild(a)}n=it}if(n){for((n=r.ownerDocument.createRange()).setStart(r,0),n.setEnd(r,r.textContent.length),e=Ib(e,n),r=[],n=(t=l(t)).next();!n.done;n=t.next()){for(n=n.value,a=0;a<e.length;a++)if(u=e[a],n.top>=u.top&&n.bottom<=u.bottom&&1>Math.abs(n.left-u.left)){r.push({top:n.top,left:u.left,bottom:n.bottom,right:u.right});break}a==e.length&&(C.b("Could not fix character box"),r.push(n))}t=r}for(e=0,t=(r=l(t)).next();!t.done;t=r.next())t=t.value,n=i?t.bottom-t.top:t.right-t.left,t.right>t.left&&t.bottom>t.top&&(isNaN(o)||n>e)&&(o=i?t.left:t.bottom,e=n);return o}function Df(t){for(var e=ni("RESOLVE_LAYOUT_PROCESSOR"),n=0;n<e.length;n++){var i=e[n](t);if(i)return i}throw Error("No processor found for a formatting context: "+t.We())}function Mf(t){this.Kd=t}function Bf(){}function Uf(t,e){return{current:e.reduce(function(e,n){return e+n.b(t)},0),He:e.reduce(function(e,n){return e+n.F(t)},0)}}function zf(t,e){this.h=t,this.Tc=e,this.j=!1,this.l=null}function Vf(t,e,n,i){this.position=t,this.F=e,this.B=this.j=n,this.D=i,this.h=!1,this.xc=0}function Xf(t){for(var e=1;e<t.length;e++){var n=t[e-1],i=t[e];n===i?C.b("validateCheckPoints: duplicate entry"):n.Ma>=i.Ma?C.b("validateCheckPoints: incorrect boxOffset"):n.M==i.M&&(i.K?n.K&&C.b("validateCheckPoints: duplicate after points"):n.K||i.Ma-n.Ma!=i.na-n.na&&C.b("validateCheckPoints: boxOffset inconsistent with offsetInNode"))}}function Hf(t){this.parent=t}function Gf(t,e,n,i,r){jh.call(this,t),this.j=e,this.f=n,this.Zb=i,this.Ng=t.ownerDocument,this.l=r,uf(r,this),this.kf=null,this.$f=this.gg=!1,this.la=this.sa=this.D=this.fb=this.ua=0,this.Cb=this.dg=this.cg=null,this.Ld=!1,this.g=this.N=null,this.Kb=!0,this.ye=this.Fe=this.Ee=0,this.u=!0,this.xb=null,this.B=[],this.ta=this.Md=null,this.jf=NaN}function Yf(t,e){return!(!e.Ca||t.gg&&!e.parent)}function Wf(t,e){return t.b?e<t.la:e>t.la}function $f(t,e){if(t)for(var n;(n=t.lastChild)!=e;)t.removeChild(n)}Mf.prototype.b=function(t){return this.Kd.every(function(e){return e.b(t)})},Bf.prototype.u=function(){},Bf.prototype.g=function(){return null},g(zf,Bf),zf.prototype.f=function(t,e){return e<this.b()?null:(this.j||(this.l=function(t,e,n){for(var i=(h=e.h)[0];i.parent&&i.ya;)i=i.parent;var r;n?r=n=1:(n=Math.max((i.h.widows||2)-0,1),r=Math.max((i.h.orphans||2)-0,1));var i=mc(t,i),o=wc(t,h),a=t.la-i,i=Dh(t),u=yc(t,e),a=a-i*u,s=function(t,e){var n=e.findIndex(function(t){return t.xa});if(0>n)return{xc:NaN,If:null};var i=e[n];return{xc:ic(t,null,e,n,i.Ma),If:i}}(t,h);isNaN(s.xc)&&(s.xc=1/0*i);var h,l=0>=(h=K(o.length,function(e){return e=o[e],t.b?e<a||e<=s.xc:e>a||e>=s.xc}));if(l&&(h=K(o.length,function(e){return t.b?o[e]<a:o[e]>a})),(h=Math.min(o.length-n,h))<r)return null;a=o[h-1],(e=l?s.If:bc(t,e.h,a))&&(n=function(t,e){var n=e;do{n=n.parent}while(n&&n.ya);return n?((n=yh(n).modify()).K=!0,Pf(n,t.f,0,t.b)):NaN}(t,e),!isNaN(n)&&n<a&&(a=n),t.h=i*(a-t.D)+u);return e}(t,this,0<e),this.j=!0),this.l)},zf.prototype.b=function(){return this.Tc},zf.prototype.g=function(){return this.j?this.l:this.h[this.h.length-1]},g(Vf,Bf),Vf.prototype.f=function(t,e){if(!this.h){var n=mc(t,this.position);this.xc=Pf(this.position,t.f,0,t.b)+n,this.h=!0}n=this.xc;var i=Uf(this.g(),ew(t));return this.B=Wf(t,n+(t.b?-1:1)*i.He),this.j=this.position.xa=Wf(t,n+(t.b?-1:1)*i.current),e<this.b()?n=null:(t.h=this.D+yc(t,this),n=this.position),n},Vf.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");var t;if((t=this.g())&&t.parent){var e=jv(t.parent);t=!!e&&(!!(e=e.b)&&(t&&e.g===t.M))}else t=!1;return t=t&&!this.B,(jl[this.F]?1:0)+(this.j&&!t?3:0)+(this.position.parent?this.position.parent.j:0)},Vf.prototype.g=function(){return this.position},Hf.prototype.We=function(){return"Block formatting context (adapt.layout.BlockFormattingContext)"},Hf.prototype.ff=function(t,e){return e},Hf.prototype.Ye=function(){},Hf.prototype.Xe=function(){},g(Gf,jh),Gf.prototype.Lc=function(t){var e=this,n=oi("openAllViews"),i=t.pa;!function(t,e,n){t.N=e,t.f=n}(e.j,e.element,e.$f);var r=i.length-1,o=null;return ki(function(){for(;0<=r;){if(o=ch(i[r],o),r!==i.length-1||o.C||(o.C=e.kf),!r){var n,a=o;if(n=(n=t).Qa?wv(n.Qa,n.na,1):n.na,a.na=n,o.K=t.K,o.Qa=t.Qa,o.K)break}if(a=wb(e.j,o,!r&&!o.na),r--,a.Xa())return a}return ai(!1)}).then(function(){xi(n,o)}),n.result()};var Kf=/^[^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*([A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527][^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*)?/;function Jf(t,e){if(e.f&&e.ya&&!e.K&&!e.f.count&&1!=e.A.nodeType){var n=e.A.textContent.match(Kf);return kb(t.j,e,n[0].length)}return ai(e)}function Zf(t,e,n){var i=!1,r=oi("buildViewToNextBlockEdge");return Ci(function(r){e.A&&!vc(e)&&n.push(yh(e)),Jf(t,e).then(function(o){o!==e&&(vc(e=o)||n.push(yh(e))),qf(t,e).then(function(n){(e=n)?(!i&&t.Zb.b(e)||(i=!0,(e=e.modify()).xa=!0),Yf(t,e)&&!t.b?Tc(t,e).then(function(n){e=n,Cf(t.l)&&(e=null),e?Ni(r):Ii(r)}):e.ya?Ni(r):Ii(r)):Ii(r)})})}).then(function(){xi(r,e)}),r.result()}function qf(t,e,n){return dw(e=yb(t.j,e,n),t)}function Qf(t,e){if(!e.A)return ai(e);var n=[],i=e.M,r=oi("buildDeepElementView");return Ci(function(r){e.A&&e.ya&&!vc(e)?n.push(yh(e)):(0<n.length&&pc(t,e,n),n=[]),Jf(t,e).then(function(o){if(o!==e){for(var a=o;a&&a.M!=i;)a=a.parent;if(!a)return e=o,void Ii(r);vc(o)||n.push(yh(o))}qf(t,o).then(function(n){(e=n)&&e.M!=i?t.Zb.b(e)?Ni(r):((e=e.modify()).xa=!0,t.u?Ii(r):Ni(r)):Ii(r)})})}).then(function(){0<n.length&&pc(t,e,n),xi(r,e)}),r.result()}function tc(t,e,n,i,r){var o=t.Ng.createElement("div");return t.b?(r>=t.height&&(r-=.1),M(o,"height",i+"px"),M(o,"width",r+"px")):(i>=t.width&&(i-=.1),M(o,"width",i+"px"),M(o,"height",r+"px")),M(o,"float",n),M(o,"clear",n),t.element.insertBefore(o,e),o}function ec(t){for(var e=t.element.firstChild;e;){var n=e.nextSibling;if(1==e.nodeType){var i=e.style.cssFloat;if("left"!=i&&"right"!=i)break;t.element.removeChild(e)}e=n}}function nc(t){for(var e=t.element.firstChild,n=t.b?t.b?t.ua:t.D:t.b?t.sa:t.ua,i=t.b?t.b?t.fb:t.sa:t.b?t.D:t.fb,r=l(t.Cb),o=r.next();!o.done;o=r.next()){var a=(o=o.value).R-o.T;o.left=tc(t,e,"left",o.V-n,a),o.right=tc(t,e,"right",i-o.U,a)}}function ic(t,e,n,i,r){var o;if(e&&Fc(e.A))return NaN;if(e&&e.K&&!e.ya&&(o=Pf(e,t.f,0,t.b),!isNaN(o)))return o;for(r-=(e=n[i]).Ma;;){if(o=Pf(e,t.f,r,t.b),!isNaN(o))return o;if(0<r)r--;else{if(0>--i)return t.D;1!=(e=n[i]).A.nodeType&&(r=e.A.textContent.length)}}}function rc(t){return"number"==typeof t?t:(t=t.match(/^(-?[0-9]*(\.[0-9]*)?)px$/))?parseFloat(t[0]):0}function oc(t,e){var n=Lb(t.f,e),i=new so;return n&&(i.left=rc(n.marginLeft),i.top=rc(n.marginTop),i.right=rc(n.marginRight),i.bottom=rc(n.marginBottom)),i}function ac(t,e){var n=Lb(t.f,e),i=new so;return n&&(i.left=rc(n.borderLeftWidth)+rc(n.paddingLeft),i.top=rc(n.borderTopWidth)+rc(n.paddingTop),i.right=rc(n.borderRightWidth)+rc(n.paddingRight),i.bottom=rc(n.borderBottomWidth)+rc(n.paddingBottom)),i}function uc(t,e,n,i,r,o,a,u){var s=t.l,h=(e=(u?u.Ob:[]).concat(e))[0].ja,l=Lf(s,h,n,i),f=function(t,e,n,i,r,o){M(a=t.element.ownerDocument.createElement("div"),"position","absolute");var a,u=sf(t.l,e.W),s=new nf(null,"column",null,t.l.h,e.b,null,null);u=af(u),uf(s,a=new Uc(n,a,t.j.clone(),t.f,t.Zb,s,u)),u=e.W;var h=t.l;e=af(h,u),s=a.element,e.element.parentNode.appendChild(s),a.gg=!0,a.F=e.F,a.G=e.G,a.b=e.b,a.marginLeft=a.marginRight=a.marginTop=a.marginBottom=0,a.Z=a.Za=a.ca=a.Ba=0,a.I=a.Y=a.J=a.S=0,a.ob=(e.ob||[]).concat(),a.Kb=!bf(h),a.Lb=null;var l=Xh(e);return Bh(a,l.V-e.F,l.U-l.V),Mh(a,l.T-e.G,l.R-l.T),r.Bf(a,e,t),_c(a),(t=!!If(h,a,u,n,i,!0,!bf(h),o))?(ec(a),_c(a)):e.element.parentNode.removeChild(s),t?a:null}(t,h,n,a,o,l),c={Pf:f,pf:null,mf:null};if(!f)return ai(c);var p=oi("layoutSinglePageFloatFragment"),b=!1,d=0;return Ci(function(t){d>=e.length?Ii(t):Oc(f,new Ch(e[d].b),!0).then(function(e){c.mf=e,!e||r?(d++,Ni(t)):(b=!0,Ii(t))})}).then(function(){if(!b){var t=If(s,f,h.W,n,a,!1,r,l);t?(t=o.Mf(e,t,f,!!c.mf),ff(s,t,!0),c.pf=t):b=!0}xi(p,c)}),p.result()}function sc(t,e,n,i,r){function o(t,n){n?cf(a,n,!0):t&&t.element.parentNode.removeChild(t.element),function t(e,n){n!==e.W?t(rf(e,n),n):(e.j.forEach(function(t){ff(this,t,!0)},e),e.j.splice(0))}(a,u.W),vf(a,e)}var a=t.l,u=e.ja;!function t(e,n){var i=n.W;if(i!==e.W)t(rf(e,i),n);else if("block-end"===(i=Af(e,n.Ca))||"snap-block"===i||"inline-end"===i)for(var r=0;r<e.b.length;){var o=e.b[r],a=Af(e,o.Ca);(a===i||"snap-block"===i&&"block-end"===a)&&o.f(n)?(e.j.push(o),e.b.splice(r,1)):r++}}(a,u);var s=oi("layoutPageFloatInner");return uc(t,[e],u.Ca,u.h,!bf(a),n,i,r).then(function(e){var n=e.Pf,i=e.pf,h=e.mf;i?function(t,e,n){var i=t.l,r=function t(e,n){return n===e.W?e.j.concat().sort(function(t,e){return e.Ia()-t.Ia()}):t(rf(e,n),n)}(i,e),o=[],a=[],u=!1,s=oi("layoutStashedPageFloats"),h=0;return Ci(function(e){if(h>=r.length)Ii(e);else{var i=r[h];if(n.includes(i))h++,Ni(e);else{var s=Of(i.Ob[0].ja);uc(t,i.Ob,i.Ca,null,!1,s,null).then(function(t){var n=t.Pf;n&&o.push(n),(t=t.pf)?(a.push(t),h++,Ni(e)):(u=!0,Ii(e))})}}}).then(function(){u?(a.forEach(function(t){cf(i,t,!0)}),o.forEach(function(t){(t=t.element)&&t.parentNode&&t.parentNode.removeChild(t)})):r.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)}),xi(s,!u)}),s.result()}(t,u.W,[r]).then(function(t){t?(ff(a,i),function t(e,n){n!==e.W?t(rf(e,n),n):e.j.splice(0)}(a,u.W),h&&vf(a,new ef(u,h.f)),xi(s,!0)):(o(n,i),xi(s,!1))}):(o(n,i),xi(s,!1))}),s.result()}function hc(t,e){var n=t.l,i=function(t){for(var e=jf.length-1;0<=e;e--){var n=jf[e];if(n.Ff(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}(e),r=n.cf(Eh(e));return(r?ai(r):i.Lf(e,n,t)).ea(function(r){var o=fh(e),a=function(t,e){var n=e.A.parentNode,i=n.ownerDocument.createElement("span");return i.setAttribute("data-adapt-spec","1"),"footnote"===e.Ca&&Sb(t.j,e,"footnote-call",i),n.appendChild(i),n.removeChild(e.A),(n=e.modify()).K=!0,n.A=i,n}(t,e),u=i.xf(r,n);o=new ef(r,o);if(u&&tf(u,r))return df(n,r,a.A),ai(a);if(lf(n,r)||wf(n,r))return vf(n,o),df(n,r,a.A),ai(a);if(t.ta)return ai(null);var s=Pf(a,t.f,0,t.b);return Wf(t,s)?ai(a):sc(t,o,i,s,u).ea(function(t){return t?ai(null):(df(n,r,a.A),ai(a))})})}function lc(t,e,n){if(!e.K||e.ya){if(n){for(var i="",r=e.parent;r&&!i;r=r.parent)!r.ya&&r.A&&(i=r.A.style.textAlign);if("justify"!==i)return}var o=e.A,a=o.ownerDocument,u=n&&(e.K||1!=o.nodeType);if((i=u?o.nextSibling:o)&&!i.parentNode&&(i=null),r=o.parentNode||e.parent&&e.parent.A){var s=i,h=document.body;if(null===ot){var l=h.ownerDocument,f=l.createElement("div");f.style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="40px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",h.appendChild(f);var c=l.createTextNode("a a-");f.appendChild(c);var p=l.createElement("span");p.style.display="inline-block",p.style.width="40px",f.appendChild(p),(l=l.createRange()).setStart(c,2),l.setEnd(c,4),ot=37>l.getBoundingClientRect().right,h.removeChild(f)}if(ot&&((u=(u=u?o:o.previousSibling)?u.textContent:"").charAt(u.length-1)===gc(e)&&(u=o.ownerDocument,o=o.parentNode,h=document.body,null===at&&((f=(l=h.ownerDocument).createElement("div")).style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="40px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",h.appendChild(f),c=l.createTextNode("a a-"),f.appendChild(c),f.appendChild(l.createElement("wbr")),(p=l.createElement("span")).style.display="inline-block",p.style.width="40px",f.appendChild(p),(l=l.createRange()).setStart(c,2),l.setEnd(c,4),at=37>l.getBoundingClientRect().right,h.removeChild(f)),at?o.insertBefore(u.createTextNode(" "),s):o.insertBefore(u.createElement("wbr"),s))),u=e.b,(o=a.createElement("span")).style.visibility="hidden",o.style.verticalAlign="top",o.setAttribute("data-adapt-spec","1"),(h=a.createElement("span")).style.fontSize="0",h.style.lineHeight="0",h.textContent=" #",o.appendChild(h),o.style.display="block",o.style.textIndent="0",o.style.textAlign="left",r.insertBefore(o,s),s=_b(t.f,h),o.style.textAlign="right",h=_b(t.f,h),o.style.textAlign="",f=document.body,null===rt){(c=(p=f.ownerDocument).createElement("div")).style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width="30px",c.style.height="100px",c.style.lineHeight="16px",c.style.fontSize="16px",c.style.textAlign="justify",f.appendChild(c),l=p.createTextNode("a | "),c.appendChild(l);var b=p.createElement("span");b.style.display="inline-block",b.style.width="30px",c.appendChild(b),(p=p.createRange()).setStart(l,0),p.setEnd(l,3),rt=27>p.getBoundingClientRect().right,f.removeChild(c)}o.style.display=rt?"inline":"inline-block",s=1<=(s=u?h.top-s.top:h.left-s.left)?s-1+"px":"100%",u?o.style.paddingTop=s:o.style.paddingLeft=s,n||(n=a.createElement("div"),r.insertBefore(n,i),i=_b(t.f,o),t=_b(t.f,n),e.b?(n.style.marginRight=t.right-i.right+"px",n.style.width="0px"):(n.style.marginTop=i.top-t.top+"px",n.style.height="0px"),n.setAttribute("data-adapt-spec","1"))}}}function fc(t,e){for(var n=0,i=0,r=e.length-1;0<=r;r--){var o=e[r];if(!o.K||!o.A||1!=o.A.nodeType)break;o=oc(t,o.A),0<(o=t.b?-o.left:o.bottom)?n=Math.max(n,o):i=Math.min(i,o)}return n-i}function cc(t,e){var n=oi("layoutBreakableBlock"),i=[];return Zf(t,e,i).then(function(r){if(0>(o=i.length-1))xi(n,r);else{var o=ic(t,r,i,o,i[o].Ma),a=!1;if(!r||!Fc(r.A)){var u=Uf(r,ew(t));a=Wf(t,o+(t.b?-1:1)*u.He);Wf(t,o+(t.b?-1:1)*u.current)&&!t.ta&&(t.ta=r)}r||(o+=fc(t,i)),jc(t,o),(e.f?function(t,e,n,i){var r=oi("processLineStyling");Xf(i);var o=i.concat([]);i.splice(0,i.length);var a=0,u=e.f;return 0==u.count&&(u=u.Ig),Ci(function(i){if(u){var r=wc(t,o),s=u.count-a;if(r.length<=s)Ii(i);else{var h=bc(t,o,r[s-1]);h?t.Na(h,!1,!1).then(function(){a+=s,kb(t.j,h,0).then(function(r){lc(t,e=r,!1),u=e.f,Zf(t,e,o=[]).then(function(t){n=t,Ni(i)})})}):Ii(i)}}else Ii(i)}).then(function(){Array.prototype.push.apply(i,o),Xf(i),xi(r,n)}),r.result()}(t,e,r,i):ai(r)).then(function(e){pc(t,e,i),0<i.length&&(t.N.push(new zf(i,i[0].j)),a&&(2!=i.length&&0<t.N.length||i[0].M!=i[1].M||!Ff[i[0].M.localName])&&e&&((e=e.modify()).xa=!0)),xi(n,e)})}}),n.result()}function pc(t,e,n){ni("POST_LAYOUT_BLOCK").forEach(function(i){i(e,n,t)})}function bc(t,e,n){Xf(e);var i=t.b?n-1:n+1,r=0,o=e[0].Ma;n=r;for(var a,u=e.length-1,s=e[u].Ma;o<s;){a=o+Math.ceil((s-o)/2),n=r;for(var h=u;n<h;){var l=n+Math.ceil((h-n)/2);e[l].Ma>a?h=l-1:n=l}if(h=ic(t,null,e,n,a),t.b?h<=i:h>=i){for(s=a-1;e[n].Ma==a;)n--;u=n}else jc(t,h),o=a,r=n}return i=o,1!=(n=(e=e[n]).A).nodeType&&(function(t){ni("RESOLVE_TEXT_NODE_BREAKER").reduce(function(e,n){return n(t)||e},dc)}(e),e.K?e.na=n.length:(r=i-e.Ma,173==(i=n.data).charCodeAt(r)?(n.replaceData(r,i.length-r,e.B?"":gc(e)),n=r+1):(o=i.charAt(r),r++,u=i.charAt(r),n.replaceData(r,i.length-r,!e.B&&Y(o)&&Y(u)?gc(e):""),n=r),0<(r=n)&&(n=r,(e=e.modify()).na+=n,e.g=null))),Ic(t,e,!1),e}var dc=new function(){};function gc(t){return t.F||t.parent&&t.parent.F||"-"}function vc(t){return!!t&&(!(!(t=t.A)||1!==t.nodeType)&&!!t.getAttribute("data-adapt-spec"))}function wc(t,e){for(var n=[],i=e[0].A,r=e[e.length-1].A,o=[],a=i.ownerDocument.createRange(),u=!1,s=null,h=!1,l=!0;l;){var f=!0;do{var c=null;if(i==r&&(l=1===r.nodeType&&!(!r.firstChild||u)),1!=i.nodeType)h||(a.setStartBefore(i),h=!0),s=i;else if(u)u=!1;else if(i.getAttribute("data-adapt-spec"))f=!h;else{var p;if(!(p="ruby"==i.localName))t:{switch(Lb(t.f,i).display){case"ruby":case"inline-block":case"inline-flex":case"inline-grid":case"inline-list-item":case"inline-table":p=!0;break t}p=!1}p?((f=!h)&&(a.setStartBefore(i),h=!0,s=i),i.contains(r)&&(l=!1)):c=i.firstChild}c||((c=i.nextSibling)||(u=!0,c=i.parentNode)),i=c}while(f&&l);if(h){for(a.setEndAfter(s),h=Ib(t.f,a),f=0;f<h.length;f++)o.push(h[f]);h=!1}}for(o.sort(t.b?sh:uh),s=i=u=a=r=0,l=Dh(t);;)if(s<o.length&&(h=o[s],f=1,0<i&&(f=Math.max(t.b?h.right-h.left:h.bottom-h.top,1),f=l*(t.b?h.right:h.top)<l*r?l*((t.b?h.left:h.bottom)-r)/f:l*(t.b?h.left:h.bottom)>l*a?l*(a-(t.b?h.right:h.top))/f:1),!i||.6<=f||.2<=f&&(t.b?h.top:h.left)>=u-1))u=t.b?h.bottom:h.right,t.b?(r=i?Math.max(r,h.right):h.right,a=i?Math.min(a,h.left):h.left):(r=i?Math.min(r,h.top):h.top,a=i?Math.max(a,h.bottom):h.bottom),i++,s++;else if(0<i&&(n.push(a),i=0),s>=o.length)break;return n.sort(J),t.b&&n.reverse(),n}function mc(t,e){var n=0;return Sh(e,function(e){if("clone"===e.h["box-decoration-break"]){var i=ac(t,e.A);n+=e.b?-i.left:i.bottom,"table"===e.display&&(n+=e.ta)}}),n}function yc(t,e){return Uf(e?e.g():null,ew(t)).current}function xc(t,e,n,i,r){if(Cf(t.l)||t.g||!n)return ai(e);var o=oi("doFinishBreak"),a=!1;if(!e){if(t.Kb)return C.b("Could not find any page breaks?!!"),function(t,e){var n=yh(e),i=oi("skipEdges"),r=null,o=!1;return Ci(function(i){for(;e;){do{if(e.A){if(e.ya&&1!=e.A.nodeType){if(ih(e.A,e.uc))break;if(!e.K)return Ll[r]&&(t.g=r),void Ii(i)}if(!e.K&&(Yf(t,e)||e.I))return r=Ol(r,e.g),Ll[r]&&(t.g=r),void Ii(i);if(1==e.A.nodeType){var a=e.A.style;if(e.K){if(o){if(Ll[r])return t.g=r,void Ii(i);r=null}o=!1,r=Ol(r,e.G)}else{if(r=Ol(r,e.g),Ff[e.A.localName])return Ll[r]&&(t.g=r),void Ii(i);if(a&&(!Ec(a.paddingTop)||!Ec(a.borderTopWidth)))return void Ii(i)}o=!0}}}while(0);if((a=yb(t.j,e)).Xa())return void a.then(function(t){e=t,Ni(i)});e=a.get()}n=null,Ii(i)}).then(function(){xi(i,n)}),i.result()}(t,n).then(function(e){e?((e=e.modify()).xa=!1,t.Na(e,a,!0).then(function(){xi(o,e)})):xi(o,e)}),o.result();e=i,a=!0,t.h=r}return t.Na(e,a,!0).then(function(){xi(o,e)}),o.result()}function Ec(t){return""==(t=t.toString())||"auto"==t||!!t.match(/^0+(.0*)?[^0-9]/)}function Sc(t,e,n){if(!e||Fc(e.A))return!1;var i=Pf(e,t.f,0,t.b),r=Uf(e,ew(t)),o=Wf(t,i+(t.b?-1:1)*r.He);return Wf(t,i+(t.b?-1:1)*r.current)&&!t.ta?t.ta=e:n&&(e=i+fc(t,n),r=t.la-Dh(t)*r.current,i=t.b?Math.min(i,Math.max(e,r)):Math.max(i,Math.min(e,r))),jc(t,i),o}function kc(t,e,n,i,r){return!(!e||Fc(e.A))&&(n=Sc(t,e,n),!i&&n||Lc(t,e,r,n),n)}function Cc(t,e){if(!e.A.parentNode)return!1;var n=oc(t,e.A),i=e.A.ownerDocument.createElement("div");t.b?(i.style.bottom="0px",i.style.width="1px",i.style.marginRight=n.right+"px"):(i.style.right="0px",i.style.height="1px",i.style.marginTop=n.top+"px"),e.A.parentNode.insertBefore(i,e.A);var r=_b(t.f,i),o=(r=t.b?r.right:r.top,Dh(t)),a=e.l,u=1/0*-Dh(t);switch("all"===a&&(u=function(t,e){function n(t){return function(e){return gf(t,Zl(e.ja))}}function i(t,e){return t.Ob.some(n(e))}for(var r=Xh(e),o=(r=e.b?r.V:r.R,t);o;){if(o.f.some(n(o)))return r;o=o.parent}return o=Tf(t,"block-start",e.j,e.f,i),Tf(t,"block-end",e.j,e.f,i)*Dh(e)<r*Dh(e)?r:o}(t.l,t)),a){case"left":u=o*Math.max(u*o,t.Ee*o);break;case"right":u=o*Math.max(u*o,t.Fe*o);break;default:u=o*Math.max(u*o,Math.max(t.Fe*o,t.Ee*o))}return r*o>=u*o?(e.A.parentNode.removeChild(i),!1):(r=Math.max(1,(u-r)*o),t.b?i.style.width=r+"px":i.style.height=r+"px",r=_b(t.f,i),r=t.b?r.left:r.bottom,t.b?(0<(u=r+n.right-u)==0<=n.right&&(u+=n.right),i.style.marginLeft=u+"px"):(0<(u-=r+n.top)==0<=n.top&&(u+=n.top),i.style.marginBottom=u+"px"),e.D=i,!0)}function Ac(t){return t instanceof Hf||!(t instanceof Nw)&&t instanceof Rv}function Tc(t,e){return Kl(e.W)||"footnote"===e.Ca?hc(t,e):function(t,e){var n=oi("layoutFloat"),i=e.A,r=e.Ca;return M(i,"float","none"),M(i,"display","inline-block"),M(i,"vertical-align","top"),Qf(t,e).then(function(o){for(var a=_b(t.f,i),u=oc(t,i),s=(a=new ao(a.left-u.left,a.top-u.top,a.right+u.right,a.bottom+u.bottom),u=t.ua,t.fb),h=e.parent;h&&h.ya;)h=h.parent;if(h){var f=h.A.ownerDocument.createElement("div");f.style.left="0px",f.style.top="0px",t.b?(f.style.bottom="0px",f.style.width="1px"):(f.style.right="0px",f.style.height="1px"),h.A.appendChild(f);var c=_b(t.f,f);u=Math.max(t.b?c.top:c.left,u),s=Math.min(t.b?c.bottom:c.right,s),h.A.removeChild(f),f=t.b?a.R-a.T:a.U-a.V,"left"==r?s=Math.max(s,u+f):u=Math.min(u,s-f),h.A.appendChild(e.A)}f=new ao(u,Dh(t)*t.D,s,Dh(t)*t.sa),u=a,t.b&&(u=ko(a)),s=Dh(t),u.T<t.ye*s&&(c=u.R-u.T,u.T=t.ye*s,u.R=u.T+c),s=t.Cb;t:for(var p=(c=u).T,b=c.U-c.V,d=c.R-c.T,g=To(s,p);;){var v=p+d;if(v>f.R)break t;for(var w=f.V,m=f.U,y=g;y<s.length&&s[y].T<v;y++){var x=s[y];x.V>w&&(w=x.V),x.U<m&&(m=x.U)}if(w+b<=m||g>=s.length){"left"==r?(c.V=w,c.U=w+b):(c.V=m-b,c.U=m),c.R+=p-c.T,c.T=p;break t}p=s[g].R,g++}t.b&&(a=new ao(-u.R,u.V,-u.T,u.U));t:{if(f=Lb(t.f,i),s=new so,f){if("border-box"==f.boxSizing){f=oc(t,i);break t}s.left=rc(f.marginLeft)+rc(f.borderLeftWidth)+rc(f.paddingLeft),s.top=rc(f.marginTop)+rc(f.borderTopWidth)+rc(f.paddingTop),s.right=rc(f.marginRight)+rc(f.borderRightWidth)+rc(f.paddingRight),s.bottom=rc(f.marginBottom)+rc(f.borderBottomWidth)+rc(f.paddingBottom)}f=s}if(M(i,"width",a.U-a.V-f.left-f.right+"px"),M(i,"height",a.R-a.T-f.top-f.bottom+"px"),M(i,"position","absolute"),M(i,"display",e.display),s=null,h)if(h.S)s=h;else t:{for(h=h.parent;h;){if(h.S){s=h;break t}h=h.parent}s=null}if(s?((f=s.A.ownerDocument.createElement("div")).style.position="absolute",s.b?f.style.right="0":f.style.left="0",f.style.top="0",s.A.appendChild(f),h=_b(t.f,f),s.A.removeChild(f)):h={left:(t.b?t.sa:t.ua)-t.I,right:(t.b?t.D:t.fb)+t.Y,top:(t.b?t.ua:t.D)-t.J},(s?s.b:t.b)?M(i,"right",h.right-a.U+"px"):M(i,"left",a.V-h.left+"px"),M(i,"top",a.T-h.top+"px"),e.D&&(e.D.parentNode.removeChild(e.D),e.D=null),h=t.b?a.V:a.R,a=t.b?a.U:a.T,Wf(t,h)&&t.N.length)(e=e.modify()).xa=!0,xi(n,e);else{for(ec(t),f=new ao(t.b?t.sa:t.ua,t.b?t.ua:t.D,t.b?t.D:t.fb,t.b?t.fb:t.sa),t.b&&(f=ko(f)),s=t.Cb,c=[new lo(u.T,u.R,u.V,u.U)];0<c.length&&c[0].R<=f.T;)c.shift();if(c.length){for(c[0].T<f.T&&(c[0].T=f.T),(u=s.length?s[s.length-1].R:f.T)<f.R&&s.push(new lo(u,f.R,f.V,f.U)),u=To(s,c[0].T),p=(c=l(c)).next();!p.done&&(b=p.value,u!=s.length);p=c.next())for(s[u].T<b.T&&(p=s[u],u++,s.splice(u,0,new lo(b.T,p.R,p.V,p.U)),p.R=b.T);u<s.length&&((p=s[u++]).R>b.R&&(s.splice(u,0,new lo(b.R,p.R,p.V,p.U)),p.R=b.R),b.V!=b.U&&("left"==r?p.V=Math.min(b.U,f.U):p.U=Math.max(b.V,f.V)),p.R!=b.R););Ao(f,s)}nc(t),"left"==r?t.Ee=h:t.Fe=h,t.ye=a,jc(t,h),xi(n,o)}}),n.result()}(t,e)}function Nc(t,e,n,i){var r=oi("layoutNext");return function(t,e,n,i){function r(){return!!i||!n&&!!Ll[l]}function o(){(e=c[0]||e).A.parentNode.removeChild(e.A),u.g=l}var a=e.K?e.parent&&e.parent.C:e.C;if(a&&!Ac(a))return ai(e);var u=t,s=oi("skipEdges"),h=!i&&n&&e&&e.K,l=i,f=null,c=[],p=[],b=!1;return Ci(function(t){for(;e;){var i=Df(e.C);do{if(e.A){if(e.ya&&1!=e.A.nodeType){if(ih(e.A,e.uc))break;if(!e.K)return r()?o():kc(u,f,null,!0,l)?(e=(u.u&&f||e).modify()).xa=!0:(e=e.modify()).g=l,void Ii(t)}if(!e.K){if(i&&i.Ze(e))break;if(e.l&&Cc(u,e)&&n&&!u.N.length&&Lc(u,yh(e),l,!1),!Ac(e.C)||e.C instanceof Rv||Yf(u,e)||e.I)return c.push(yh(e)),l=Ol(l,e.g),r()?o():!kc(u,f,null,!0,l)&&u.Zb.b(e)||((e=(u.u&&f||e).modify()).xa=!0),void Ii(t)}if(1==e.A.nodeType){var a=e.A.style;if(e.K){if(!(e.ya||i&&i.Af(e,u.u))){if(b){if(r())return o(),void Ii(t);c=[],h=n=!1,l=null}b=!1,f=yh(e),p.push(f),l=Ol(l,e.G),!a||Ec(a.paddingBottom)&&Ec(a.borderBottomWidth)||(p=[f])}}else{if(c.push(yh(e)),l=Ol(l,e.g),!u.Zb.b(e)&&(kc(u,f,null,!u.u,l),(e=e.modify()).xa=!0,u.u))return void Ii(t);if(Ff[e.A.localName])return r()?o():kc(u,f,null,!0,l)&&((e=(u.u&&f||e).modify()).xa=!0),void Ii(t);!a||Ec(a.paddingTop)&&Ec(a.borderTopWidth)||(h=!1,p=[]),b=!0}}}}while(0);if((i=qf(u,e,h)).Xa())return void i.then(function(n){e=n,Ni(t)});e=i.get()}kc(u,f,p,!u.u,l)?f&&u.u&&((e=f.modify()).xa=!0):Ll[l]&&(u.g=l),Ii(t)}).then(function(){f&&(u.xb=Eh(f)),xi(s,e)}),s.result()}(t,e,n,i||null).then(function(i){!(e=i)||t.g||t.u&&e&&e.xa?xi(r,e):Df(e.C).je(e,t,n).Ga(r)}),r.result()}function Ic(t,e,n){if(e)for(var i=e.parent;e;e=i,i=i?i.parent:null)Df((i||e).C).Fd(t,i,e,n),n=!1}function _c(t){t.dg=[],M(t.element,"width",t.width+"px"),M(t.element,"height",t.height+"px"),(n=t.element.ownerDocument.createElement("div")).style.position="absolute",n.style.top=t.J+"px",n.style.right=t.Y+"px",n.style.bottom=t.S+"px",n.style.left=t.I+"px",t.element.appendChild(n);var e=_b(t.f,n);t.element.removeChild(n);var n=t.F+t.left+Fh(t),i=t.G+t.top+Oh(t);if(t.cg=new ao(n,i,n+t.width,i+t.height),t.ua=e?t.b?e.top:e.left:0,t.fb=e?t.b?e.bottom:e.right:0,t.D=e?t.b?e.right:e.top:0,t.sa=e?t.b?e.left:e.bottom:0,t.Ee=t.D,t.Fe=t.D,t.ye=t.D,t.la=t.sa,e=t.cg,i=new ao(n=t.F+t.left+Fh(t),i=t.G+t.top+Oh(t),n+t.width,i+t.height),t.Lb){n=i.V,i=i.T;for(var r=[],o=l(t.Lb.b),a=o.next();!a.done;a=o.next())a=a.value,r.push(new uo(a.f+n,a.b+i));n=new co(r)}else n=go(i.V,i.T,i.U,i.R);n=[n],i=function t(e){var n=e.b.map(function(t){return Hh(t.b,null,null)});return e.parent?t(e.parent).concat(n):n}(t.l),t.Cb=function(t,e,n,i,r){r&&(t=ko(t),e=tt(e,Co),n=tt(n,Co)),r=e.length;var o,a,u,s=n?n.length:0,h=[],l=[];for(o=0;o<r;o++)po(e[o],l,o);for(o=0;o<s;o++)po(n[o],l,o+r);for(e=l.length,l.sort(fo),n=0;l[n].g>=r;)n++;(n=l[n].b.b)>t.T&&h.push(new lo(t.T,n,t.U,t.U)),o=0;for(var f=[];o<e&&(u=l[o]).b.b<n;)u.f.b>n&&f.push(u),o++;for(;o<e||0<f.length;){var c=t.R,p=Math.min(xo(Math.ceil(n+8),i),t.R);for(a=0;a<f.length&&c>p;a++)(u=f[a]).b.f==u.f.f?u.f.b<c&&(c=Math.max(Eo(u.f.b,i),p)):u.b.f!=u.f.f&&(c=p);for(c>t.R&&(c=t.R);o<e&&(u=l[o]).b.b<c;)if(u.f.b<n)o++;else{if(!(u.b.b<p)){(a=Eo(u.b.b,i))<c&&(c=a);break}u.b.b==u.f.b&&u.b.b==n||(f.push(u),c=p),o++}for(p=[],a=0;a<f.length;a++)mo(p,f[a],n,c);if(p.sort(function(t,e){return t.f-e.f||t.g-e.g}),(p=yo(p,r,s)).length){var b=0,d=t.V;for(a=0;a<p.length;a+=2){var g=Math.max(t.V,p[a]),v=Math.min(t.U,p[a+1])-g;v>b&&(b=v,d=g)}b?h.push(new lo(n,c,Math.max(d,t.V),Math.min(d+b,t.U))):h.push(new lo(n,c,t.U,t.U))}else h.push(new lo(n,c,t.U,t.U));if(c==t.R)break;for(n=c,a=f.length-1;0<=a;a--)f[a].f.b<=c&&f.splice(a,1)}return Ao(t,h),h}(e,n,t.ob.concat(i),t.Mb,t.b),nc(t),t.h=0,t.Ld=!1,t.g=null,t.xb=null}function Lc(t,e,n,i){var r=yh(e);e=Df(e.C);var o=mc(t,r);n=e.Kf(r,n,i,t.h+o),t.N.push(n)}function jc(t,e){isNaN(e)||(t.h=Math.max(Dh(t)*(e-t.D),t.h))}function Oc(t,e,n,i){if(t.dg.push(e),e.f.K&&(t.xb=e.f),t.u&&t.Ld)return ai(e);if(function(t,e){for(var n=e.j,i=e.f,r=t,o=null;r&&r.H;){var a=Nf(r,n,i);o?e.b?(a.right<o.right&&(o.right=a.right,o.Oc=a.Oc),a.left>o.left&&(o.left=a.left,o.Nc=a.Nc)):(a.top>o.top&&(o.top=a.top,o.Oc=a.Oc),a.bottom<o.bottom&&(o.bottom=a.bottom,o.Nc=a.Nc)):o=a,r=r.parent}return(e.b?o.right-o.left:o.bottom-o.top)<=Math.max(o.Oc,o.Nc)}(t.l,t))return e.f.K&&1===e.f.pa.length?ai(null):ai(e);var r=oi("layout");return t.Lc(e.f).then(function(e){var o=null;if(e.A)o=yh(e);else{var a=function(e){e.w.A&&(o=e.w,t.j.removeEventListener("nextInTree",a))};t.j.addEventListener("nextInTree",a)}var u=new Pc(n,i);Vl(u,e,t).then(function(e){xc(t,e,u.g.Wd,o,u.b).then(function(e){(t.Md?ai(null):function(t,e){var n=oi("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(t.B);i.sort(function(t,e){return t.ue()-e.ue()});var r=0;return ki(function(){return r<i.length?i[r++].Na(e,t).Hc(!0):ai(!1)}).then(function(){xi(n,!0)}),n.result()}(t,e)).then(function(){if(Cf(t.l))xi(r,null);else if(e){t.Ld=!0;var n=new Ch(Eh(e));xi(r,n)}else xi(r,null)})})})}),r.result()}function Rc(t){var e=function(t){var e=af(t).b;return t.b.filter(function(t){return"block-end"===t.Ca}).reduce(function(t,n){var i=Gh(n.b);return e?Math.max(t,i.U):Math.min(t,i.T)},e?0:1/0)}(t.l);0<e&&isFinite(e)&&(t.jf=Dh(t)*(e-t.D-t.h))}function Fc(t){for(;t;){if(t.parentNode===t.ownerDocument)return!1;t=t.parentNode}return!0}function Pc(t,e){zl.call(this),this.gc=t,this.B=e||null,this.l=null,this.b=0,this.j=!1,this.g={Wd:null}}function Dc(t,e,n){this.gc=t,this.j=e,this.h=n}function Mc(){}Gf.prototype.Na=function(t,e,n){var i=Df(t.C).Na(this,t,e,n);return i||(i=Bc.Na(this,t,e,n)),i},Gf.prototype.ec=function(){var t,e=null,n=null,i=0;do{t=i;i=Number.MAX_VALUE;for(var r=this.N.length-1;0<=r&&!n;--r){n=(e=this.N[r]).f(this,t);var o=e.b();o>t&&(i=Math.min(i,o))}}while(i>t&&!n&&this.Kb);return{Eb:n?e:null,w:n}},g(Pc,zl),(n=Pc.prototype).qf=function(){return new Dc(this.gc,this.B,this.g)},n.eg=function(t,e){e.B=[],e.Md||(Mv=[])},n.Jd=function(t){for(zl.prototype.Jd.call(this,t);t;){var e=t.A;e&&$f(e.parentNode,e),t=t.parent}},n.yf=function(t,e){zl.prototype.yf.call(this,t,e),this.l=e.g,this.b=e.h,this.j=e.Ld},n.ie=function(t,e){zl.prototype.ie.call(this,t,e),e.g=this.l,e.h=this.b,e.Ld=this.j},Dc.prototype.b=function(t,e){var n=this,i=oi("adapt.layout.DefaultLayoutMode.doLayout");return function(t,e){var n=oi("vivliostyle.selectors.processAfterIfContinuesOfAncestors"),i=t;return ki(function(){if(i){var t=iw(i,e);return i=i.parent,t.Hc(!0)}return ai(!1)}).then(function(){xi(n,!0)}),n.result()}(t,e).then(function(){(function(t,e,n,i){var r=oi("doLayout"),o=null;return t.N=[],t.ta=null,Ci(function(r){for(var a={};e;){if(a.Oa=!0,Nc(t,e,n,i||null).then(function(a){return function(u){n=!1,i=null,t.ta&&t.u?(t.g=null,(e=t.ta).xa=!0):e=u,Cf(t.l)?Ii(r):t.g?Ii(r):e&&t.u&&e&&e.xa?(o=e,u=t.ec(),e=u.w,u.Eb&&u.Eb.u(t),Ii(r)):a.Oa?a.Oa=!1:Ni(r)}}(a)),a.Oa)return void(a.Oa=!1);a={Oa:a.Oa}}t.h+=yc(t),Ii(r)}).then(function(){xi(r,{w:e,Wd:o})}),r.result()})(e,t,n.gc,n.j).then(function(t){n.h.Wd=t.Wd,xi(i,t.w)})}),i.result()},Dc.prototype.f=function(t,e){var n=this;return!!(Cf(e.l)||e.g||0>=e.B.length)||e.B.every(function(i){return i.ke(t,n.h.Wd,e)})},Dc.prototype.g=function(t,e,n,i){return i||(i=!n.B.some(function(e){return e.nd(t)})),n.B.forEach(function(r){r.cd(i,t,e,n)}),i},(n=Mc.prototype).je=function(t,e){var n;if(Yf(e,t))n=Tc(e,t);else{t:if(t.K)n=!0;else{switch(t.M.namespaceURI){case"http://www.w3.org/2000/svg":n=!1;break t}n=!t.I}n=n?cc(e,t):Qf(e,t)}return n},n.Kf=function(t,e,n,i){return new Vf(yh(t),e,n,i)},n.Ze=function(){return!1},n.Af=function(){return!1},n.Fd=function(t,e,n,i){n.A&&n.A.parentNode&&($f(t=n.A.parentNode,n.A),i&&t.removeChild(n.A))},n.Na=function(t,e,n,i){return Ic(t,e,n=n||!!e.A&&1==e.A.nodeType&&!e.K),i&&(lc(t,e,!0),Ab(n?e:e.parent)),ai(!0)};var Bc=new Mc;function Uc(t,e,n,i,r,o,a){Gf.call(this,e,n,i,r,o),this.Ca=t,this.hg=a,this.Jb=[],this.fg=[],this.ve=!0}function zc(t,e){function n(t,n){t.forEach(function(t){var i=B(e,t);i&&"%"===i.charAt(i.length-1)&&M(e,t,n*parseFloat(i)/100+"px")})}var i=(r=Xh(t.hg)).U-r.V,r=r.R-r.T;n(["width","max-width","min-width"],i),n(["height","max-height","min-height"],r),n("margin-top margin-right margin-bottom margin-left padding-top padding-right padding-bottom padding-left".split(" "),t.b?r:i),["margin-top","margin-right","margin-bottom","margin-left"].forEach(function(t){"auto"===B(e,t)&&M(e,t,"0")})}function Vc(t,e,n){var i=_b(e.f,t);return t=oc(e,t),n?i.width+t.left+t.right:i.height+t.top+t.bottom}function Xc(t){var e={};return Object.keys(t).forEach(function(n){e[n]=Array.from(t[n])}),e}function Hc(t,e){this.Gc=t,this.ud=e,this.Le=null,this.aa=this.P=-1}function Gc(t,e){this.b=t,this.f=e}function Yc(t,e,n,i){this.b=t,this.g=e,this.j=n,this.f=i,this.h=null}function Wc(t){return(t=t.match(/^[^#]*#(.*)$/))?t[1]:null}function $c(t,e){var n=t.b.J.oc(I(e,t.g),t.g);return"#"===n.charAt(0)&&(n=n.substring(1)),n}function Kc(t,e,n,i){var r=t.b.l[n];if(!r&&i&&e){if(i=t.h,e){for(i.D=e,e=0;i.D&&ml(i,e+=5e3,0)!==Number.POSITIVE_INFINITY;);i.D=null}r=t.b.l[n]}return r||null}function Jc(t){this.J=t,this.l={},this.B={},this.b={},this.b.page=[0],this.G={},this.F=[],this.D={},this.j=null,this.u=[],this.g=[],this.I=[],this.f={},this.h={},this.Ne=[]}function Zc(t,e){var n=t.f[e],i=t.h[e];i||(i=t.h[e]=[]);for(var r=!1,o=0;o<t.g.length;){var a=t.g[o];a.Gc===e?(a.ud=!0,t.g.splice(o,1),n&&(0<=(r=n.indexOf(a))&&n.splice(r,1)),i.push(a),r=!0):o++}r||qc(t,e,!0)}function qc(t,e,n){t.u.some(function(t){return t.Gc===e})||t.u.push(new Hc(e,n))}function Qc(t,e,n,i){"pages"===e&&t.Ne.push({Mc:i,format:n})}function tp(t){return t.N.bind(t)}function ep(t,e){this.f=t,this.aa=e}ei("RESOLVE_FORMATTING_CONTEXT",function(t,e,n,i,r,o){return!(e=t.parent)&&t.C?null:e&&t.C!==e.C?null:t.hd||!t.C&&$p(n,i,r,o).display===Ke?new Hf(e?e.C:null):null}),ei("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Hf?Bc:null}),g(Uc,Gf),Uc.prototype.Lc=function(t){var e=this;return Gf.prototype.Lc.call(this,t).ea(function(t){if(t){for(var n=t;n.parent;)n=n.parent;if(n=n.A,e.Jb.push(n),e.ve&&zc(e,n),e.fg.push(oc(e,n)),e.ve){var i=e.Ca;e.hg.b?"block-end"!==i&&"left"!==i||""!==(i=B(n,"height"))&&"auto"!==i&&M(n,"margin-top","auto"):"block-end"!==i&&"bottom"!==i||""!==(i=B(n,"width"))&&"auto"!==i&&M(n,"margin-left","auto")}}return ai(t)})},Jc.prototype.N=function(t,e,n){return 0<=this.Ne.findIndex(function(e){return e.Mc===t})?((n=n.createElement("span")).textContent=e,n.setAttribute("data-vivliostyle-pages-counter",t.g),n):null},ep.prototype.b=function(t){return!(t&&!t.K)||(!(t=t.A)||1!==t.nodeType||(!(t=t.getAttribute("id")||t.getAttribute("name"))||!this.f.h[t]&&!this.f.f[t]||(!(t=this.f.D[t])||this.aa>=t.aa)))};var np=1;function ip(t,e,n,i,r){this.b={},this.children=[],this.g=null,this.index=0,this.f=t,this.name=e,this.mc=n,this.Pa=i,this.parent=r,this.j="p"+np++,r&&(this.index=r.children.length,r.children.push(this))}function rp(t,e){var n,i=t.b,r=e.b;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}function op(t,e){for(var n=0;n<t.children.length;n++)t.children[n].clone({parent:e})}function ap(t){ip.call(this,t,null,null,[],null),this.b.width=new Pa($n,0),this.b.height=new Pa(Kn,0)}function up(t,e){this.g=e;var n=this;At.call(this,t,function(t,e){if(r=t.match(/^([^.]+)\.([^.]+)$/)){var i=n.g.l[r[1]];if(i&&(i=this.ob[i])){if(e){var r=r[2];if(h=i.la[r])i=h;else{switch(r){case"columns":var o=new de(h=i.f.f,0),a=wp(i,"column-count"),u=wp(i,"column-width"),s=wp(i,"column-gap"),h=we(h,me(h,new fe(h,"min",[o,a]),ve(h,u,s)),s)}h&&(i.la[r]=h),i=h}}else i=wp(i,r[2]);return i}}return null})}function sp(t,e,n,i,r,o,a){t=t instanceof up?t:new up(t,this),ip.call(this,t,e,n,i,r),this.g=this,this.ia=o,this.ba=a,this.b.width=new Pa($n,0),this.b.height=new Pa(Kn,0),this.b["wrap-flow"]=new Pa(Ye,0),this.b.position=new Pa(In,0),this.b.overflow=new Pa(Gn,0),this.l={}}function hp(t,e,n,i,r){ip.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j),this.b["wrap-flow"]=new Pa(Ye,0)}function lp(t,e,n,i,r){ip.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j)}function fp(t,e,n){return e&&e!==Ye?e.Aa(t,n):null}function cp(t,e,n){return e&&e!==Ye?e.Aa(t,n):t.b}function pp(t,e,n){return e?e===Ye?null:e.Aa(t,n):t.b}function bp(t,e,n,i){return e&&n!==kn?e.Aa(t,i):t.b}function dp(t,e,n){return e?e===Yn?t.j:e===un?t.h:e.Aa(t,t.b):n}function gp(t,e){this.g=t,this.f=e,this.J={},this.style={},this.B=this.D=null,this.children=[],this.N=this.S=this.h=this.j=!1,this.G=this.I=0,this.F=null,this.sa={},this.la={},this.ua=this.Z=this.b=!1,t&&t.children.push(this)}function vp(t,e,n){if(e=wp(t,e),n=wp(t,n),!e||!n)throw Error("E_INTERNAL");return ve(t.f.f,e,n)}function wp(t,e){var n=t.sa[e];if(n)return n;switch((o=t.style[e])&&(n=o.Aa(t.f.f,t.f.f.b)),e){case"margin-left-edge":n=wp(t,"left");break;case"margin-top-edge":n=wp(t,"top");break;case"margin-right-edge":n=vp(t,"border-right-edge","margin-right");break;case"margin-bottom-edge":n=vp(t,"border-bottom-edge","margin-bottom");break;case"border-left-edge":n=vp(t,"margin-left-edge","margin-left");break;case"border-top-edge":n=vp(t,"margin-top-edge","margin-top");break;case"border-right-edge":n=vp(t,"padding-right-edge","border-right-width");break;case"border-bottom-edge":n=vp(t,"padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":n=vp(t,"border-left-edge","border-left-width");break;case"padding-top-edge":n=vp(t,"border-top-edge","border-top-width");break;case"padding-right-edge":n=vp(t,"right-edge","padding-right");break;case"padding-bottom-edge":n=vp(t,"bottom-edge","padding-bottom");break;case"left-edge":n=vp(t,"padding-left-edge","padding-left");break;case"top-edge":n=vp(t,"padding-top-edge","padding-top");break;case"right-edge":n=vp(t,"left-edge","width");break;case"bottom-edge":n=vp(t,"top-edge","height")}if(!n){if("extent"==e)o=t.b?"width":"height";else if("measure"==e)o=t.b?"height":"width";else{var i,r=t.b?ja:Oa,o=e;for(i in r)o=o.replace(i,r[i])}o!=e&&(n=wp(t,o))}return n&&(t.sa[e]=n),n}function mp(t,e,n,i){return Dt(t=t.style[e].Aa(t.f.f,null),n,i,{})}function yp(t,e){e.ob[t.f.j]=t;var n=t.f.f,i=t.style,r=t.g?Sp(t.g,e):null;r=Ss(t.J,e,r,!1);t.b=xs(r,e,!!t.g&&t.g.b),t.Z=Es(r,e,!!t.g&&t.g.Z),As(r,i,t.b,t.Z,function(t,e){return e.value}),t.D=new le(n,function(){return t.I},"autoWidth"),t.B=new le(n,function(){return t.G},"autoHeight"),t.Ae(),t.Be(),function(t){var e=t.f.f,n=t.style;t=fp(e,n[t.b?"height":"width"],null);var i,r=fp(e,n["column-width"],t),o=fp(e,n["column-count"],null);(i=(i=n["column-gap"])&&i!==Cn?i.Aa(e,null):null)||(i=new ue(e,1,"em")),r&&!o&&(o=new fe(e,"floor",[ye(e,ve(e,t,i),ve(e,r,i))]),o=new fe(e,"max",[e.f,o])),o||(o=e.f),r=we(e,ye(e,ve(e,t,i),o),i),n["column-width"]=new ze(r),n["column-count"]=new ze(o),n["column-gap"]=new ze(i)}(t),function(t){var e=t.f.f,n=t.style,i=dp(e,n.enabled,e.j),r=fp(e,n.page,e.b);r&&(i=ge(e,i,new te(e,r,new se(e,"page-number"))));(r=fp(e,n["min-page-width"],e.b))&&(i=ge(e,i,new Qt(e,new se(e,"page-width"),r))),(r=fp(e,n["min-page-height"],e.b))&&(i=ge(e,i,new Qt(e,new se(e,"page-height"),r))),i=t.Y(i),n.enabled=new ze(i)}(t)}function xp(t,e,n){return(t=t.style[n])&&(t=oo(e,t,n)),t}function Ep(t,e,n){return(t=t.style[n])&&(t=oo(e,t,n)),Ve(t,e)}function Sp(t,e){var n;t:{if(n=t.J["region-id"]){for(var i=[],r=0;r<n.length;r++){var o=n[r].evaluate(e,"");o&&o!==Ae&&i.push(o)}if(i.length){n=i;break t}}n=null}if(n){for(i=[],r=0;r<n.length;r++)i[r]=n[r].toString();return i}return null}function kp(t,e,n,i,r){(t=xp(t,e,i))&&(t.Ac()&&_t(t.ka)&&(t=new je(Ve(t,e),"px")),"font-family"===i&&(t=Tl(r,t)),M(n,i,t.toString()))}function Cp(t,e,n){var i=Ep(t,e,"left"),r=Ep(t,e,"margin-left"),o=Ep(t,e,"padding-left"),a=Ep(t,e,"border-left-width");Bh(n,i,t=Ep(t,e,"width")),M(n.element,"margin-left",r+"px"),M(n.element,"padding-left",o+"px"),M(n.element,"border-left-width",a+"px"),n.marginLeft=r,n.Z=a,n.I=o}function Ap(t,e,n){var i=Ep(t,e,"right"),r=Ep(t,e,"snap-height"),o=Ep(t,e,"margin-right"),a=Ep(t,e,"padding-right");e=Ep(t,e,"border-right-width"),M(n.element,"margin-right",o+"px"),M(n.element,"padding-right",a+"px"),M(n.element,"border-right-width",e+"px"),n.marginRight=o,n.Za=e,t.b&&0<r&&(t=i+Ph(n),0<(t-=Math.floor(t/r)*r)&&(n.Od=r-t,a+=n.Od)),n.Y=a,n.Rd=r}function Tp(t,e,n){var i=Ep(t,e,"snap-height"),r=Ep(t,e,"top"),o=Ep(t,e,"margin-top"),a=Ep(t,e,"padding-top");e=Ep(t,e,"border-top-width"),n.top=r,n.marginTop=o,n.ca=e,n.Mb=i,!t.b&&0<i&&(t=r+Oh(n),0<(t-=Math.floor(t/i)*i)&&(n.yb=i-t,a+=n.yb)),n.J=a,M(n.element,"top",r+"px"),M(n.element,"margin-top",o+"px"),M(n.element,"padding-top",a+"px"),M(n.element,"border-top-width",e+"px")}function Np(t,e,n){var i=Ep(t,e,"margin-bottom"),r=Ep(t,e,"padding-bottom"),o=Ep(t,e,"border-bottom-width");t=Ep(t,e,"height")-n.yb,M(n.element,"height",t+"px"),M(n.element,"margin-bottom",i+"px"),M(n.element,"padding-bottom",r+"px"),M(n.element,"border-bottom-width",o+"px"),n.height=t-n.yb,n.marginBottom=i,n.Ba=o,n.S=r}function Ip(t,e,n){t.b?(Tp(t,e,n),Np(t,e,n)):(Ap(t,e,n),Cp(t,e,n))}function _p(t,e,n){M(n.element,"border-top-width","0px");var i=Ep(t,e,"max-height");t.S?Mh(n,0,i):(Tp(t,e,n),i-=n.yb,n.height=i,M(n.element,"height",i+"px"))}function Lp(t,e,n){M(n.element,"border-left-width","0px");var i=Ep(t,e,"max-width");t.N?Bh(n,0,i):(Ap(t,e,n),i-=n.Od,n.width=i,t=Ep(t,e,"right"),M(n.element,"right",t+"px"),M(n.element,"width",i+"px"))}ip.prototype.h=function(){throw Error("E_UNEXPECTED_CALL")},ip.prototype.clone=function(){throw Error("E_UNEXPECTED_CALL")},g(ap,ip),g(up,At),g(sp,ip),sp.prototype.h=function(t){return new Bp(t,this)},sp.prototype.clone=function(t){return rp(this,t=new sp(this.f,this.name,t.mc||this.mc,this.Pa,this.parent,this.ia,this.ba)),op(this,t),t},g(hp,ip),hp.prototype.h=function(t){return new Up(t,this)},hp.prototype.clone=function(t){return rp(this,t=new hp(t.parent.f,this.name,this.mc,this.Pa,t.parent)),op(this,t),t},g(lp,ip),lp.prototype.h=function(t){return new zp(t,this)},lp.prototype.clone=function(t){return rp(this,t=new lp(t.parent.f,this.name,this.mc,this.Pa,t.parent)),op(this,t),t},gp.prototype.Y=function(t){return t},gp.prototype.Ae=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=fp(t,e.left,n),r=fp(t,e["margin-left"],n),o=bp(t,e["border-left-width"],e["border-left-style"],n),a=cp(t,e["padding-left"],n),u=fp(t,e.width,n),s=fp(t,e["max-width"],n),h=cp(t,e["padding-right"],n),l=bp(t,e["border-right-width"],e["border-right-style"],n),f=fp(t,e["margin-right"],n),c=fp(t,e.right,n),p=ve(t,o,a),b=ve(t,o,h);i&&c&&u?(p=we(t,n,ve(t,u,ve(t,ve(t,i,p),b))),r?f?c=we(t,p,f):f=we(t,p,ve(t,c,r)):(p=we(t,p,c),f?r=we(t,p,f):f=r=me(t,p,new pe(t,.5)))):(r||(r=t.b),f||(f=t.b),i||c||u||(i=t.b),i||u?i||c?u||c||(u=this.D,this.j=!0):i=t.b:(u=this.D,this.j=!0),p=we(t,n,ve(t,ve(t,r,p),ve(t,f,b))),this.j&&(s||(s=we(t,p,i||c)),this.b||!fp(t,e["column-width"],null)&&!fp(t,e["column-count"],null)||(u=s,this.j=!1)),i?u?c||(c=we(t,p,ve(t,i,u))):u=we(t,p,ve(t,i,c)):i=we(t,p,ve(t,c,u))),t=cp(t,e["snap-width"]||(this.g?this.g.style["snap-width"]:null),n),e.left=new ze(i),e["margin-left"]=new ze(r),e["border-left-width"]=new ze(o),e["padding-left"]=new ze(a),e.width=new ze(u),e["max-width"]=new ze(s||u),e["padding-right"]=new ze(h),e["border-right-width"]=new ze(l),e["margin-right"]=new ze(f),e.right=new ze(c),e["snap-width"]=new ze(t)},gp.prototype.Be=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=this.g?this.g.style.height.Aa(t,null):null,r=fp(t,e.top,i),o=fp(t,e["margin-top"],n),a=bp(t,e["border-top-width"],e["border-top-style"],n),u=cp(t,e["padding-top"],n),s=fp(t,e.height,i),h=fp(t,e["max-height"],i),l=cp(t,e["padding-bottom"],n),f=bp(t,e["border-bottom-width"],e["border-bottom-style"],n),c=fp(t,e["margin-bottom"],n),p=fp(t,e.bottom,i),b=ve(t,a,u),d=ve(t,f,l);r&&p&&s?(i=we(t,i,ve(t,s,ve(t,ve(t,r,b),d))),o?c?p=we(t,i,o):c=we(t,i,ve(t,p,o)):(i=we(t,i,p),c?o=we(t,i,c):c=o=me(t,i,new pe(t,.5)))):(o||(o=t.b),c||(c=t.b),r||p||s||(r=t.b),r||s?r||p?s||p||(s=this.B,this.h=!0):r=t.b:(s=this.B,this.h=!0),i=we(t,i,ve(t,ve(t,o,b),ve(t,c,d))),this.h&&(h||(h=we(t,i,r||p)),this.b&&(fp(t,e["column-width"],null)||fp(t,e["column-count"],null))&&(s=h,this.h=!1)),r?s?p||(p=we(t,i,ve(t,r,s))):s=we(t,i,ve(t,p,r)):r=we(t,i,ve(t,p,s))),t=cp(t,e["snap-height"]||(this.g?this.g.style["snap-height"]:null),n),e.top=new ze(r),e["margin-top"]=new ze(o),e["border-top-width"]=new ze(a),e["padding-top"]=new ze(u),e.height=new ze(s),e["max-height"]=new ze(h||s),e["padding-bottom"]=new ze(l),e["border-bottom-width"]=new ze(f),e["margin-bottom"]=new ze(c),e.bottom=new ze(p),e["snap-height"]=new ze(t)};var jp="border-left-style border-right-style border-top-style border-bottom-style border-left-color border-right-color border-top-color border-bottom-color outline-style outline-color outline-width overflow visibility".split(" "),Op="border-top-left-radius border-top-right-radius border-bottom-right-radius border-bottom-left-radius border-image-source border-image-slice border-image-width border-image-outset border-image-repeat background-attachment background-color background-image background-repeat background-position background-clip background-origin background-size opacity z-index background-blend-mode isolation mix-blend-mode filter".split(" "),Rp="color font-family font-size font-style font-weight font-variant line-height letter-spacing text-align text-decoration text-indent text-transform white-space word-spacing font-feature-settings font-kerning font-size-adjust font-variant-east-asian font-stretch text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-shadow text-underline-position".split(" "),Fp=["width","height","image-resolution","object-fit","object-position"],Pp=["transform","transform-origin"];function Dp(t,e){t.j&&(t.N=mp(t,"right",t.D,e)||mp(t,"margin-right",t.D,e)||mp(t,"border-right-width",t.D,e)||mp(t,"padding-right",t.D,e)),t.h&&(t.S=mp(t,"top",t.B,e)||mp(t,"margin-top",t.B,e)||mp(t,"border-top-width",t.B,e)||mp(t,"padding-top",t.B,e));for(var n=l(t.children),i=n.next();!i.done;i=n.next())Dp(i.value,e)}function Mp(t){gp.call(this,null,t)}function Bp(t,e){gp.call(this,t,e),this.F=this}function Up(t,e){gp.call(this,t,e),this.F=t.F}function zp(t,e){gp.call(this,t,e),this.F=t.F}function Vp(t,e,n,i){var r=null;if(n instanceof _e&&(r=[n]),n instanceof Be&&(r=n.values),r)for(t=t.f.f,n=0;n<r.length;n++)if(r[n]instanceof _e){var o=new se(t,o=kt(r[n].name,"enabled"));i&&(o=new Ht(t,o)),e=ge(t,e,o)}return e}function Xp(t,e,n,i){Tr.call(this,t,e,!1),this.target=n,this.b=i}function Hp(t,e,n,i){Xp.call(this,t,e,n,i)}function Gp(t,e,n,i){Xp.call(this,t,e,n,i),n.b.width=new Pa(Wn,0),n.b.height=new Pa(Wn,0)}function Yp(t,e,n,i){Xp.call(this,t,e,n,i)}function Wp(t){switch(t=t.toString()){case"inline-flex":t="flex";break;case"inline-grid":t="grid";break;case"inline-table":t="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":t="block"}return Le(t)}function $p(t,e,n,i){return t!==kn&&(e===Xe||e===sn?(n=kn,t=Wp(t)):(n&&n!==kn||i)&&(t=Wp(t))),{display:t,position:e,ja:n}}function Kp(t){switch(t.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function Jp(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.oc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.oc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.oc(i,e)})}gp.prototype.kc=function(t,e,n,i){for(this.g&&this.b==this.g.b||M(e.element,"writing-mode",this.b?"vertical-rl":"horizontal-tb"),(this.b?this.j:this.h)?this.b?Lp(this,t,e):_p(this,t,e):(this.b?Ap(this,t,e):Tp(this,t,e),this.b?Cp(this,t,e):Np(this,t,e)),(this.b?this.h:this.j)?this.b?_p(this,t,e):Lp(this,t,e):Ip(this,t,e),n=0;n<jp.length;n++)kp(this,t,e.element,jp[n],i)},gp.prototype.Qd=function(t,e,n,i,r,o,a){this.b?this.I=e.h+e.Od:this.G=e.h+e.yb;var u=(this.b||!i)&&this.h,s=(!this.b||!i)&&this.j;if((s||u)&&(s&&M(e.element,"width","auto"),u&&M(e.element,"height","auto"),i=_b(o,i?i.element:e.element),s&&(this.I=Math.ceil(i.right-i.left-e.I-e.Z-e.Y-e.Za),this.b&&(this.I+=e.Od)),u&&(this.G=i.bottom-i.top-e.J-e.ca-e.S-e.Ba,this.b||(this.G+=e.yb))),(this.b?this.h:this.j)&&Ip(this,t,e),(this.b?this.j:this.h)&&((this.b?this.N:this.S)&&(this.b?Ap(this,t,e):Tp(this,t,e)),this.b?Cp(this,t,e):Np(this,t,e)),1<r&&(s=Ep(this,t,"column-rule-width"),i=xp(this,t,"column-rule-style"),o=xp(this,t,"column-rule-color"),0<s&&i&&i!=kn&&o!=Vn)){var h=Ep(this,t,"column-gap"),l=this.b?e.height:e.width,f=this.b?"border-top":"border-left";for(u=1;u<r;u++){var c=(l+h)*u/r-h/2+e.I-s/2,p=e.height+e.J+e.S,b=e.element.ownerDocument.createElement("div");M(b,"position","absolute"),M(b,this.b?"left":"top","0px"),M(b,this.b?"top":"left",c+"px"),M(b,this.b?"height":"width","0px"),M(b,this.b?"width":"height",p+"px"),M(b,f,s+"px "+i.toString()+(o?" "+o.toString():"")),e.element.insertBefore(b,e.element.firstChild)}}for(u=0;u<Op.length;u++)kp(this,t,e.element,Op[u],a);for(u=0;u<Pp.length;u++)r=e,a=Pp[u],s=n.l,(i=xp(this,t,a))&&s.push(new Zs(r.element,a,i))},gp.prototype.l=function(t,e){var n,i=this.J,r=this.f.b;for(n in r)Ua(n)&&za(i,n,r[n]);if("background-host"==this.f.mc)for(n in e)(n.match(/^background-/)||"writing-mode"==n)&&(i[n]=e[n]);if("layout-host"==this.f.mc)for(n in e)n.match(/^background-/)||"writing-mode"==n||(i[n]=e[n]);for(es(t,this.f.Pa,null,i),i.content&&(i.content=i.content.Pd(new Mu(t,null,t.xb))),yp(this,t.l),r=(i=l(this.f.children)).next();!r.done;r=i.next())r.value.h(this).l(t,e);ls(t)},g(Mp,gp),Mp.prototype.l=function(t,e){gp.prototype.l.call(this,t,e),this.children.sort(function(t,e){return e.f.ba-t.f.ba||t.f.index-e.f.index})},g(Bp,gp),Bp.prototype.Y=function(t){var e=this.f.g;return e.ia&&(t=ge(e.f,t,e.ia)),t},Bp.prototype.ca=function(){},g(Up,gp),g(zp,gp),zp.prototype.Y=function(t){var e,n=this.f.f,i=this.style,r=dp(n,i.required,n.h)!==n.h;(r||this.h)&&(t=ge(n,t,e=new fe(n,"has-content",[e=(e=i["flow-from"])?e.Aa(n,n.b):new pe(n,"body")])));return t=Vp(this,t,i["required-partitions"],!1),t=Vp(this,t,i["conflicting-partitions"],!0),r&&(i=ge(n,i=(i=this.F.style.enabled)?i.Aa(n,null):n.j,t),this.F.style.enabled=new ze(i)),t},zp.prototype.kc=function(t,e,n,i,r){M(e.element,"overflow","hidden"),gp.prototype.kc.call(this,t,e,n,i,r)},g(Xp,Nr),Xp.prototype.Qb=function(t,e,n){ma(this.b,t,e,n,this)},Xp.prototype.fe=function(t,e){Ir(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Xp.prototype.kd=function(t,e){Ir(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Xp.prototype.Sb=function(t,e,n){this.target.b[t]=new Pa(e,n?50331648:67108864)},g(Hp,Xp),g(Gp,Xp),Gp.prototype.zd=function(t,e,n){t=new lp(this.f,t,e,n,this.target),Ar(this.oa,new Hp(this.f,this.oa,t,this.b))},Gp.prototype.yd=function(t,e,n){t=new hp(this.f,t,e,n,this.target),t=new Gp(this.f,this.oa,t,this.b),Ar(this.oa,t)},g(Yp,Xp),Yp.prototype.zd=function(t,e,n){t=new lp(this.f,t,e,n,this.target),Ar(this.oa,new Hp(this.f,this.oa,t,this.b))},Yp.prototype.yd=function(t,e,n){t=new hp(this.f,t,e,n,this.target),t=new Gp(this.f,this.oa,t,this.b),Ar(this.oa,t)},Jp=function(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.oc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.oc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.oc(i,e)})};var Zp={"text-indent":"0px","margin-top":"0px","padding-top":"0px","border-top-width":"0px","border-top-style":"none","border-top-color":"transparent","border-top-left-radius":"0px","border-top-right-radius":"0px"},qp={"text-indent":"0px","margin-right":"0px","padding-right":"0px","border-right-width":"0px","border-right-style":"none","border-right-color":"transparent","border-top-right-radius":"0px","border-bottom-right-radius":"0px"},Qp={"margin-top":"0px"},tb={"margin-right":"0px"},eb={};var nb=(new DOMParser).parseFromString('<root xmlns="http://www.pyroxy.com/ns/shadow"/>',"text/xml"),ib="footnote-marker first-5-lines first-4-lines first-3-lines first-2-lines first-line first-letter before  after".split(" ");function rb(t,e){t.setAttribute("data-adapt-pseudo",e)}function ob(t,e,n,i,r){this.style=e,this.element=t,this.b=n,this.g=i,this.h=r,this.f={}}function ab(t,e,n,i,r,o,a,u,s,h,l,f,c){this.Pb={},this.G=t,this.b=e,this.viewport=n,this.D=n.b,this.j=i,this.u=tp(i.Ba.b),this.l=r,this.da=o,this.I=a,this.B=u,this.J=s,this.page=h,this.g=l,this.F=f,this.h=c,this.N=this.w=null,this.f=!1,this.M=null,this.na=0,this.A=null}function ub(t,e,n,i){if(!(t=t._pseudos))return null;var r,o={},a={};for(r in t)a.ed=o[r]={},Cs(a.ed,t[r],i),uw(a.ed,i,t[r]),ks(t[r],e,n,function(t){return function(e,n){Cs(t.ed,n,i),sw(n,function(e){Cs(t.ed,e,i)})}}(a)),a={ed:a.ed};return o}function sb(t,e,n,i,r,o){var a=oi("createRefShadow");return t.da.u.load(e).then(function(u){if(u){var s=Ps(u,e);if(s){var h=t.J;if(!(l=h.N[u.url])){var l=h.style.j.g[u.url],f=new Lt(0,h.jc(),h.ic(),h.u);l=new ll(u,l.g,l.f,f,h.l,l.l,new Gc(h.h,u.url),new Yc(h.h,u.url,l.f,l.b));h.N[u.url]=l}o=new bh(i,s,u,r,o,n,l)}}xi(a,o)}),a.result()}function hb(t,e,n,i,r){var o=t.b;e=xs(i=Ss(i,o,t.l,t.f),o,e),n=Es(i,o,n),As(i,r,e,n,function(e,n){var i=n.evaluate(o,e);return"font-family"==e&&(i=Tl(t.I,i)),i});var a=$p(r.display||dn,r.position,r.float,t.M===t.da.root);return["display","position","float"].forEach(function(t){a[t]&&(r[t]=a[t])}),e}function lb(t,e){for(var n=t.w.M,i=[],r=null,o=t.w.wa,a=-1;n&&1==n.nodeType;){if(!(h=o&&o.root==n)||2==o.type){var u=(o?o.b:t.j).l(n,!1);i.push(u),r=r||U(n)}h?(n=o.oa,o=o.pd):(n=n.parentNode,a++)}for(o=new Ya(n={"font-size":new Pa(new je(n=Ot(t.b,"em",!a),"px"),0)},t.b),a=i.length-1;0<=a;--a){var s,h=i[a];u=[];for(s in h)xa[s]&&u.push(s);u.sort(qn);for(var f=(u=l(u)).next();!f.done;f=u.next()){f=f.value,o.b=f;var c=h[f];c.value!==bn&&(n[f]=c.Pd(o))}}for(var p in e)xa[p]||(n[p]=e[p]);return{lang:r,mb:n}}ob.prototype.l=function(t){var e=t.getAttribute("data-adapt-pseudo")||"";if(this.b&&e&&e.match(/after$/)&&(this.style=this.b.l(this.element,!0),this.b=null),t=this.style._pseudos[e]||{},e.match(/^first-/)&&!t["x-first-pseudo"]){var n=1;"first-letter"==e?n=0:(e=e.match(/^first-([0-9]+)-lines$/))&&(n=e[1]-0),t["x-first-pseudo"]=new Pa(new Re(n),0)}return t},ob.prototype.sa=function(t,e){var n=t.getAttribute("data-adapt-pseudo")||"";this.f[n]||(this.f[n]=!0,(n=e.content)&&Wh(n)&&n.fa(new Yh(t,this.g,n,this.h)))},g(ab,et),ab.prototype.clone=function(){return new ab(this.G,this.b,this.viewport,this.j,this.l,this.da,this.I,this.B,this.J,this.page,this.g,this.F,this.h)};var fb={a:"a",sub:"sub",sup:"sup",table:"table",tr:"tr",td:"td",th:"th",code:"code",body:"div",p:"p",v:"p",date:"p",emphasis:"em",strong:"strong",style:"span",strikethrough:"del"};function cb(t,e){return e=I(e,t.da.url),t.F[e]||e}function pb(t,e){var n=ni("POLYFILLED_INHERITED_PROPS").reduce(function(t,e){return t.concat(e())},[].concat(Ea)).filter(function(t){return e[t]});if(n.length){var i=t.w.h;if(t.w.parent){var r;i=t.w.h={};for(r in t.w.parent.h)i[r]=t.w.parent.h[r]}n.forEach(function(t){var n=e[t];if(n){if(n instanceof Re)i[t]=n.L;else if(n instanceof _e)i[t]=n.name;else if(n instanceof je)switch(n.ka){case"dpi":case"dpcm":case"dppx":i[t]=n.L*It[n.ka]}else i[t]=n;delete e[t]}})}}function bb(t,e,n){var i=!0,r=oi("createElementView"),o=t.M,a=t.w.wa?t.w.wa.b:t.j,u=a.l(o,!1);if(!t.w.wa){var s=js(t.da,o);hw(s,t.w.Sa,0)}var h={};t.w.parent||(s=lb(t,u),u=s.mb,t.w.lang=s.lang);var f=u["float-reference"]&&function(t){switch(t){case"inline":return $l;case"column":return"column";case"region":return"region";case"page":return"page";default:throw Error("Unknown float-reference: "+t)}}(u["float-reference"].value.toString());if(t.w.parent&&f&&Kl(f)&&(s=lb(t,u),u=s.mb,t.w.lang=s.lang),t.w.b=hb(t,t.w.b,"rtl"===t.w.direction,u,h),a.sa(o,h),pb(t,h),function(t){t.w.lang=U(t.w.M)||t.w.parent&&t.w.parent.lang||t.w.lang}(t),h.direction&&(t.w.direction=h.direction.toString()),(s=h["flow-into"])&&s.toString()!=t.G)return xi(r,!1),r.result();var c=h.display;if(c===kn)return xi(r,!1),r.result();var p=!t.w.parent;return t.w.I=c===hn,function(t,e,n,i,r,o,a,u){var s=oi("createShadows"),h=r.template;return(h instanceof Pe?sb(t,h.url,2,e,u,null):ai(null)).then(function(h){var f=null;if("http://www.pyroxy.com/ns/shadow"==e.namespaceURI&&"include"==e.localName){var c=e.getAttribute("href"),p=null;c?p=u?u.da:t.da:u&&(c="http://www.w3.org/1999/xhtml"==u.oa.namespaceURI?u.oa.getAttribute("href"):u.oa.getAttributeNS("http://www.w3.org/1999/xlink","href"),p=u.pd?u.pd.da:t.da),c&&(c=I(c,p.url),f=sb(t,c,3,e,u,h))}f||(f=ai(h));var b=null;f.then(function(n){b=r.display===Mn?sb(t,I("user-agent.xml#table-cell",N),2,e,u,n):ai(n)}),b.then(function(h){var f=ub(i,t.l,t.f,a);if(f){for(var c=[],p=nb.createElementNS("http://www.pyroxy.com/ns/shadow","root"),b=p,d=l(ib),g=d.next();!g.done;g=d.next()){var v;if(g=g.value){if(!f[g])continue;if(!("footnote-marker"!=g||n&&t.f))continue;if(g.match(/^first-/)&&(!(v=r.display)||v===dn))continue;if(!("before"!==g&&"after"!==g||(v=f[g].content)&&v!==Cn&&v!==kn))continue;c.push(g),rb(v=nb.createElementNS("http://www.w3.org/1999/xhtml","span"),g)}else v=nb.createElementNS("http://www.pyroxy.com/ns/shadow","content");b.appendChild(v),g.match(/^first-/)&&(b=v)}h=c.length?new bh(e,p,null,u,h,2,new ob(e,i,o,a,t.u)):h}xi(s,h)})}),s.result()}(t,o,p,u,h,a,t.b,t.w.wa).then(function(s){t.w.Ja=s,s=h.position;var l=h.float,b=h.clear,d=t.w.b?Hn:pn,g=t.w.parent?t.w.parent.b?Hn:pn:d,v="true"===o.getAttribute("data-vivliostyle-flow-root");t.w.hd=function(t,e,n,i,r,o,a){return r=r||o||pn,!!a||!!n&&n!==kn||e===Xe||e===sn||t===gn||t===Mn||t===Dn||t==hn||(t===Ke||t===En)&&!!i&&i!==Gn||!!o&&r!==o}(c,s,l,h.overflow,d,g,v),t.w.S=s===In||s===Xe||s===sn,!function(t){for(t=t.parent;t;){if(t.hd)return!0;t=t.parent}return!1}(t.w)||l===ln||f&&Kl(f)||(b=l=null),d=l===yn||l===_n||l===zn||l===Qe||l===wn||l===vn||l===Ze||l===Je||l===On||l===ln,l&&(delete h.float,l===ln&&(t.f?(d=!1,h.display=Ke):h.display=dn)),b&&(b===bn&&t.w.parent&&t.w.parent.l&&(b=Le(t.w.parent.l)),b===yn||b===_n||b===zn||b===Qe||b===qe||b===He||b===Ln)&&(delete h.clear,h.display&&h.display!=dn&&(t.w.l=b.toString()));var w=c===En&&h["ua-list-item-count"];if((d||h["break-inside"]&&h["break-inside"]!==Ye)&&t.w.j++,c&&c!==dn&&Kp(c)&&t.w.j++,!(b=!d&&!c||Kp(c)))t:switch(c.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":b=!0;break t;default:b=!1}t.w.ya=b,t.w.display=c?c.toString():"inline",t.w.Ca=d?l.toString():null,t.w.W=f||$l,t.w.N=h["float-min-wrap-block"]||null,t.w.ca=h["column-span"],t.w.ya||((b=h["break-after"])&&(t.w.G=b.toString()),(b=h["break-before"])&&(t.w.g=b.toString())),t.w.Z=h["vertical-align"]&&h["vertical-align"].toString()||"baseline",t.w.la=h["caption-side"]&&h["caption-side"].toString()||"top",(b=h["border-collapse"])&&b!==Le("separate")||(d=h["border-spacing"])&&(d.Ud()?(b=d.values[0],d=d.values[1]):b=d,b.Ac()&&(t.w.sa=Ve(b,t.b)),d.Ac()&&(t.w.ta=Ve(d,t.b))),t.w.Y=h["footnote-policy"],(b=h["x-first-pseudo"])&&(t.w.f=new gh(t.w.parent?t.w.parent.f:null,b.L)),t.w.ya||function(t,e,n,i,r){var o=ub(n,t.l,t.f,r);o&&o["after-if-continues"]&&o["after-if-continues"].content&&(t.w.J=new fw(e,new ob(e,n,i,r,t.u)))}(t,o,u,a,t.b),(b=h["white-space"])&&null!==(b=nh(b.toString()))&&(t.w.uc=b),(b=h["hyphenate-character"])&&b!==Ye&&(t.w.F=b.Xc),b=h["overflow-wrap"]||["word-wrap"],t.w.B=h["word-break"]===en||b===nn,function(t,e,n,i,r,o){for(var a=ni("RESOLVE_FORMATTING_CONTEXT"),u=0;u<a.length;u++){var s=a[u](t,e,n,i,r,o);if(s){t.C=s;break}}}(t.w,e,c,s,l,p),t.w.parent&&t.w.parent.C&&(e=t.w.parent.C.ff(t.w,e)),t.w.ya||(t.w.u=gb(h),function(t,e,n){for(e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){var i={},r=n.l(e,!1);if(hb(t,t.w.b,"rtl"===t.w.direction,r,i),gb(i)){if(t.w.C instanceof Rv&&!kh(t.w,t.w.C))break;n=t.w.parent,t.w.C=new Rv(n&&n.C,t.w.M),Dv(t.w.C,t.w.b);break}}}(t,o,a));var m=!1,y=null,x=[],E=o.namespaceURI,S=o.localName;if("http://www.w3.org/1999/xhtml"==E)"html"==S||"body"==S||"script"==S||"link"==S||"meta"==S?S="div":"vide_"==S?S="video":"audi_"==S?S="audio":"object"==S&&(m=!!t.g),o.getAttribute("data-adapt-pseudo")&&u.content&&u.content.value&&u.content.value.url&&(S="img");else if("http://www.idpf.org/2007/ops"==E)S="span",E="http://www.w3.org/1999/xhtml";else if("http://www.gribuser.ru/xml/fictionbook/2.0"==E)E="http://www.w3.org/1999/xhtml","image"==S?(S="div",(s=o.getAttributeNS("http://www.w3.org/1999/xlink","href"))&&"#"==s.charAt(0)&&(s=Ps(t.da,s))&&(y=Cb(t,E,"img"),s="data:"+(s.getAttribute("content-type")||"image/jpeg")+";base64,"+s.textContent.replace(/[ \t\n\t]/g,""),x.push(ji(y,s)))):S=fb[S],S||(S=t.w.ya?"span":"div");else if("http://www.daisy.org/z3986/2005/ncx/"==E)if(E="http://www.w3.org/1999/xhtml","ncx"==S||"navPoint"==S)S="div";else if("navLabel"==S){if(S="span",l=o.parentNode){for(s=null,l=l.firstChild;l;l=l.nextSibling)if(1==l.nodeType&&("http://www.daisy.org/z3986/2005/ncx/"==(b=l).namespaceURI&&"content"==b.localName)){s=b.getAttribute("src");break}s&&(S="a",(o=o.ownerDocument.createElementNS(E,"a")).setAttribute("href",s))}}else S="span";else"http://www.pyroxy.com/ns/shadow"==E?(E="http://www.w3.org/1999/xhtml",S=t.w.ya?"span":"div"):m=!!t.g;w?e?S="li":(S="div",c=Ke,h.display=c):"body"==S||"li"==S?S="div":"q"==S?S="span":"a"==S&&(s=h["hyperlink-processing"])&&"normal"!=s.toString()&&(S="span"),h.behavior&&"none"!=h.behavior.toString()&&t.g&&(m=!0),o.dataset&&"true"===o.getAttribute("data-math-typeset")&&(m=!0),(m?t.g(o,t.w.parent?t.w.parent.A:null,h):ai(null)).then(function(a){a?m&&(i="true"==a.getAttribute("data-adapt-process-children")):a=Cb(t,E,S),"a"==S&&a.addEventListener("click",t.page.J,!1),y&&(Sb(t,t.w,"inner",y),a.appendChild(y)),"iframe"==a.localName&&"http://www.w3.org/1999/xhtml"==a.namespaceURI&&function(t){t.addEventListener("load",function(){t.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t){switch(t){case"mouse-events":return!0}return!1}}},!1)}(a);var u=t.w.h["image-resolution"],s=[],l=h.width,f=h.height,c=o.getAttribute("width"),p=o.getAttribute("height");l=l===Ye||!l&&!c,f=f===Ye||!f&&!p;if("http://www.gribuser.ru/xml/fictionbook/2.0"!=o.namespaceURI||"td"==S){for(var b=(c=o.attributes).length,d=(p=null,0);d<b;d++){var g=(k=c[d]).namespaceURI,v=k.localName,k=k.nodeValue;if(g){if("http://www.w3.org/2000/xmlns/"==g)continue;"http://www.w3.org/1999/xlink"==g&&"href"==v&&(k=cb(t,k))}else{if(v.match(/^on/))continue;if("style"==v)continue;if(("id"==v||"name"==v)&&e){k=t.h.Re(k,t.da.url),a.setAttribute(v,k),eh(t.page,a,k);continue}if("src"==v||"href"==v||"poster"==v?(k=cb(t,k),"href"===v&&(k=t.h.oc(k,t.da.url))):"srcset"==v&&(k=k.split(",").map(function(e){return cb(t,e.trim())}).join(",")),"poster"===v&&"video"===S&&"http://www.w3.org/1999/xhtml"===E&&l&&f){var C=new Image,A=ji(C,k);x.push(A),s.push({Rf:C,element:a,Of:A})}}"http://www.w3.org/2000/svg"==E&&/^[A-Z\-]+$/.test(v)&&(v=v.toLowerCase()),db.includes(v.toLowerCase())&&(k=Jp(k,t.da.url,t.h)),g&&(C=eb[g])&&(v=C+":"+v),"src"!=v||g||"img"!=S&&"input"!=S||"http://www.w3.org/1999/xhtml"!=E?"href"==v&&"image"==S&&"http://www.w3.org/2000/svg"==E&&"http://www.w3.org/1999/xlink"==g?t.page.j.push(ji(a,k)):g?a.setAttributeNS(g,v,k):a.setAttribute(v,k):p=k}p&&(c=ji(C="input"===S?new Image:a,p),C!==a&&(a.src=p),l||f?(l&&f&&u&&1!==u&&s.push({Rf:C,element:a,Of:c}),x.push(c)):t.page.j.push(c))}if(delete h.content,(l=h["list-style-image"])&&l instanceof Pe&&(l=l.url,x.push(ji(new Image,l))),function(t,e){ni("PREPROCESS_ELEMENT_STYLE").forEach(function(n){n(t.w,e)})}(t,h),Eb(t,a,h),!t.w.ya&&(l=null,e?n&&(l=t.w.b?tb:Qp):l="clone"!==t.w.h["box-decoration-break"]?t.w.b?qp:Zp:t.w.b?tb:Qp,l))for(var T in l)M(a,T,l[T]);w&&a.setAttribute("value",h["ua-list-item-count"].stringValue()),t.A=a,x.length?Li(x).then(function(){0<u&&function(t,e,n,i,r){e.forEach(function(e){if("load"===e.Of.get().get()){var o=e.Rf,a=o.width/n,o=o.height/n;if(e=e.element,0<a&&0<o)if(i["box-sizing"]===tn&&(i["border-left-style"]!==kn&&(a+=Ve(i["border-left-width"],t.b)),i["border-right-style"]!==kn&&(a+=Ve(i["border-right-width"],t.b)),i["border-top-style"]!==kn&&(o+=Ve(i["border-top-width"],t.b)),i["border-bottom-style"]!==kn&&(o+=Ve(i["border-bottom-width"],t.b))),1<n){var u=i["max-width"]||kn,s=i["max-height"]||kn;u===kn&&s===kn?M(e,"max-width",a+"px"):u!==kn&&s===kn?M(e,"width",a+"px"):u===kn&&s!==kn?M(e,"height",o+"px"):"%"!==u.ka?M(e,"max-width",Math.min(a,Ve(u,t.b))+"px"):"%"!==s.ka?M(e,"max-height",Math.min(o,Ve(s,t.b))+"px"):r?M(e,"height",o+"px"):M(e,"width",a+"px")}else 1>n&&(u=i["min-width"]||Jn,s=i["min-height"]||Jn,u.L||s.L?u.L&&!s.L?M(e,"width",a+"px"):!u.L&&s.L?M(e,"height",o+"px"):"%"!==u.ka?M(e,"min-width",Math.max(a,Ve(u,t.b))+"px"):"%"!==s.ka?M(e,"min-height",Math.max(o,Ve(s,t.b))+"px"):r?M(e,"height",o+"px"):M(e,"width",a+"px"):M(e,"min-width",a+"px"))}})}(t,s,u,h,t.w.b),xi(r,i)}):Ei().then(function(){xi(r,i)})})}),r.result()}var db="color-profile clip-path cursor filter marker marker-start marker-end marker-mid fill stroke mask".split(" ");function gb(t){var e=t["repeat-on-break"];return e!==kn&&(e===Ye&&(e=t.display===Un?cn:t.display===Bn?fn:kn),e&&e!==kn)?e.toString():null}function vb(t){var e=oi("createTextNodeView");return function(t){if(t.w.Qa)return ai(!0);var e,n=e=t.M.textContent,i=oi("preprocessTextContent"),r=ni("PREPROCESS_TEXT_CONTENT"),o=0;return ki(function(){return o>=r.length?ai(!1):r[o++](t.w,n).ea(function(t){return n=t,ai(!0)})}).then(function(){t.w.Qa=cv(e,n,0),xi(i,!0)}),i.result()}(t).then(function(){var n=t.na||0;n=vv(t.w.Qa).substr(n);t.A=document.createTextNode(n),xi(e,!0)}),e.result()}function wb(t,e,n,i){return(t.w=e)?(t.M=e.M,t.na=e.na):(t.M=null,t.na=-1),t.A=null,t.w?function(t,e,n){var i=oi("createNodeView"),r=!0;return 1==t.M.nodeType?e=bb(t,e,n):8==t.M.nodeType?(t.A=null,e=ai(!0)):e=vb(t),e.then(function(e){r=e,(t.w.A=t.A)&&(e=t.w.parent?t.w.parent.A:t.N)&&e.appendChild(t.A),xi(i,r)}),i.result()}(t,n,!!i):ai(!0)}function mb(t){if(null==t.wa||"content"!=t.M.localName||"http://www.pyroxy.com/ns/shadow"!=t.M.namespaceURI)return t;var e,n,i=t.Ma,r=t.wa,o=t.parent;r.vf?(n=r.vf,e=r.root,2==(r=r.type)&&(e=e.firstChild)):(n=r.pd,e=r.oa.firstChild,r=2);var a=t.M.nextSibling;return a?(t.M=a,wh(t)):t.Fa?t=t.Fa:e?t=null:(t=t.parent.modify()).K=!0,e?((i=new vh(e,o,i)).wa=n,i.kb=r,i.Fa=t,i):(t.Ma=i,t)}function yb(t,e,n){if(!(e=function(t){var e=t.Ma+1;if(t.K){if(!t.parent)return null;if(3!=t.kb){var n=t.M.nextSibling;if(n)return(t=t.modify()).Ma=e,t.M=n,wh(t),mb(t)}if(t.Fa)return(t=t.Fa.modify()).Ma=e,t;t=t.parent.modify()}else{if(t.Ja&&(n=t.Ja.root,2==t.Ja.type&&(n=n.firstChild),n))return(e=new vh(n,t,e)).wa=t.Ja,e.kb=t.Ja.type,mb(e);if(n=t.M.firstChild)return mb(new vh(n,t,e));1!=t.M.nodeType&&(e+=(n=vv(t.Qa)).length-1-t.na),t=t.modify()}return t.Ma=e,t.K=!0,t}(e))||e.K)return ai(e);var i=oi("nextInTree");return wb(t,e,!0,n).then(function(n){e.A&&n||((e=e.modify()).K=!0,e.A||(e.ya=!0)),nt(t,{type:"nextInTree",w:e}),xi(i,e)}),i.result()}var xb={"box-decoration-break":!0,"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,page:!0};function Eb(t,e,n){(r=n["background-image"])&&function t(e,n){if(n instanceof Be)for(var i=n.values,r=0;r<i.length;r++)t(e,i[r]);else n instanceof Pe&&(i=n.url,e.page.j.push(ji(new Image,i)))}(t,r);var i,r=n.position===In;for(i in n){var o;if(!xb[i])(o=(o=n[i]).fa(new Do(t.da.url,t.h))).Ac()&&_t(o.ka)&&(o=new je(Ve(o,t.b),"px")),Ks[i]||r&&Js[i]?t.page.l.push(new Zs(e,i,o)):M(e,i,o.toString())}}function Sb(t,e,n,i){if(!e.K){var r=(e.wa?e.wa.b:t.j).l(t.M,!1);(r=r._pseudos)&&(r=r[n])&&(n={},e.b=hb(t,e.b,"rtl"===e.direction,r,n),Wh(e=n.content)&&(e.fa(new Yh(i,t.b,e,t.u)),delete n.content),Eb(t,i,n))}}function kb(t,e,n){var i=oi("peelOff"),r=e.f,o=e.na,a=e.K;if(0<n)e.A.textContent=e.A.textContent.substr(0,n),o+=n;else if(!a&&e.A&&!o){var u=e.A.parentNode;u&&u.removeChild(e.A)}for(var s=e.Ma+n,h=[];e.f===r;)h.push(e),e=e.parent;var l=h.pop(),f=l.Fa;return ki(function(){for(;0<h.length;){l=h.pop(),e=new vh(l.M,e,s),h.length||(e.na=o,e.K=a),e.kb=l.kb,e.wa=l.wa,e.Ja=l.Ja,e.Fa=l.Fa?l.Fa:f,f=null;var n=wb(t,e,!1);if(n.Xa())return n}return ai(!1)}).then(function(){xi(i,e)}),i.result()}function Cb(t,e,n){return"http://www.w3.org/1999/xhtml"==e?t.D.createElement(n):t.D.createElementNS(e,n)}function Ab(t){t&&Sh(t,function(t){var e=t.h["box-decoration-break"];e&&"slice"!==e||(e=t.A,t.b?(M(e,"padding-left","0"),M(e,"border-left","none"),M(e,"border-top-left-radius","0"),M(e,"border-bottom-left-radius","0")):(M(e,"padding-bottom","0"),M(e,"border-bottom","none"),M(e,"border-bottom-left-radius","0"),M(e,"border-bottom-right-radius","0")))})}function Tb(t){this.b=t.h,this.window=t.window}function Nb(t,e){var n=e.left,i=e.top;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.width,height:t.height}}function Ib(t,e){var n=e.getClientRects(),i=t.b.getBoundingClientRect();return Array.from(n).map(function(t){return Nb(t,i)},t)}function _b(t,e){return Nb(e.getBoundingClientRect(),t.b.getBoundingClientRect())}function Lb(t,e){return t.window.getComputedStyle(e,null)}function jb(t,e,n,i,r){this.window=t,this.fontSize=e,this.b=t.document,this.root=n||this.b.body,(e=this.root.firstElementChild)||((e=this.b.createElement("div")).setAttribute("data-vivliostyle-outer-zoom-box",!0),this.root.appendChild(e)),(n=e.firstElementChild)||((n=this.b.createElement("div")).setAttribute("data-vivliostyle-spread-container",!0),e.appendChild(n));var o=e.nextElementSibling;o||((o=this.b.createElement("div")).setAttribute("data-vivliostyle-layout-box",!0),this.root.appendChild(o)),this.g=e,this.f=n,this.h=o,e=Lb(new Tb(this),this.root),this.width=i||parseFloat(e.width)||t.innerWidth,this.height=r||parseFloat(e.height)||t.innerHeight}jb.prototype.zoom=function(t,e,n){M(this.g,"width",t*n+"px"),M(this.g,"height",e*n+"px"),M(this.f,"width",t+"px"),M(this.f,"height",e+"px"),M(this.f,"transform","scale("+n+")")};var Ob="min-content inline size",Rb="fit-content inline size";function Fb(t,e,n){function i(n){return Lb(t,e).getPropertyValue(n)}function r(){return M(e,"display","block"),M(e,"position","static"),i(x)}function o(){M(e,"display","inline-block"),M(w,x,"99999999px");var t=i(x);return M(w,x,""),t}function a(){M(e,"display","inline-block"),M(w,x,"0");var t=i(x);return M(w,x,""),t}function u(){var t=r(),e=a(),n=parseFloat(t);return n<=parseFloat(e)?e:(e=o(),n<=parseFloat(e)?t:e)}function s(){throw Error("Getting fill-available block size is not implemented")}var h=e.style.display,l=e.style.position,f=e.style.width,c=e.style.maxWidth,p=e.style.minWidth,b=e.style.height,d=e.style.maxHeight,g=e.style.minHeight,v=e.parentNode,w=e.ownerDocument.createElement("div");M(w,"position",l),v.insertBefore(w,e),w.appendChild(e),M(e,"width","auto"),M(e,"max-width","none"),M(e,"min-width","0"),M(e,"height","auto"),M(e,"max-height","none"),M(e,"min-height","0");var m,y="vertical-rl"===(m=((m=D("writing-mode"))?i(m[0]):null)||i("writing-mode"))||"tb-rl"===m||"vertical-lr"===m||"tb-lr"===m,x=y?"height":"width",E=y?"width":"height",S={};return n.forEach(function(t){var n;switch(t){case"fill-available inline size":n=r();break;case"max-content inline size":n=o();break;case Ob:n=a();break;case Rb:n=u();break;case"fill-available block size":n=s();break;case"max-content block size":case"min-content block size":case"fit-content block size":n=i(E);break;case"fill-available width":n=y?s():r();break;case"fill-available height":n=y?r():s();break;case"max-content width":n=y?i(E):o();break;case"max-content height":n=y?o():i(E);break;case"min-content width":n=y?i(E):a();break;case"min-content height":n=y?a():i(E);break;case"fit-content width":n=y?i(E):u();break;case"fit-content height":n=y?u():i(E)}S[t]=parseFloat(n),M(e,"position",l),M(e,"display",h)}),M(e,"width",f),M(e,"max-width",c),M(e,"min-width",p),M(e,"height",b),M(e,"max-height",d),M(e,"min-height",g),v.insertBefore(e,w),v.removeChild(w),S}function Pb(t){var e=(e=t["writing-mode"])&&e.value;return t=(t=t.direction)&&t.value,e===Xn||e!==Hn&&t!==Fn?"ltr":"rtl"}var Db={a5:{width:new je(148,"mm"),height:new je(210,"mm")},a4:{width:new je(210,"mm"),height:new je(297,"mm")},a3:{width:new je(297,"mm"),height:new je(420,"mm")},b5:{width:new je(176,"mm"),height:new je(250,"mm")},b4:{width:new je(250,"mm"),height:new je(353,"mm")},"jis-b5":{width:new je(182,"mm"),height:new je(257,"mm")},"jis-b4":{width:new je(257,"mm"),height:new je(364,"mm")},letter:{width:new je(8.5,"in"),height:new je(11,"in")},legal:{width:new je(8.5,"in"),height:new je(14,"in")},ledger:{width:new je(11,"in"),height:new je(17,"in")}},Mb=new je(.24,"pt"),Bb=new je(3,"mm"),Ub=new je(10,"mm"),zb=new je(13,"mm");function Vb(t){var e={width:$n,height:Kn,$b:Jn,ac:Jn},n=t.size;if(n&&n.value!==Ye){var i=n.value;i.Ud()?(n=i.values[0],i=i.values[1]):(n=i,i=null),n.Ac()?(e.width=n,e.height=i||n):(n=n.name&&Db[n.name.toLowerCase()])&&(i&&i===mn?(e.width=n.height,e.height=n.width):(e.width=n.width,e.height=n.height))}return(n=t.marks)&&n.value!==kn&&(e.ac=zb),(t=t.bleed)&&t.value!==Ye?t.value&&t.value.Ac()&&(e.$b=t.value):n&&(t=!1,(t=n.value.Ud()?n.value.values.some(function(t){return t===rn}):n.value===rn)&&(e.$b=new je(6,"pt"))),e}function Xb(t,e){var n={},i=t.$b.L*Ot(e,t.$b.ka,!1),r=t.ac.L*Ot(e,t.ac.ka,!1),o=i+r,a=t.width;return n.jc=a===$n?e.$.vc?e.$.vc.width*Ot(e,"px",!1):(e.$.ub?Math.floor(e.Cb/2)-e.$.Dc:e.Cb)-2*o:a.L*Ot(e,a.ka,!1),a=t.height,n.ic=a===Kn?e.$.vc?e.$.vc.height*Ot(e,"px",!1):e.Lc-2*o:a.L*Ot(e,a.ka,!1),n.$b=i,n.ac=r,n.qe=o,n}function Hb(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width",e),t.setAttribute("height",n),t.style.position="absolute",t}function Gb(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg",n||"polyline")).setAttribute("stroke","black"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t}var Yb={kh:"top left",lh:"top right",Xg:"bottom left",Yg:"bottom right"};var Wb={jh:"top",Wg:"bottom",pg:"left",qg:"right"};function $b(t,e,n,i){var r=!1,o=!1,a=t.marks;if(a&&((a=a.value).Ud()?a.values.forEach(function(t){t===rn?r=!0:t===on&&(o=!0)}):a===rn?r=!0:a===on&&(o=!0)),r||o){var u=n.H,s=u.ownerDocument,h=e.$b,l=Ve(Mb,i),f=Ve(Bb,i),c=Ve(Ub,i);h&&(t=t["background-color"])&&t.value&&(n.h.style.backgroundColor=t.value.stringValue()),r&&Object.keys(Yb).forEach(function(t){t=function(t,e,n,i,r,o){(a=i)<=r+2*It.mm&&(a=r+i/2);var a,u=Math.max(i,a),s=r+u+n/2,h=Hb(t,s,s);return i=(a=[[0,r+i],[i,r+i],[i,r+i-a]]).map(function(t){return[t[1],t[0]]}),"top right"!==e&&"bottom right"!==e||(a=a.map(function(t){return[r+u-t[0],t[1]]}),i=i.map(function(t){return[r+u-t[0],t[1]]})),"bottom left"!==e&&"bottom right"!==e||(a=a.map(function(t){return[t[0],r+u-t[1]]}),i=i.map(function(t){return[t[0],r+u-t[1]]})),(s=Gb(t,n)).setAttribute("points",a.map(function(t){return t.join(",")}).join(" ")),h.appendChild(s),(t=Gb(t,n)).setAttribute("points",i.map(function(t){return t.join(",")}).join(" ")),h.appendChild(t),e.split(" ").forEach(function(t){h.style[t]=o+"px"}),h}(s,Yb[t],l,c,h,f),u.appendChild(t)}),o&&Object.keys(Wb).forEach(function(t){t=function(t,e,n,i,r){var o,a=2*i;"top"===e||"bottom"===e?(o=a,a=i):o=i;var u,s=Hb(t,o,a),h=Gb(t,n);switch(h.setAttribute("points","0,"+a/2+" "+o+","+a/2),s.appendChild(h),(h=Gb(t,n)).setAttribute("points",o/2+",0 "+o/2+","+a),s.appendChild(h),(t=Gb(t,n,"circle")).setAttribute("cx",o/2),t.setAttribute("cy",a/2),t.setAttribute("r",i/4),s.appendChild(t),e){case"top":u="bottom";break;case"bottom":u="top";break;case"left":u="right";break;case"right":u="left"}return Object.keys(Wb).forEach(function(t){(t=Wb[t])===e?s.style[t]=r+"px":t!==u&&(s.style[t]="0",s.style["margin-"+t]="auto")}),s}(s,Wb[t],l,c,f),u.appendChild(t)})}}var Kb,Jb=(Kb={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0},"left right top bottom before after start end block-start block-end inline-start inline-end".split(" ").forEach(function(t){Kb["margin-"+t]=!0,Kb["padding-"+t]=!0,Kb["border-"+t+"-width"]=!0,Kb["border-"+t+"-style"]=!0,Kb["border-"+t+"-color"]=!0}),Kb),Zb={"top-left-corner":{order:1,Wa:!0,Ta:!1,Ua:!0,Va:!0,Ea:null},"top-left":{order:2,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"start"},"top-center":{order:3,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"center"},"top-right":{order:4,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"end"},"top-right-corner":{order:5,Wa:!0,Ta:!1,Ua:!1,Va:!0,Ea:null},"right-top":{order:6,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"start"},"right-middle":{order:7,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"center"},"right-bottom":{order:8,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"end"},"bottom-right-corner":{order:9,Wa:!1,Ta:!0,Ua:!1,Va:!0,Ea:null},"bottom-right":{order:10,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"end"},"bottom-center":{order:11,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"center"},"bottom-left":{order:12,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"start"},"bottom-left-corner":{order:13,Wa:!1,Ta:!0,Ua:!0,Va:!1,Ea:null},"left-bottom":{order:14,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"end"},"left-middle":{order:15,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"center"},"left-top":{order:16,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"start"}},qb=Object.keys(Zb).sort(function(t,e){return Zb[t].order-Zb[e].order});function Qb(t,e,n){for(var i in sp.call(this,t,null,"vivliostyle-page-rule-master",[],e,null,0),t=Vb(n),new td(this.f,this,n,t),this.B={},function(t,e){var n=e._marginBoxes;n&&qb.forEach(function(i){n[i]&&(t.B[i]=new ed(t.f,t,i,e))})}(this,n),this.b.position=new Pa(In,0),this.b.width=new Pa(t.width,0),this.b.height=new Pa(t.height,0),n)Jb[i]||"background-clip"===i||(this.b[i]=n[i])}function td(t,e,n,i){for(var r in lp.call(this,t,null,null,[],e),this.D=i,this.b["z-index"]=new Pa(new Re(0),0),this.b["flow-from"]=new Pa(Le("body"),0),this.b.position=new Pa(Xe,0),this.b.overflow=new Pa(Gn,0),Jb)Jb.hasOwnProperty(r)&&(this.b[r]=n[r])}function ed(t,e,n,i){for(var r in lp.call(this,t,null,null,[],e),this.u=n,t=i._marginBoxes[this.u],i)e=i[r],n=t[r],(xa[r]||n&&n.value===bn)&&(this.b[r]=e);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e=t[r])&&e.value!==bn&&(this.b[r]=e)}function nd(t,e){Bp.call(this,t,e),this.u=null,this.ta={}}function id(t,e,n,i,r){this.H=t,this.B=r,this.j=n,this.u=!fp(i,e[n?"width":"height"],new ue(i,0,"px")),this.size=null}function rd(t){return t.size||(t.size=Fb(t.B,t.H.element,t.j?["max-content width","min-content width"]:["max-content height","min-content height"])),t.size}function od(t){this.j=t}function ad(t,e,n,i,r,o){id.call(this,t,e,n,i,r),this.l=o}function ud(t,e,n,i,r,o){var a,u=t.f.f,s={},h={},l={};for(a in e){var f=Zb[a];if(f){var c=e[a],p=t.ta[a],b=new id(c,p.style,n,u,o);s[f.Ea]=c,h[f.Ea]=p,l[f.Ea]=b}}t=i.start.evaluate(r),i.end.evaluate(r),e=i.va.evaluate(r);var d=sd(l,e),g=!1,v={};Object.keys(s).forEach(function(t){var e=fp(u,h[t].style[n?"max-width":"max-height"],i.va);e&&(e=e.evaluate(r),d[t]>e&&(e=l[t]=new ad(s[t],h[t].style,n,u,o,e),v[t]=e.f(),g=!0))}),g&&(d=sd(l,e),g=!1,["start","center","end"].forEach(function(t){d[t]=v[t]||d[t]}));var w={};Object.keys(s).forEach(function(t){var e=fp(u,h[t].style[n?"min-width":"min-height"],i.va);e&&(e=e.evaluate(r),d[t]<e&&(e=l[t]=new ad(s[t],h[t].style,n,u,o,e),w[t]=e.f(),g=!0))}),g&&(d=sd(l,e),["start","center","end"].forEach(function(t){d[t]=w[t]||d[t]}));var m=t+e,y=t+(t+e);["start","center","end"].forEach(function(t){var e=d[t];if(e){var i=s[t],r=0;switch(t){case"start":r=n?i.left:i.top;break;case"center":r=(y-e)/2;break;case"end":r=m-e}n?Bh(i,r,e-Fh(i)-Ph(i)):Mh(i,r,e-Oh(i)-Rh(i))}})}function sd(t,e){var n,i=t.start,r=t.center,o=t.end,a={};r?((n=hd(r,(n=[i,o].filter(function(t){return t})).length?new od(n):null,e)).Bb&&(a.center=n.Bb),r=(e-(r=n.Bb||r.f()))/2,i&&i.b()&&(a.start=r),o&&o.b()&&(a.end=r)):((i=hd(i,o,e)).Bb&&(a.start=i.Bb),i.Dd&&(a.end=i.Dd));return a}function hd(t,e,n){var i={Bb:null,Dd:null};if(t&&e)if(t.b()&&e.b()){var r=t.g(),o=e.g();0<r&&0<o?((o=r+o)<n?i.Bb=n*r/o:(e=(t=t.h())+(e=e.h()))<n?i.Bb=t+(n-e)*(r-t)/(o-e):0<e&&(i.Bb=n*t/e),0<i.Bb&&(i.Dd=n-i.Bb)):0<r?i.Bb=n:0<o&&(i.Dd=n)}else t.b()?i.Bb=Math.max(n-e.f(),0):e.b()&&(i.Dd=Math.max(n-t.f(),0));else t?t.b()&&(i.Bb=n):e&&e.b()&&(i.Dd=n);return i}function ld(t,e){zp.call(this,t,e),this.marginLeft=this.marginBottom=this.marginRight=this.marginTop=this.Jc=this.Kc=null}function fd(t,e){var n=t.style,i=t.f.f,r=e.start,o=e.end,a=e.va,u=t.f.D[a].Aa(i,null),s=fp(i,n[a],u),h=fp(i,n["margin-"+r],u),l=fp(i,n["margin-"+o],u),f=cp(i,n["padding-"+r],u),c=cp(i,n["padding-"+o],u),p=bp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],u),b=bp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],u),d=we(i,u,ve(i,ve(i,p,f),ve(i,b,c)));return s?(d=we(i,d,s),h||l?h?l=we(i,d,h):h=we(i,d,l):l=h=me(i,d,new pe(i,.5))):(h||(h=i.b),l||(l=i.b),s=we(i,d,ve(i,h,l))),n[r]=new ze(h),n[o]=new ze(l),n["margin-"+r]=Jn,n["margin-"+o]=Jn,n["padding-"+r]=new ze(f),n["padding-"+o]=new ze(c),n["border-"+r+"-width"]=new ze(p),n["border-"+o+"-width"]=new ze(b),n[a]=new ze(s),n["max-"+a]=new ze(s),{Gf:we(i,u,ve(i,h,l)),Zf:h,Yf:l}}function cd(t,e){zp.call(this,t,e);var n=e.u;this.u=Zb[n],t.ta[n]=this,this.ua=!0}function pd(t,e,n){function i(t){if(d)return d;d={va:b?b.evaluate(t):null,rb:s?s.evaluate(t):null,sb:h?h.evaluate(t):null};var e=u.evaluate(t),n=0;return[c,l,f,p].forEach(function(e){e&&(n+=e.evaluate(t))}),(null===d.rb||null===d.sb)&&n+d.va+d.rb+d.sb>e&&(null===d.rb&&(d.rb=0),null===d.sb&&(d.rh=0)),null!==d.va&&null!==d.rb&&null!==d.sb&&(d.sb=null),null===d.va&&null!==d.rb&&null!==d.sb?d.va=e-n-d.rb-d.sb:null!==d.va&&null===d.rb&&null!==d.sb?d.rb=e-n-d.va-d.sb:null!==d.va&&null!==d.rb&&null===d.sb?d.sb=e-n-d.va-d.rb:null===d.va?(d.rb=d.sb=0,d.va=e-n):d.rb=d.sb=(e-n-d.va)/2,d}var r=t.style;t=t.f.f;var o=e.De,a=e.Ke;e=e.va;var u=n["margin"+a.charAt(0).toUpperCase()+a.substring(1)],s=pp(t,r["margin-"+o],u),h=pp(t,r["margin-"+a],u),l=cp(t,r["padding-"+o],u),f=cp(t,r["padding-"+a],u),c=bp(t,r["border-"+o+"-width"],r["border-"+o+"-style"],u),p=bp(t,r["border-"+a+"-width"],r["border-"+a+"-style"],u),b=fp(t,r[e],u),d=null;r[e]=new ze(new le(t,function(){var t=i(this).va;return null===t?0:t},e)),r["margin-"+o]=new ze(new le(t,function(){var t=i(this).rb;return null===t?0:t},"margin-"+o)),r["margin-"+a]=new ze(new le(t,function(){var t=i(this).sb;return null===t?0:t},"margin-"+a)),"left"===o?r.left=new ze(ve(t,n.marginLeft,n.Kc)):"top"===o&&(r.top=new ze(ve(t,n.marginTop,n.Jc)))}function bd(t,e,n,i,r){this.f=t,this.l=e,this.h=n,this.b=i,this.g=r,this.j={},n=new Ht(t=this.l,e=new te(t,new ae(t,e=new se(t,"page-number"),new pe(t,2)),t.b)),t.values["recto-page"]=n,t.values["verso-page"]=e,"ltr"===(this.b.I||Pb(this.g))?(t.values["left-page"]=e,e=new Ht(t,e),t.values["right-page"]=e):(n=new Ht(t,e),t.values["left-page"]=n,t.values["right-page"]=e)}function dd(t,e){var n,i=[];for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r,o=e[n];r=o instanceof Pa?""+o.value:dd(t,o),i.push(n+r+(o.cb||""))}return i.sort().join("^")}function gd(t,e,n){var i=(n=n.clone({mc:"vivliostyle-page-rule-master"})).b;if(o=e.size){var r=Vb(e),o=o.cb;i.width=Ma(t.b,i.width,new Pa(r.width,o)),i.height=Ma(t.b,i.height,new Pa(r.height,o))}return["counter-reset","counter-increment"].forEach(function(t){i[t]&&(e[t]=i[t])}),(n=n.h(t.h)).l(t.f,t.g),Dp(n,t.b),n}function vd(t){this.b=null,this.h=t}function wd(t){this.b=null,this.h=t}function md(t){this.b=null,this.h=t}function yd(t){this.b=null,this.h=t}function xd(t){this.b=null,this.h=t}function Ed(t){this.b=null,this.h=t}function Sd(t,e){qa.call(this,t,e,null,null,null)}function kd(t,e,n,i,r){cs.call(this,t,e,null,n,null,i,!1),this.S=r,this.I=[],this.g="",this.F=[]}function Cd(t){var e;e=t.g||t.F.length?[t.g].concat(t.F.sort()):null,t.I.push({rf:e,ba:t.ba}),t.g="",t.F=[]}function Ad(t,e,n,i){Tr.call(this,t,e,!1),this.g=n,this.b=i}function Td(t){if(1>=t.length)return!1;var e=t[t.length-1].h;return t.slice(0,t.length-1).every(function(t){return e>t.h})}function Nd(t,e){t.b?t.width=e:t.height=e}function Id(t){return t.b?t.width:t.height}function _d(t,e){this.md=t,this.Tc=e}function Ld(t,e,n){this.b=t,this.F=e,this.B=n,this.f=Id(t)}function jd(t,e){var n=oi("ColumnBalancer#balanceColumns");t.u(e),Rd(t,e),Vh(t.b);var i=[Od(t,e)];return Ci(function(e){t.l(i)?(t.D(i),t.F().then(function(n){Rd(t,n),Vh(t.b),n?(i.push(Od(t,n)),Ni(e)):Ii(e)})):Ii(e)}).then(function(){var e=i.reduce(function(t,e){return e.Tc<t.Tc?e:t},i[0]);!function(t,e){var n=t.b.element;e.Fb.forEach(function(t){n.appendChild(t.element)}),function(t,e){e.forEach(function(t){this.children.push(t),_f(t)},t)}(t.B,e.ug)}(t,e.md),Nd(t.b,t.f),xi(n,e.md)}),n.result()}function Od(t,e){return new _d(e,t.j(e))}function Rd(t,e){var n=function(t){return(t=t.children.splice(0)).forEach(function(t){t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})}),t}(t.B);e&&(e.ug=n)}function Fd(t){var e=t[t.length-1];return!(!e.Tc||(t=t[t.length-2])&&e.Tc>=t.Tc)&&(t=e.md.Fb,(e=Math.max.apply(null,t.map(function(t){return t.h})))>(t=Math.max.apply(null,t.map(function(t){return function(t){var e=af(t).b;return t.b.length?Math.max.apply(null,t.b.map(function(t){return t=t.b,e?t.width:t.height})):0}(t.l)})))+1)}function Pd(t,e){var n=Math.max.apply(null,t[t.length-1].md.Fb.map(function(t){return isNaN(t.jf)?t.h:t.h-t.jf+1}))-1;n<Id(e)?Nd(e,n):Nd(e,Id(e)-1)}function Dd(t,e,n,i){Ld.call(this,n,t,e),this.G=i,this.h=null,this.g=!1}function Md(t,e){return t.h?Lh(t.h,e):!e}function Bd(t,e,n){Ld.call(this,n,t,e)}g(Qb,sp),Qb.prototype.h=function(t){return new nd(t,this)},g(td,lp),td.prototype.h=function(t){return new ld(t,this)},g(ed,lp),ed.prototype.h=function(t){return new cd(t,this)},g(nd,Bp),nd.prototype.l=function(t,e){var n,i=this.J;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))switch(n){case"writing-mode":case"direction":i[n]=e[n]}Bp.prototype.l.call(this,t,e)},nd.prototype.Ae=function(){var t=this.style;t.left=Jn,t["margin-left"]=Jn,t["border-left-width"]=Jn,t["padding-left"]=Jn,t["padding-right"]=Jn,t["border-right-width"]=Jn,t["margin-right"]=Jn,t.right=Jn},nd.prototype.Be=function(){var t=this.style;t.top=Jn,t["margin-top"]=Jn,t["border-top-width"]=Jn,t["padding-top"]=Jn,t["padding-bottom"]=Jn,t["border-bottom-width"]=Jn,t["margin-bottom"]=Jn,t.bottom=Jn},nd.prototype.ca=function(t,e,n){e=e.I;var i={start:this.u.marginLeft,end:this.u.marginRight,va:this.u.Kc},r={start:this.u.marginTop,end:this.u.marginBottom,va:this.u.Jc};ud(this,e.top,!0,i,t,n),ud(this,e.bottom,!0,i,t,n),ud(this,e.left,!1,r,t,n),ud(this,e.right,!1,r,t,n)},id.prototype.b=function(){return this.u},id.prototype.g=function(){var t=rd(this);return this.j?Fh(this.H)+t["max-content width"]+Ph(this.H):Oh(this.H)+t["max-content height"]+Rh(this.H)},id.prototype.h=function(){var t=rd(this);return this.j?Fh(this.H)+t["min-content width"]+Ph(this.H):Oh(this.H)+t["min-content height"]+Rh(this.H)},id.prototype.f=function(){return this.j?Fh(this.H)+this.H.width+Ph(this.H):Oh(this.H)+this.H.height+Rh(this.H)},od.prototype.b=function(){return this.j.some(function(t){return t.b()})},od.prototype.g=function(){var t=this.j.map(function(t){return t.g()});return Math.max.apply(null,t)*t.length},od.prototype.h=function(){var t=this.j.map(function(t){return t.h()});return Math.max.apply(null,t)*t.length},od.prototype.f=function(){var t=this.j.map(function(t){return t.f()});return Math.max.apply(null,t)*t.length},g(ad,id),ad.prototype.b=function(){return!1},ad.prototype.g=function(){return this.f()},ad.prototype.h=function(){return this.f()},ad.prototype.f=function(){return this.j?Fh(this.H)+this.l+Ph(this.H):Oh(this.H)+this.l+Rh(this.H)},nd.prototype.kc=function(t,e,n,i,r){nd.ng.kc.call(this,t,e,n,i,r),e.element.setAttribute("data-vivliostyle-page-box",!0)},g(ld,zp),ld.prototype.l=function(t,e){var n,i=this.J;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(n.match(/^column.*$/)||n.match(/^background-/))&&(i[n]=e[n]);zp.prototype.l.call(this,t,e),n=this.g,i={Kc:this.Kc,Jc:this.Jc,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft},n.u=i,(n=n.style).width=new ze(i.Kc),n.height=new ze(i.Jc),n["padding-left"]=new ze(i.marginLeft),n["padding-right"]=new ze(i.marginRight),n["padding-top"]=new ze(i.marginTop),n["padding-bottom"]=new ze(i.marginBottom)},ld.prototype.Ae=function(){var t=fd(this,{start:"left",end:"right",va:"width"});this.Kc=t.Gf,this.marginLeft=t.Zf,this.marginRight=t.Yf},ld.prototype.Be=function(){var t=fd(this,{start:"top",end:"bottom",va:"height"});this.Jc=t.Gf,this.marginTop=t.Zf,this.marginBottom=t.Yf},ld.prototype.kc=function(t,e,n,i,r){zp.prototype.kc.call(this,t,e,n,i,r),n.G=e.element,t.ca=parseFloat(n.G.style.width),t.Z=parseFloat(n.G.style.height)},g(cd,zp),(n=cd.prototype).kc=function(t,e,n,i,r){var o=e.element;M(o,"display","flex");var a=xp(this,t,"vertical-align"),u=null;a===Le("middle")?u="center":a===Le("top")?u="flex-start":a===Le("bottom")&&(u="flex-end"),u&&(M(o,"flex-flow",this.b?"row":"column"),M(o,"justify-content",u)),zp.prototype.kc.call(this,t,e,n,i,r)},n.Ea=function(t,e){var n=this.style,i=this.f.f,r=t.start,o=t.end,a=(s="left"===r)?e.Kc:e.Jc,u=fp(i,n[t.va],a),s=s?e.marginLeft:e.marginTop;if("start"===this.u.Ea)n[r]=new ze(s);else if(u){var h=cp(i,n["margin-"+r],a),l=cp(i,n["margin-"+o],a),f=cp(i,n["padding-"+r],a),c=cp(i,n["padding-"+o],a),p=bp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],a);o=bp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],a),u=ve(i,u,ve(i,ve(i,f,c),ve(i,ve(i,p,o),ve(i,h,l))));switch(this.u.Ea){case"center":n[r]=new ze(ve(i,s,ye(i,we(i,a,u),new pe(i,2))));break;case"end":n[r]=new ze(we(i,ve(i,s,a),u))}}},n.Ae=function(){var t=this.g.u;this.u.Ua?pd(this,{De:"right",Ke:"left",va:"width"},t):this.u.Va?pd(this,{De:"left",Ke:"right",va:"width"},t):this.Ea({start:"left",end:"right",va:"width"},t)},n.Be=function(){var t=this.g.u;this.u.Wa?pd(this,{De:"bottom",Ke:"top",va:"height"},t):this.u.Ta?pd(this,{De:"top",Ke:"bottom",va:"height"},t):this.Ea({start:"top",end:"bottom",va:"height"},t)},n.Qd=function(t,e,n,i,r,o,a){zp.prototype.Qd.call(this,t,e,n,i,r,o,a),t=n.I,n=this.f.u,(i=this.u).Ua||i.Va?i.Wa||i.Ta||(i.Ua?t.left[n]=e:i.Va&&(t.right[n]=e)):i.Wa?t.top[n]=e:i.Ta&&(t.bottom[n]=e)},g(vd,Qa),vd.prototype.apply=function(t){t.Z===this.h&&this.b.apply(t)},vd.prototype.f=function(){return 3},vd.prototype.g=function(t){return this.b&&Ju(t.od,this.h,this.b),!0},g(wd,Qa),wd.prototype.apply=function(t){1===new se(this.h,"page-number").evaluate(t.l)&&this.b.apply(t)},wd.prototype.f=function(){return 2},g(md,Qa),md.prototype.apply=function(t){new se(this.h,"left-page").evaluate(t.l)&&this.b.apply(t)},md.prototype.f=function(){return 1},g(yd,Qa),yd.prototype.apply=function(t){new se(this.h,"right-page").evaluate(t.l)&&this.b.apply(t)},yd.prototype.f=function(){return 1},g(xd,Qa),xd.prototype.apply=function(t){new se(this.h,"recto-page").evaluate(t.l)&&this.b.apply(t)},xd.prototype.f=function(){return 1},g(Ed,Qa),Ed.prototype.apply=function(t){new se(this.h,"verso-page").evaluate(t.l)&&this.b.apply(t)},Ed.prototype.f=function(){return 1},g(Sd,qa),Sd.prototype.apply=function(t){var e=t.l,n=t.F,i=this.style;if(Ha(e,n,i,t=this.ba,null,null,null),i=i._marginBoxes){var r;n=Va(n,"_marginBoxes");for(r in i)if(i.hasOwnProperty(r)){var o=n[r];o||(o={},n[r]=o),Ha(e,o,i[r],t,null,null,null)}}},g(kd,cs),(n=kd.prototype).Vc=function(){this.Tb()},n.Wb=function(t,e){(this.g=e)&&(this.b.push(new vd(e)),this.ba+=65536)},n.qd=function(t,e){switch(e&&_r(this,"E_INVALID_PAGE_SELECTOR :"+t+"("+e.join("")+")"),this.F.push(":"+t),t.toLowerCase()){case"first":this.b.push(new wd(this.f)),this.ba+=256;break;case"left":this.b.push(new md(this.f)),this.ba+=1;break;case"right":this.b.push(new yd(this.f)),this.ba+=1;break;case"recto":this.b.push(new xd(this.f)),this.ba+=1;break;case"verso":this.b.push(new Ed(this.f)),this.ba+=1;break;default:_r(this,"E_INVALID_PAGE_SELECTOR :"+t)}},n.Sc=function(){Cd(this),cs.prototype.Sc.call(this)},n.La=function(){Cd(this),cs.prototype.La.call(this)},n.Sb=function(t,e,n){if("bleed"!==t&&"marks"!==t||this.I.some(function(t){return!t.rf})){cs.prototype.Sb.call(this,t,e,n);var i=this.mb[t],r=this.S;if("bleed"===t||"marks"===t)r[""]||(r[""]={}),Object.keys(r).forEach(function(e){za(r[e],t,i)});else if("size"===t){var o=r[""];this.I.forEach(function(e){var n=new Pa(i.value,i.cb+e.ba);e=e.rf?e.rf.join(""):"";var a=r[e];a?(n=(e=a[t])?Ma(null,n,e):n,za(a,t,n)):(za(a=r[e]={},t,n),o&&["bleed","marks"].forEach(function(t){o[t]&&za(a,t,o[t])},this))},this)}}},n.Uf=function(t){Ju(this.l.od,"*",t)},n.Xf=function(t){return new Sd(this.mb,t)},n.Qe=function(t){var e=Va(this.mb,"_marginBoxes"),n=e[t];n||(n={},e[t]=n),Ar(this.oa,new Ad(this.f,this.oa,this.B,n))},g(Ad,Nr),Ad.prototype.Qb=function(t,e,n){ma(this.g,t,e,n,this)},Ad.prototype.kd=function(t,e){Ir(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Ad.prototype.fe=function(t,e){Ir(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Ad.prototype.Sb=function(t,e,n){za(this.b,t,new Pa(e,n?Sr(this):kr(this)))},Ld.prototype.u=function(){},g(Dd,Ld),Dd.prototype.u=function(t){var e=t.Fb.reduce(function(t,e){return t+e.h},0);Nd(this.b,e/this.G),this.h=t.position},Dd.prototype.j=function(t){return Md(this,t.position)?Td(t=t.Fb)?1/0:Math.max.apply(null,t.map(function(t){return t.h})):1/0},Dd.prototype.l=function(t){return 1===t.length||(this.g?Fd(t):Md(this,(t=t[t.length-1]).md.position)&&!Td(t.md.Fb)?this.g=!0:Id(this.b)<this.f)},Dd.prototype.D=function(t){this.g?Pd(t,this.b):Nd(this.b,Math.min(this.f,Id(this.b)+.1*this.f))},g(Bd,Ld),Bd.prototype.j=function(t){return t.Fb.every(function(t){return!t.h})?1/0:function(t){var e=Sv(t);return Sv(t.map(function(t){return(t-=e)*t}))}(t=t.Fb.filter(function(t){return!t.g}).map(function(t){return t.h}))},Bd.prototype.l=function(t){return Fd(t)},Bd.prototype.D=function(t){Pd(t,this.b)};var Ud=new _i(function(){var t=oi("uaStylesheetBase");return ya.get().then(function(e){var n=I("user-agent-base.css",N);(e=new cs(null,null,null,null,null,e,!0)).Wc("UA"),fs=e.l,no(n,e,null,null).Ga(t)}),t.result()},"uaStylesheetBaseFetcher");function zd(t,e,n,i,r,o,a,u,s,h){this.j=t,this.f=e,this.b=n,this.g=i,this.I=r,this.D=o,this.B=t.S,this.F=a,this.h=u,this.u=s,this.G=h,this.l=t.l,function(t,e){t.B["has-content"]=e}(this.b,function(t){var e,n,i=this.b;return e=(e=i.b[t])&&(e=e.b[0])?e.qa:null,(n=$d(this,(n=i.b[t])?n.g:"any"))&&(n=!!(t=i.b[t])&&(0<t.b.length&&t.b[0].qa.f<=this.D)),n&&!!e&&!Kd(this,e)}),function(t,e){t.values["page-number"]=e}(this.b,new le(this.b,function(){return this.ta+this.b.page},"page-number"))}function Vd(t,e,n,i,r){if(t.u.length){var o=new Lt(0,e,n,i);t=t.u;for(var a={},u=0;u<t.length;u++)Ha(o,a,t[u],0,null,null,null);u=a.width,t=a.height;var s=a["text-zoom"];if((u&&t||s)&&(a=It.em,(s?s.evaluate(o,"text-zoom"):null)===jn&&(s=a/i,i=a,e*=s,n*=s),u&&t&&(u=Ve(u.evaluate(o,"width"),o),o=Ve(t.evaluate(o,"height"),o),0<u&&0<o)))return{width:r&&r.ub?2*(u+r.Dc):u,height:o,fontSize:i}}return{width:e,height:n,fontSize:i}}function Xd(t,e,n,i,r,o,a,u,s,h,l,f){for(var c in Lt.call(this,0,i.width,i.height,i.fontSize),this.style=t,this.da=e,this.lang=e.lang||n,this.viewport=i,this.l={body:!0},this.g=r,this.B=this.b=this.N=this.f=this.F=null,this.D=0,this.Mb=o,this.j=new Al(this.style.B),this.ob={},this.sa=null,this.h=l,this.Zb=new nf(null,null,null,null,null,null,null),this.la={},this.I=f||null,this.Kb=a,this.Jb=u,this.ta=s,this.Lb=h,t.h)(e=t.h[c]["flow-consume"])&&(e.evaluate(this,"flow-consume")==He?this.l[c]=!0:delete this.l[c]);this.xb={},this.Ba=this.ua=0}function Hd(t){var e=oi("StyleInstance.init"),n=new Gc(t.h,t.da.url),i=new Yc(t.h,t.da.url,t.style.f,t.style.b);t.f=new ll(t.da,t.style.g,t.style.f,t,t.l,t.style.l,n,i),i.h=t.f,function(t,e){t.N=e;for(var n=0;n<t.J.length;n++)Gd(t.N,t.J[n],t.G[t.J[n].b])}(t.f,t),t.N={},t.N[t.da.url]=t.f;var r=function(t){for(var e=0;!t.I&&ml(t,e+=5e3,0)!=Number.POSITIVE_INFINITY;);return t.F}(t.f);for(t.I||(t.I=Pb(r)),t.F=new Mp(t.style.I),n=new Zu(t.style.g,t,n,i),t.F.l(n,r),Dp(t.F,t),t.sa=new bd(n,t.style.b,t.F,t,r),r=[],i=(n=l(t.style.D)).next();!i.done;i=n.next())(!(i=i.value).ia||i.ia.evaluate(t))&&(i=new kl(i=Sl(i.Ec,t)),r.push(i));(function(t,e,n){for(var i=[],r=(e=l(e)).next();!r.done;r=e.next())(r=r.value).src&&r.b?i.push(_l(t,r,n)):C.b("E_FONT_FACE_INVALID");return Li(i)})(t.Mb,r,t.j).Ga(e);var o=t.style.G;return Object.keys(o).forEach(function(t){var e=Xb(Vb(o[t]),this);this.xb[t]={width:e.jc+2*e.qe,height:e.ic+2*e.qe}},t),e.result()}function Gd(t,e,n){(t=t.b)&&(t.f[e.b]||(t.f[e.b]=n),(n=t.b[e.b])||(n=new Nh,t.b[e.b]=n),n.b.push(new Th(new Ch({pa:[{node:e.element,kb:ph,wa:null,Ja:null,Fa:null,Sa:0}],na:0,K:!1,Qa:null}),e)))}function Yd(t,e){for(var n=Number.POSITIVE_INFINITY,i=0;i<e.b.length;i++){for(var r=e.b[i].b.f,o=r.pa[0].node,a=r.na,u=r.K,s=0;o.ownerDocument!=t.da.b;)s++,o=r.pa[s].node,u=!1,a=0;(r=Os(t.da,o,a,u))<n&&(n=r)}return n}function Wd(t,e,n){if(!e)return 0;var i,r=Number.POSITIVE_INFINITY;for(i in t.l){var o=e.b[i];if(!(n||o&&o.b.length)&&t.b){(o=t.f).S=i;for(var a=0;null!=o.S&&ml(o,a+=5e3,0)!=Number.POSITIVE_INFINITY;);o=t.b.b[i],e!=t.b&&o&&(o=o.clone(),e.b[i]=o)}o&&((o=Yd(t,o))<r&&(r=o))}return r}function $d(t,e){switch(e){case"left":case"right":case"recto":case"verso":return new se(t.style.b,e+"-page").evaluate(t);default:return!0}}function Kd(t,e){if(r=(o=t.B.f)[e.b].f){var n=e.f,i=o[r].b;if(!i.length||n<i[0])return!1;var r,o=K(i.length,function(t){return i[t]>n})-1,a=(o=i[o],Yd(t,r=t.B.b[r]));return!(o<a)&&(a<o||!$d(t,r.g))}return!1}function Jd(t,e,n){var i=t.b.b[n];if(!i||!$d(t,i.g))return ai(!0);i.g="any",function(t,e,n){(t=t.b.f[n]).C||(t.C=new Hf(null)),e.kf=t.C}(t,e,n),_c(e),t.l[n]&&0<e.Cb.length&&(e.Kb=!1);var r=oi("layoutColumn");return function(t){var e=t.l,n=mf(e),i=oi("layoutDeferredPageFloats"),r=!1,o=0;return Ci(function(i){if(o===n.length)Ii(i);else{var a=n[o++],u=a.ja,s=Of(u),h=s.xf(u,e);h&&tf(h,u)?Ni(i):lf(e,u)||wf(e,u)?(vf(e,a),Ii(i)):sc(t,a,s,null,h).then(function(t){t?(t=Cf(e.parent))?Ii(i):(Cf(e)&&!t&&(r=!0,e.Qc=!1),Ni(i)):Ii(i)})}}).then(function(){r&&kf(e),xi(i,!0)}),i.result()}(e).then(function(){if(Cf(e.l))xi(r,!0);else{var o=[],a=[],u=!0;Ci(function(r){if(!function(t,e){return bf(t,function(t){return t.g&&t.Ob[0].ja.f===e})}(e.l,n))for(var s={};0<i.b.length-a.length;){for(s.index=0;a.includes(s.index);)s.index++;if(s.selected=i.b[s.index],s.selected.qa.f>t.D||Kd(t,s.selected.qa))break;for(var h=s.index+1;h<i.b.length;h++)if(!a.includes(h)){var l=i.b[h];if(l.qa.f>t.D||Kd(t,l.qa))break;ah(l.qa,s.selected.qa)&&(s.selected=l,s.index=h)}if(s.qa=s.selected.qa,s.Oa=!0,Oc(e,s.selected.b,u,i.f).then(function(t){return function(n){if(Cf(e.l))Ii(r);else if(u=!1,t.selected.qa.u&&(null===n||t.qa.h)&&o.push(t.index),t.qa.h)a.push(t.index),Ii(r);else{var s,h=!!n||!!e.g;0<yf(e.l).length&&e.xb?n?(s=n.clone()).f=e.xb:s=new Ch(e.xb):s=null,e.g&&s?(t.selected.b=s,i.f=e.g,e.g=null):(a.push(t.index),(n||s)&&(t.selected.b=n||s,o.push(t.index)),e.g&&(i.g=Rl(e.g))),h?Ii(r):(e.Kb=!1,t.Oa?t.Oa=!1:Ni(r))}}}(s)),s.Oa)return void(s.Oa=!1);s={selected:s.selected,qa:s.qa,index:s.index,Oa:s.Oa}}Ii(r)}).then(function(){if(!Cf(e.l)){i.b=i.b.filter(function(t,e){return o.includes(e)||!a.includes(e)}),"column"===i.f&&(i.f=null),Rc(e);var t=function(t){var e=af(t).b;return t.b.reduce(function(t,n){var i=Gh(n.b);return e?Math.min(t,i.V):Math.max(t,i.R)},e?1/0:0)}(e.l);jc(e,t)}xi(r,!0)})}}),r.result()}function Zd(t,e,n,i,r,o,a,u,s,h,l,f,c,p,b){var d,g=e.b?e.j&&e.N:e.h&&e.S,v=o.element,w=new nf(s,"column",null,u,null,null,null),m=t.b.clone(),y=oi("createAndLayoutColumn");return Ci(function(e){var y=new Mf([new ep(t.h,t.b.page-1)].concat(function t(e){return(e.parent?t(e.parent):[]).concat(e.D)}(w)));if(1<h){var x=t.viewport.b.createElement("div");M(x,"position","absolute"),v.appendChild(x),(d=new Gf(x,p,t.g,y,w)).Kb=b,d.b=o.b,d.Mb=o.Mb,d.Rd=o.Rd,o.b?(y=a*(f+l)+o.J,Bh(d,o.I,o.width),Mh(d,y,f)):(y=a*(f+l)+o.I,Mh(d,o.J,o.height),Bh(d,y,f)),d.F=n,d.G=i}else(function(t,e){t.element=e.element,t.left=e.left,t.top=e.top,t.marginLeft=e.marginLeft,t.marginRight=e.marginRight,t.marginTop=e.marginTop,t.marginBottom=e.marginBottom,t.Z=e.Z,t.Za=e.Za,t.ca=e.ca,t.Ba=e.Ba,t.I=e.I,t.Y=e.Y,t.J=e.J,t.S=e.S,t.width=e.width,t.height=e.height,t.F=e.F,t.G=e.G,t.Lb=e.Lb,t.ob=e.ob,t.h=e.h,t.Rd=e.Rd,t.Mb=e.Mb,t.b=e.b})(d=new Gf(v,p,t.g,y,w),o);d.ob=g?[]:r.concat(),d.Lb=c,uf(w,d),0<=d.width?Jd(t,d,u).then(function(){Cf(w)||Ef(w),Cf(d.l)&&!Cf(s)?(d.l.Qc=!1,t.b=m.clone(),d.element!==v&&v.removeChild(d.element),Ni(e)):Ii(e)}):(Ef(w),Ii(e))}).then(function(){xi(y,d)}),y.result()}function qd(t,e,n,i,r,o,a,u,s,h){function l(){return f.b=c.clone(),function(t,e,n,i,r,o,a,u,s,h,l,f){var c=oi("layoutFlowColumns"),p=t.b.clone(),b=Ep(n,t,"column-gap"),d=1<l?Ep(n,t,"column-width"):s.width,g=Sp(n,t),v=Ro(xp(n,t,"shape-inside"),0,0,s.width,s.height,t),w=new ab(h,t,t.viewport,t.f,g,t.da,t.j,t.style.F,t,e,t.Kb,t.Jb,t.Lb),m=0,y=null,x=[];return Ci(function(e){Zd(t,n,i,r,o,s,m++,h,u,l,b,d,v,w,f).then(function(n){Cf(a)?(x=null,Ii(e)):((n.g&&"column"!==n.g||m===l)&&!Cf(u)&&Ef(u),Cf(u)?(m=0,t.b=p.clone(),u.Qc=!1,u.g?(x=null,Ii(e)):Ni(e)):(y=n,x[m-1]=y,y.g&&"column"!=y.g&&(m=l,"region"!=y.g&&(t.la[h]=!0)),m<l?Ni(e):Ii(e)))})}).then(function(){xi(c,x)}),c.result()}(f,e,n,i,r,o,a,p,u,s,h,b).ea(function(t){return ai(t?{Fb:t,position:f.b}:null)})}var f=t,c=f.b.clone(),p=function(t,e,n,i,r){return new nf(e,"region",i,r,null,xp(n,t,"writing-mode")||null,t=xp(n,t,"direction")||null)}(f,a,n,u,s),b=!0;return l().ea(function(t){if(!t)return ai(null);if(1>=h)return ai(t.Fb);var e=xp(n,f,"column-fill")||We;return(e=function(t,e,n,i,r,o,a){return e===Ye?null:(o=!(!(o=o[o.length-1])||!o.g),!a.b.length||o?new Dd(n,i,r,t):e===$e?new Bd(n,i,r):null)}(h,e,l,p,u,t.Fb,f.b.b[s]))?(b=!1,a.g=!0,p.g=!0,jd(e,t).ea(function(t){return a.g=!1,a.Qc=!1,p.g=!1,f.b=t.position,ai(t.Fb)})):ai(t.Fb)})}function Qd(t,e,n,i,r,o,a,u){if(function(t){t.I=0,t.G=0}(n),(l=xp(n,t,"enabled"))&&l!==Yn)return ai(!0);var s=oi("layoutContainer"),h=xp(n,t,"wrap-flow")===Ye,l=xp(n,t,"flow-from"),f=t.viewport.b.createElement("div"),c=xp(n,t,"position");M(f,"position",c?c.name:"absolute"),i.insertBefore(f,i.firstChild);var p=new jh(f);p.b=n.b,p.ob=a,n.kc(t,p,e,t.j,t.g),p.F=r,p.G=o,r+=p.left+p.marginLeft+p.Z,o+=p.top+p.marginTop+p.ca,(n instanceof ld||n instanceof Bp&&!(n instanceof nd))&&uf(u,p);var b=!1;if(l&&l.Vf())if(t.la[l.toString()])Cf(u)||n.Qd(t,p,e,null,1,t.g,t.j),l=ai(!0);else{var d=oi("layoutContainer.inner"),g=l.toString(),v=Ep(n,t,"column-count");qd(t,e,n,r,o,a,u,p,g,v).then(function(i){if(!Cf(u)){var r=i[0];r.element===f&&(p=r),p.h=Math.max.apply(null,i.map(function(t){return t.h})),n.Qd(t,p,e,r,v,t.g,t.j),(i=t.b.b[g])&&"region"===i.f&&(i.f=null)}xi(d,!0)}),l=d.result()}else{if((l=xp(n,t,"content"))&&Wh(l)){c="span",l.url&&(c="img");var w=t.viewport.b.createElement(c);l.fa(new Yh(w,t,l,tp(t.h))),f.appendChild(w),"img"==c&&function(t,e,n,i){for(var r=0;r<Fp.length;r++)kp(t,e,n,Fp[r],i)}(n,t,w,t.j),function(t,e,n,i){for(var r=0;r<Rp.length;r++)kp(t,e,n.element,Rp[r],i)}(n,t,p,t.j)}else n.ua&&(i.removeChild(f),b=!0);b||n.Qd(t,p,e,null,1,t.g,t.j),l=ai(!0)}return l.then(function(){if(Cf(u))xi(s,!0);else{if(!n.h||0<Math.floor(p.h)){if(!b&&!h){var l=xp(n,t,"shape-outside");l=Hh(p,l,t);a.push(l)}}else if(!n.children.length)return i.removeChild(f),void xi(s,!0);var c=n.children.length-1;ki(function(){for(;0<=c;){var i=n.children[c--];if((i=Qd(t,e,i,f,r,o,a,u)).Xa())return i.ea(function(){return ai(!Cf(u))});if(Cf(u))break}return ai(!1)}).then(function(){xi(s,!0)})}}),s.result()}function tg(t,e,n){var i=e.H===e.h;t.la={},n?(t.b=n.clone(),gl(t.f,n.g)):(t.b=new _h,gl(t.f,-1)),t.lang&&e.h.setAttribute("lang",t.lang),(n=t.b).page++,jt(t,t.style.b),t.B=n.clone();var r=i?{}:function(t){var e={};return es(t.f,[],"",e),ls(t.f),e}(t.sa),o=function(t,e){var n=t.b,i=Wd(t,n);if(i==Number.POSITIVE_INFINITY)return null;for(var r,o=t.F.children,a=0;a<o.length;a++)if("vivliostyle-page-rule-master"!==(r=o[a]).f.mc){var u=1;(s=xp(r,t,"utilization"))&&s.hf()&&(u=s.L);var s=Ot(t,"em",!1),h=t.jc()*t.ic();for(s in t.D=ml(t.f,i,Math.ceil(u*h/(s*s))),u=t,s=void 0,n.b)if((h=n.b[s])&&0<h.b.length){var f=h.b[0].qa;if(Yd(u,h)===f.f){t:switch(f=h.g,f){case"left":case"right":case"recto":case"verso":break t;default:f=null}h.g=Rl(Ol(f,h.b[0].qa.g))}}for(h in t.B=n.clone(),s=(u=t).b.page,h=void 0,u.b.b)for(var c=(f=u.b.b[h]).b.length-1;0<=c;c--){var p=f.b[c];0>p.qa.wb&&p.qa.f<u.D&&(p.qa.wb=s)}if(jt(t,t.style.b),!(u=xp(r,t,"enabled"))||u===Yn){for(i in n=t,C.debug("Location - page",n.b.page),C.debug("  current:",i),C.debug("  lookup:",n.D),i=void 0,n.b.b)for(a=(o=l(n.b.b[i].b)).next();!a.done;a=o.next())C.debug("  Chunk",i+":",a.value.qa.f);return i=t.sa,o=r,r=e,n=o.f,Object.keys(r).length?(o=n,a=dd(i,r),o=o.j+"^"+a,(a=i.j[o])||("background-host"===n.mc?((r=new Qb((n=i).l,n.h.f,r).h(n.h)).l(n.f,n.g),Dp(r,n.b),a=r):a=gd(i,r,n),i.j[o]=a),(r=a.f).f.g=r,r=a):(n.f.g=n,r=o),r}}throw Error("No enabled page masters")}(t,r);if(!o)return ai(null);var a=0;if(!i){!function(t,e){(t.F=e)?t.H.setAttribute("data-vivliostyle-auto-page-width",!0):t.H.removeAttribute("data-vivliostyle-auto-page-width")}(e,o.f.b.width.value===$n),function(t,e){(t.D=e)?t.H.setAttribute("data-vivliostyle-auto-page-height",!0):t.H.removeAttribute("data-vivliostyle-auto-page-height")}(e,o.f.b.height.value===Kn),t.h.j=e,function(t,e,n){var i,r;if(t.G=Xc(t.b),(a=e["counter-reset"])&&(a=a.evaluate(n))&&(i=Po(a,!0)),i)for(var o in i){var a=t,u=o,s=i[o];a.b[u]?a.b[u].push(s):a.b[u]=[s]}for(var h in(e=e["counter-increment"])&&(n=e.evaluate(n))&&(r=Po(n,!1)),r?"page"in r||(r.page=1):r={page:1},r)t.b[h]||(e=h,(n=t).b[e]?n.b[e].push(0):n.b[e]=[0]),(n=t.b[h])[n.length-1]+=r[h]}(t.h,r,t);var u=Xb(Vb(r),t);!function(t,e,n){t.Y=e.jc,t.S=e.ic,t.Ba=e.jc+2*e.qe,t.ua=e.ic+2*e.qe,n.H.style.width=t.Ba+"px",n.H.style.height=t.ua+"px",n.h.style.left=e.ac+"px",n.h.style.right=e.ac+"px",n.h.style.top=e.ac+"px",n.h.style.bottom=e.ac+"px",n.h.style.padding=e.$b+"px",n.h.style.paddingTop=e.$b+.01+"px"}(t,u,e),$b(r,u,e,t),a=u.ac+u.$b}r=!i&&xp(o,t,"writing-mode")||pn,t.G=r!=pn;u=xp(o,t,"direction")||Sn;var s=new nf(t.Zb,"page",null,null,null,r,u),h=oi("layoutNextPage");return Ci(function(n){Qd(t,e,o,e.h,a,a,[],s).then(function(){Cf(s)||Ef(s),Cf(s)?(t.b=t.B.clone(),s.Qc=!1,Ni(n)):Ii(n)})}).then(function(){if(o.ca(t,e,t.g),!i){var r=new se(o.f.f,"left-page");e.b=r.evaluate(t)?"left":"right",function(t){var e,n=t.b.page;for(e in t.b.b)for(var i=t.b.b[e],r=i.b.length-1;0<=r;r--){var o=i.b[r];0<=o.qa.wb&&o.qa.wb+o.qa.l-1<=n&&i.b.splice(r,1)}}(t),n=t.b,Object.keys(n.b).forEach(function(e){var i=(e=n.b[e]).f;!i||"page"!==i&&$d(t,i)||(e.f=null)})}t.b=t.B=null,n.g=t.f.b,function(t,e,n){Object.keys(t.g).forEach(function(t){for(var e=this.g[t],n=0;n<e.length;)this.H.contains(e[n])?n++:e.splice(n,1);e.length||delete this.g[t]},t);for(var i=t.l,r=0;r<i.length;r++){var o=i[r];(o.target!==t.H||"transform"!==o.name||t.F||t.D)&&M(o.target,o.name,o.value.toString())}for(r=_b(n,t.H),t.f.width=r.width,t.f.height=r.height,r=0;r<e.length;r++)if(n=e[r],o=t.g[n.sd],i=t.g[n.Hg],o&&i&&(o=Qs(o,n.action)))for(var a=0;a<i.length;a++)i[a].addEventListener(n.event,o,!1)}(e,t.style.j.N[t.da.url],t.g),function(t,e){for(var n in t.l){var i=e.b[n];if(i&&0<i.b.length)return!1}return!0}(t,n)&&(n=null),xi(h,n)}),h.result()}function eg(t,e,n,i){cs.call(this,t.j,t,e,n,i,t.h,!n),this.g=t,this.F=!1}function ng(t){var e,n=t.getAttribute("content");if(!n)return"";for(t={};e=n.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/);)n=n.substr(e[0].length),t[e[1]]=e[2];return n=t.width-0,t=t.height-0,n&&t?"@-epubx-viewport{width:"+n+"px;height:"+t+"px;}":""}function ig(t){Cr.call(this),this.h=t,this.j=new At(null),this.u=new At(this.j),this.G=new ap(this.j),this.J=new eg(this,null,null,null),this.N=0,this.B=[],this.D={},this.l={},this.I=[],this.F={},this.b=this.J}function rg(t,e){return ug(e,t)}function og(t){mr.call(this,rg,"document"),this.S=t,this.I={},this.u={},this.g={},this.N={},this.l=null,this.b=[],this.J=!1}function ag(t,e,n){!function(t,e,n){t.b.splice(0),e&&e.forEach(t.Y,t),n&&n.forEach(t.Z,t)}(t,e,n);var i=I("user-agent.xml",N),r=oi("OPSDocStore.init");return ya.get().then(function(e){t.l=e,Ud.get().then(function(){t.load(i).then(function(){t.J=!0,xi(r,!0)})})}),r.result()}function ug(t,e){var n=oi("OPSDocStore.load"),i=e.url,r=i.endsWith("?viv-toc-box");return Bs(e,t).then(function(e){if(e){if(t.J)for(var o=ni("PREPROCESS_SINGLE_DOCUMENT"),a=0;a<o.length;a++)try{o[a](e.b)}catch(t){C.b("Error during single document preprocessing:",t)}o=[];var u=e.b.getElementsByTagNameNS("http://www.idpf.org/2007/ops","trigger");for(a=0;a<u.length;a++){var s=(f=u[a]).getAttributeNS("http://www.w3.org/2001/xml-events","observer"),h=f.getAttributeNS("http://www.w3.org/2001/xml-events","event"),l=f.getAttribute("action"),f=f.getAttribute("ref");s&&h&&l&&f&&o.push({Hg:s,event:h,action:l,sd:f})}t.N[i]=o;var c=[];if(c.push({url:I("user-agent-page.css",N),text:null,qb:"UA",Pa:null,media:null}),a=e.l,!r&&a)for(a=a.firstChild;a;a=a.nextSibling)1==a.nodeType&&(u=(o=a).namespaceURI,s=o.localName,"http://www.w3.org/1999/xhtml"==u?"style"==s?(u=o.getAttribute("class"),s=o.getAttribute("media"),h=o.getAttribute("title"),c.push({url:i,text:o.textContent,qb:"Author",Pa:h?u:null,media:s})):"link"==s?(h=o.getAttribute("rel"),u=o.getAttribute("class"),s=o.getAttribute("media"),("stylesheet"==h||"alternate stylesheet"==h&&u)&&(h=I(h=o.getAttribute("href"),i),o=o.getAttribute("title"),c.push({url:h,text:null,Pa:o?u:null,media:s,qb:"Author"}))):"meta"==s&&"viewport"==o.getAttribute("name")&&c.push({url:i,text:ng(o),qb:"Author",Pa:null,media:null}):"http://www.gribuser.ru/xml/fictionbook/2.0"==u?"stylesheet"==s&&"text/css"==o.getAttribute("type")&&c.push({url:i,text:o.textContent,qb:"Author",Pa:null,media:null}):"http://example.com/sse"==u&&"property"===s&&(u=o.getElementsByTagName("name")[0])&&"stylesheet"===u.textContent&&(o=o.getElementsByTagName("value")[0])&&(h=I(o.textContent,i),c.push({url:h,text:null,Pa:null,media:null,qb:"Author"})));if(!r)for(a=0;a<t.b.length;a++)c.push(t.b[a]);var p="";for(a=0;a<c.length;a++)p+=c[a].url,p+="^",c[a].text&&(p+=c[a].text),p+="^";var b=t.I[p];b?(t.g[i]=b,xi(n,e)):((a=t.u[p])||(a=new _i(function(){var e=oi("fetchStylesheet"),n=0,i=new ig(t.l);return ki(function(){if(n<c.length){var t=c[n++];return i.Wc(t.qb),null!==t.text?eo(t.text,i,t.url,t.Pa,t.media).Hc(!0):no(t.url,i,t.Pa,t.media)}return ai(!1)}).then(function(){b=new zd(t,i.j,i.u,i.J.l,i.G,i.B,i.D,i.l,i.I,i.F),t.I[p]=b,delete t.u[p],xi(e,b)}),e.result()},"FetchStylesheet "+i),t.u[p]=a,a.start()),a.get().then(function(r){t.g[i]=r,xi(n,e)}))}else xi(n,null)}),n.result()}function sg(t){return String.fromCharCode(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}function hg(t){(i=new z).append(t);var e=55-t.length&63;for(i.append("Â");0<e;)e--,i.append("\0");i.append("\0\0\0\0"),i.append(sg(8*t.length)),t=i.toString();for(var n,i=[1732584193,4023233417,2562383102,271733878,3285377520],r=(e=[],0);r<t.length;r+=64){for(n=0;16>n;n++){var o=t.substr(r+4*n,4);e[n]=(255&o.charCodeAt(0))<<24|(255&o.charCodeAt(1))<<16|(255&o.charCodeAt(2))<<8|255&o.charCodeAt(3)}for(;80>n;n++)o=e[n-3]^e[n-8]^e[n-14]^e[n-16],e[n]=o<<1|o>>>31;o=i[0];var a,u=i[1],s=i[2],h=i[3],l=i[4];for(n=0;80>n;n++)a=20>n?1518500249+(u&s|~u&h):40>n?1859775393+(u^s^h):60>n?2400959708+(u&s|u&h|s&h):3395469782+(u^s^h),a+=(o<<5|o>>>27)+l+e[n],l=h,h=s,s=u<<30|u>>>2,u=o,o=a;i[0]=i[0]+o|0,i[1]=i[1]+u|0,i[2]=i[2]+s|0,i[3]=i[3]+h|0,i[4]=i[4]+l|0}return i}function lg(t,e,n,i,r,o,a,u,s,h){this.b=t,this.url=e,this.lang=n,this.f=i,this.l=r,this.$=wt(o),this.$.ub=!1,this.u=a,this.j=u,this.h=s,this.g=h,this.nb=this.page=null}function fg(t){var e=t.target,n="â¸"==e.textContent;e.textContent=n?"â¾":"â¸";var i=e.parentNode;for(e.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-expanded",n?"true":"false"),e=i.firstChild;e;){if(1===e.nodeType){var r=e,o=r.getAttribute("data-adapt-class");if("toc-container"===o){if(r.setAttribute("aria-hidden",n?"false":"true"),r.firstChild){e=r.firstChild;continue}}else if("toc-node"===o&&(r.style.height=n?"auto":"0px",2<=r.children.length&&(r.children[1].tabIndex=n?0:-1),3<=r.children.length&&(r.children[0].tabIndex=n?0:-1,!n&&"â¾"==(o=r.children[0]).textContent))){o.textContent="â¸",o.setAttribute("aria-expanded","false"),r.setAttribute("aria-expanded","false"),e=r.children[2];continue}}for(;!e.nextSibling&&e.parentNode!==i;)e=e.parentNode;e=e.nextSibling}t.stopPropagation()}function cg(){var t;og.call(this,(t=this,function(e){return t.B[e]})),this.h=new mr(Bs,"document"),this.F=new mr(yr,"text"),this.G={},this.la={},this.B={},this.D={}}function pg(t,e,n){return t.F.load(e,n,void 0)}function bg(t,e,n){var i=oi("loadPubDoc");return vr(e,null,"HEAD").then(function(r){if(400<=r.status)dg(t,e,n).then(function(t){t?xi(i,t):(C.error("Failed to fetch a source document from "+e+" ("+r.status+(r.statusText?" "+r.statusText:"")+")"),xi(i,null))});else if(r.status||r.responseXML||r.responseText||r.vd||r.contentType||!/\/[^\/.]+(?:[#?]|$)/.test(e)||(e=e.replace(/([#?]|$)/,"/$1")),"application/oebps-package+xml"==r.contentType||/\.opf(?:[#?]|$)/.test(e)){(a=l(e.match(/^((?:.*\/)?)([^\/]*)$/))).next();var o=a.next().value,a=a.next().value;gg(t,o,a,n).Ga(i)}else"application/ld+json"==r.contentType||"application/webpub+json"==r.contentType||"application/audiobook+json"==r.contentType||"application/json"==r.contentType||/\.json(?:ld)?(?:[#?]|$)/.test(e)?pg(t,e,!0).then(function(n){if(n){var r=new Ag(t,e);_g(r,n).then(function(){xi(i,r)})}else C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS)."),xi(i,null)}):function(t,e){var n=oi("loadWebPub");return t.load(e).then(function(i){if(i)if(i.b.querySelector("a[href='META-INF/'],a[href$='/META-INF/']"))xi(n,null);else{var r=i.b,o=new Ag(t,e);r.body&&r.body.setAttribute("data-vivliostyle-primary-entry",!0);var a=r.querySelector("link[rel='publication'],link[rel='manifest'][type='application/webpub+json']");if(a){var u=a.getAttribute("href");/^#/.test(u)?(a=JSON.parse(r.getElementById(u.substr(1)).textContent),_g(o,a,r).then(function(){xi(n,o)})):pg(t,a.href||a.getAttribute("href")).then(function(t){_g(o,t,r).then(function(){xi(n,o)})})}else _g(o,{},r).then(function(){o.Yb&&o.Yb.src===i.url&&!r.querySelector("[role=doc-toc], [role=directory], nav, .toc, #toc")&&(o.Yb=null),xi(n,o)})}else C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()}(t,e).then(function(r){r?xi(i,r):dg(t,e,n).then(function(t){t?xi(i,t):(C.error("Failed to load "+e+"."),xi(i,null))})})}),i.result()}function dg(t,e,n){var i=oi("loadEPUBDoc");return e.endsWith("/")||(e+="/"),n&&t.F.fetch(e+"?r=list"),t.h.fetch(e+"META-INF/encryption.xml"),t.h.load(e+"META-INF/container.xml",void 0,void 0).then(function(r){if(r)for(var o=(r=l(r=$s(Ws(Ws(Ws(new Xs([r.b]),"container"),"rootfiles"),"rootfile"),"full-path"))).next();!o.done;o=r.next())if(o=o.value)return void gg(t,e,o,n).Ga(i);xi(i,null)}),i.result()}function gg(t,e,n,i){var r=e+n,o=t.G[r];if(o)return ai(o);var a=oi("loadOPF");return t.h.load(r,!0,"Failed to fetch EPUB OPF "+r).then(function(n){n?t.h.load(e+"META-INF/encryption.xml",void 0,void 0).then(function(u){(i?pg(t,e+"?r=list"):ai(null)).then(function(i){(function(t,e,n,i,r){t.j=e;var o=Ws(new Xs([e.b]),"package");(s=$s(o,"unique-identifier")[0])&&(s=Ps(e,e.url+"#"+s))&&(t.N=s.textContent.replace(/[ \n\r\t]/g,""));var a={};for(var u in t.u=tt(Ws(Ws(o,"manifest"),"item").X,function(n){var i=new vg,r=e.url;if(i.id=n.getAttribute("id"),i.src=I(n.getAttribute("href"),r),i.g=n.getAttribute("media-type"),r=n.getAttribute("properties")){r=r.split(/\s+/);for(var o={},u=0;u<r.length;u++)o[r[u]]=!0;i.l=o}return(n=n.getAttribute("fallback"))&&!Cg[i.g]&&(a[i.src]=n),!t.Yb&&i.l.nav&&(t.Yb=i),!t.ca&&i.l["cover-image"]&&(t.ca=i),i}),t.g=Z(t.u,wg),t.D=Z(t.u,function(e){return Tg(t,e.src)}),a)for(s=u;s=t.g[a[s]];){if(Cg[s.g]){t.Y[u]=s.src;break}s=s.src}t.b=tt(Ws(Ws(o,"spine"),"itemref").X,function(e,n){var i=e.getAttribute("idref");return(i=t.g[i])&&(i.j=e,i.P=n),i}),(u=$s(Ws(o,"spine"),"toc")[0])&&(t.lf=t.g[u]);if(u=$s(Ws(o,"spine"),"page-progression-direction")[0]){t:switch(u){case"ltr":u="ltr";break t;case"rtl":u="rtl";break t;default:throw Error("unknown PageProgression: "+u)}t.J=u}var s=n?$s(Ws(Ws(Hs(Ws(Ws(new Xs([n.b]),"encryption"),"EncryptedData"),zs()),"CipherData"),"CipherReference"),"URI"):[],h=Ws(Ws(o,"bindings"),"mediaType").X;for(n=0;n<h.length;n++){var f=h[n].getAttribute("handler");(u=h[n].getAttribute("media-type"))&&f&&t.g[f]&&(t.Z[u]=t.g[f].src)}if(t.f=function(t,e){function n(t){if(t&&(t=t.match(/^\s*(([^:]*):)?(\S+)\s*$/))){var e=t[2]?i[t[2]]:"http://idpf.org/epub/vocab/package/#";if(e)return e+t[3]}return null}var i;if(e){for(var r in i={},mg)i[r]=mg[r];for(;r=e.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/);)e=e.substr(r[0].length),i[r[1]]=r[2]}else i=mg;var o=1,a=Q(r=Ys(function(t){return Gs(t,function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)})}(t),function(t){if("meta"==t.localName){var e=n(t.getAttribute("property"));if(e)return{name:e,value:t.textContent,id:t.getAttribute("id"),order:o++,Pe:t.getAttribute("refines"),lang:null,scheme:n(t.getAttribute("scheme"))}}else if("http://purl.org/dc/elements/1.1/"==t.namespaceURI)return{name:mg.dcterms+t.localName,order:o++,lang:t.getAttribute("xml:lang"),value:t.textContent,id:t.getAttribute("id"),Pe:null,scheme:null};return null}),function(t){return t.Pe});r=function t(e){return function(t,e){var n,i={};for(n in t)i[n]=e(t[n],n);return i}(e,function(e){return tt(e,function(e){var n={v:e.value,o:e.order};if(e.sh&&(n.s=e.scheme),e.id||e.lang){var i=a[e.id];(i||e.lang)&&(e.lang&&(e={name:yg,value:e.lang,lang:null,id:null,Pe:e.id,scheme:null,order:e.order},i?i.push(e):i=[e]),i=Q(i,function(t){return t.name}),n.r=t(i))}return n})})}(Q(r,function(t){return t.Pe?null:t.name}));var u=null;return r[yg]&&(u=r[yg][0].v),function t(e){for(var n in e){var i=e[n];i.sort(Sg(n,u));for(var r=0;r<i.length;r++){var o=i[r].r;o&&t(o)}}}(r),r}(Ws(o,"metadata"),$s(o,"prefix")[0]),t.f[yg]&&(t.lang=t.f[yg][0].v),t.f[Eg]&&(t.F="pre-paginated"===t.f[Eg][0].v),!i){if(0<s.length&&t.N)for(i=function(t){var e=function(t){var e=hg(t);t=[];for(var n=(e=l(e)).next();!n.done;n=e.next())n=n.value,t.push(n>>>24&255,n>>>16&255,n>>>8&255,255&n);return t}(t);return function(t){var n,i,r=oi("deobfuscator");return t.slice?(n=t.slice(0,1040),i=t.slice(1040,t.size)):(n=t.webkitSlice(0,1040),i=t.webkitSlice(1040,t.size-1040)),function(t){var e=oi("readBlob"),n=new FileReader,i=Ai(e,n);return n.addEventListener("load",function(){i.tb(n.result)},!1),n.readAsArrayBuffer(t),e.result()}(n).then(function(t){t=new DataView(t);for(var n=0;n<t.byteLength;n++){var o=t.getUint8(n),o=o^e[n%20];t.setUint8(n,o)}xi(r,wr([t,i]))}),r.result()}}(t.N),n=0;n<s.length;n++)t.h.B[t.G+s[n]]=i;return t.F&&Ng(t),ai(!0)}if(o=new z,h={},0<s.length&&t.N)for(u="1040:"+function(t){t=hg(t);for(var e=new z,n=0;n<t.length;n++)e.append(sg(t[n]));for(t=e.toString(),e=new z,n=0;n<t.length;n++)e.append((256|t.charCodeAt(n)).toString(16).substr(1));return e.toString()}(t.N),n=0;n<s.length;n++)h[s[n]]=u;for(n=0;n<i.length;n++){var c=i[n];if(f=c.n){var p=decodeURI(f),s=t.D[p];u=null,s&&(s.B=0!=c.m,s.u=c.c,s.g&&(u=s.g.replace(/\s+/g,""))),s=h[p],(u||s)&&(o.append(f),o.append(" "),o.append(u||"application/octet-stream"),s&&(o.append(" "),o.append(s)),o.append("\n"))}}return Ng(t),vr(r,"","POST",o.toString(),"text/plain")})(o=new Ag(t,e),n,u,i,e+"?r=manifest").then(function(){t.G[r]=o,t.la[e]=o,xi(a,o)})})}):C.error("Received an empty response for EPUB OPF "+r+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),a.result()}function vg(){this.id=null,this.src="",this.j=this.h=this.g=null,this.P=-1,this.u=0,this.B=null,this.f=this.b=0,this.nc=this.wb=null,this.l=q}function wg(t){return t.id}g(Xd,Lt),g(eg,cs),(n=eg.prototype).ce=function(){},n.be=function(t,e,n){t=new sp(this.g.u,t,e,n,this.g.G,this.ia,kr(this.oa)),Ar(this.g,new Yp(t.f,this.g,t,this.B))},n.Fc=function(t){t=t.Mc,this.ia&&(t=ge(this.f,this.ia,t)),Ar(this.g,new eg(this.g,t,this,this.G))},n.Zd=function(){Ar(this.g,new ws(this.f,this.oa))},n.ae=function(){var t={};this.g.B.push({Ec:t,ia:this.ia}),Ar(this.g,new ms(this.f,this.oa,null,t,this.g.h))},n.$d=function(t){var e=this.g.l[t];e||(e={},this.g.l[t]=e),Ar(this.g,new ms(this.f,this.oa,null,e,this.g.h))},n.ee=function(){var t={};this.g.I.push(t),Ar(this.g,new ms(this.f,this.oa,this.ia,t,this.g.h))},n.wd=function(t){var e=this.g.D;if(t){var n=Va(e,"_pseudos");(e=n[t])||(e={},n[t]=e)}Ar(this.g,new ms(this.f,this.oa,null,e,this.g.h))},n.de=function(){this.F=!0,this.Tb()},n.Vc=function(){var t=new kd(this.g.u,this.g,this,this.B,this.g.F);Ar(this.g,t),t.Vc()},n.La=function(){if(cs.prototype.La.call(this),this.F){this.F=!1;var t,e="R"+this.g.N++,n=Le(e);t=this.ia?new Da(n,0,this.ia):new Pa(n,0),Xa(this.mb,"region-id").push(t),this.dc(),e=new eg(this.g,this.ia,this,e),Ar(this.g,e),e.La()}},g(ig,Cr),ig.prototype.error=function(t){C.b("CSS parser:",t)},g(og,mr),og.prototype.Y=function(t){var e=t.url;e&&(e=I(_(e),T)),this.b.push({url:e,text:t.text,qb:"Author",Pa:null,media:null})},og.prototype.Z=function(t){var e=t.url;e&&(e=I(_(e),T)),this.b.push({url:e,text:t.text,qb:"User",Pa:null,media:null})},lg.prototype.Ge=function(t){var e=this.u.Ge(t);return function(t,n,i){var r=i.behavior;if(r)switch(r.toString()){case"body-child":t.parentElement.getAttribute("data-vivliostyle-primary-entry")&&(t.querySelector("[role=doc-toc], [role=directory], nav li a, .toc, #toc")||(i.display=kn));break;case"toc-node-anchor":i.color=bn,i["text-decoration"]=kn;break;case"toc-node":i.display=Ke,i.margin=Jn,i.padding=Jn,i["padding-inline-start"]=new je(1.25,"em");break;case"toc-node-first-child":i.display=gn,i.margin=new je(.2,"em"),i["vertical-align"]=zn,i.color=bn,i["text-decoration"]=kn}if(!r||"toc-node"!=r.toString()&&"toc-container"!=r.toString())return e(t,n,i);(i=t.firstChild)&&1!==i.nodeType&&""===i.textContent.trim()&&t.replaceChild(t.ownerDocument.createComment(i.textContent),i);var o=n.getAttribute("data-adapt-class");if("toc-node"==o){var a=n.firstChild;"â¸"!=a.textContent&&(a.textContent="â¸",M(a,"cursor","pointer"),a.addEventListener("click",fg,!1),a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),"0px"!==n.style.height&&(a.tabIndex=0))}return(i=n.ownerDocument.createElement("div")).setAttribute("data-adapt-process-children","true"),"toc-node"==r.toString()?((a=n.ownerDocument.createElement("div")).textContent="â¹",M(a,"margin","0.2em 0 0 -1em"),M(a,"margin-inline-start","-1em"),M(a,"margin-inline-end","0"),M(a,"display","inline-block"),M(a,"width","1em"),M(a,"text-align","center"),M(a,"vertical-align","top"),M(a,"cursor","default"),M(a,"font-family","Menlo,sans-serif"),i.appendChild(a),M(i,"overflow","hidden"),i.setAttribute("data-adapt-class","toc-node"),i.setAttribute("role","treeitem"),"toc-node"==o||"toc-container"==o?(M(i,"height","0px"),(t=t.firstElementChild)&&"a"===t.localName&&(t.tabIndex=-1)):n.setAttribute("role","tree")):"toc-node"==o&&(i.setAttribute("data-adapt-class","toc-container"),i.setAttribute("role","group"),i.setAttribute("aria-hidden","true")),ai(i)}},lg.prototype.Uc=function(t,e,n,i,r){var o=this;if(this.page)return ai(this.page);var a=this,u=oi("showTOC"),s=new th(t,t);return this.page=s,this.b.load(this.url+"?viv-toc-box").then(function(i){(h=o.b.f[o.url])&&h.body&&h.body.getAttribute("data-vivliostyle-primary-entry")&&i.body.setAttribute("data-vivliostyle-primary-entry",!0);var h,l=Vd(h=a.b.g[i.url],n,1e5,r);e=new jb(e.window,l.fontSize,e.root,l.width,l.height);var f=new Xd(h,i,a.lang,e,a.f,a.l,a.Ge(i),a.j,0,a.h,a.g);a.nb=f,f.$=a.$,Hd(f).then(function(){tg(f,s,null).then(function(){Array.from(s.H.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*[style*='display: none']")).forEach(function(t){t.setAttribute("aria-hidden","true"),t.setAttribute("hidden","hidden")}),function t(e,n,i){if(i--)for(n=n.firstChild;n;n=n.nextSibling)if(1==n.nodeType){var r=n;"auto"!=B(r,"height","auto")&&(M(r,"height","auto"),t(e,r,i)),"absolute"==B(r,"position","static")&&(M(r,"position","relative"),t(e,r,i))}}(a,t,2),xi(u,s)})})}),u.result()},lg.prototype.Td=function(){this.page&&(this.page.H.style.visibility="hidden",this.page.H.setAttribute("aria-hidden","true"))},lg.prototype.Rc=function(){return!!this.page&&"visible"===this.page.H.style.visibility},g(cg,og),cg.prototype.load=function(t){var e=A(t);if(t=this.D[e])return t.Xa()?t:ai(t.get());var n=oi("EPUBDocStore.load");return(t=cg.ng.load.call(this,e,!0,"Failed to fetch a source document from "+e)).then(function(t){t?xi(n,t):e.startsWith("data:")?C.error("Failed to load "+e+". Invalid data."):e.startsWith("http:")&&T.startsWith("https:")?C.error("Failed to load "+e+'. Mixed Content ("http:" content on "https:" context) is not allowed.'):C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()};var mg={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#"},yg=mg.dcterms+"language",xg=mg.dcterms+"title",Eg=mg.rendition+"layout";function Sg(t,e){var n={};return function(i,r){var o,a,u=i.r||n,s=r.r||n;return t==xg&&(o="main"==u["http://idpf.org/epub/vocab/package/#title-type"])!=(a="main"==s["http://idpf.org/epub/vocab/package/#title-type"])?o?-1:1:(o=parseInt(u["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(o)&&(o=Number.MAX_VALUE),a=parseInt(s["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(a)&&(a=Number.MAX_VALUE),o!=a?o-a:t!=yg&&e&&(o=(u[yg]||u["http://idpf.org/epub/vocab/package/#alternate-script"])==e)!=(a=(s[yg]||s["http://idpf.org/epub/vocab/package/#alternate-script"])==e)?o?-1:1:i.o-r.o)}}function kg(){var t=window.MathJax;return t?t.Hub:null}var Cg={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0};function Ag(t,e){this.h=t,this.D=this.g=this.b=this.u=this.j=null,this.G=e,this.N=null,this.Z={},this.lang=null,this.l=0,this.F=!1,this.S=!0,this.B=null,this.f={},this.ca=this.Yb=this.lf=null,this.Y={},this.J=null,this.I=function(t){function e(){}return e.prototype.Re=function(t,e){return"viv-id-"+W(e+(t?"#"+t:""),":")},e.prototype.oc=function(e,n){if(r=e.match(/^([^#]*)#?(.*)$/)){var i=r[1]||n,r=r[2];if(i&&t.u.some(function(t){return t.src===i}))return"#"+this.Re(r,i)}return e},e.prototype.Kg=function(t){return"#"===t.charAt(0)&&(t=t.substring(1)),t.indexOf("viv-id-")||(t=t.substring(7)),(t=function(t){var e="string"==typeof(e=":")?e:"\\u",n=new RegExp(W(e)+"[0-9a-fA-F]{4}","g");return t.replace(n,function(t){var n="string"==typeof(n=e)?n:"\\u";return t.indexOf(n)?t:String.fromCharCode(parseInt(t.substring(n.length),16))})}(t).match(/^([^#]*)#?(.*)$/))?[t[1],t[2]]:[]},new e}(this),kg()&&(Sa["http://www.w3.org/1998/Math/MathML"]=!0)}function Tg(t,e){if(e.startsWith("data:"))return e===t.G?"":e;if(t.G){var n=I("",t.G);return e===n||e+"/"===n?"":("/"!=n.charAt(n.length-1)&&(n+="/"),e.substr(0,n.length)==n?decodeURI(e.substr(n.length)):null)}return e}function Ng(t){for(var e=0,n=l(t.b),i=n.next();!i.done;i=n.next()){i=i.value;var r=t.F?1:Math.ceil(i.u/1024);i.b=e,i.f=r,e+=r}t.l=e,t.B&&t.B(t.l)}function Ig(t,e,n){t.g={},t.D={},t.u=[],t.b=t.u;var i=t.j=new Ls(null,"",(new DOMParser).parseFromString("<spine></spine>","text/xml"));return e.forEach(function(t){var e=new vg;e.P=t.index,e.id="item"+(t.index+1),e.src=t.url,e.wb=t.wb,e.nc=t.nc;var n=i.b.createElement("itemref");n.setAttribute("idref",e.id),i.root.appendChild(n),e.j=n,this.g[e.id]=e,null==(n=Tg(this,t.url))&&(n=t.url),this.D[n]=e,this.u.push(e)},t),n?function(t,e,n){var i=oi("EPUBDocStore.load");return e=A(e),(t.D[e]=ug(t,{status:200,statusText:"",url:e,contentType:n.contentType,responseText:null,responseXML:n,vd:null})).Ga(i),i.result()}(t.h,e[0].url,n):ai(null)}function _g(t,e,n){e.readingProgression&&(t.J=e.readingProgression),void 0===t.f&&(t.f={});var i=n&&n.title||e.name||e.metadata&&e.metadata.title;i&&(t.f[xg]=[{v:i}]);var r=Tg(t,t.G);!e.readingOrder&&n&&null!==r&&(e.readingOrder=[encodeURI(r)],Array.from(n.querySelectorAll("[role=doc-toc] a[href],[role=directory] a[href],nav li a[href],.toc a[href],#toc a[href]")).forEach(function(n){n=A(n.href||n.getAttribute("href"));var i=Tg(t,n);n=null!==i?encodeURI(i):n,-1==e.readingOrder.indexOf(n)&&e.readingOrder.push(n)}));var o=[],a=0,u=-1;[e.readingOrder,e.resources].forEach(function(n){n instanceof Array&&n.forEach(function(n){var i=e.readingOrder.includes(n),r="string"==typeof n?n:n.url||n.href,s="string"==typeof n?"":n.oh||n.href&&n.type||"";(i||"text/html"===s||"application/xhtml+xml"===s||/(^|\/)([^\/]+\.(x?html|htm|xht)|[^\/.]*)([#?]|$)/.test(r))&&(i={url:I(_(r),t.G),index:a++,wb:null,nc:null},"contents"===n.rel&&-1===u&&(u=i.index),o.push(i))})});var s=oi("initWithWebPubManifest");return Ig(t,o).then(function(){-1!==u&&(t.Yb=t.u[u]),t.Yb||(t.Yb=t.D[r]),xi(s,!0)}),s.result()}function Lg(t,e){return ui("resolveFragment",function(n){if(e){var i,r=new dt;if(function(t,e){if(!(u=e.match(/^#?epubcfi\((.*)\)$/)))throw Error("E_CFI_NOT_CFI");for(var n=u[1],i=0,r=[];;)switch(n.charAt(i)){case"/":if(i++,!(u=n.substr(i).match(/^(0|[1-9][0-9]*)(\[([-a-zA-Z_0-9.\u007F-\uFFFF]+)(;([^\]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=u[0].length;var o=parseInt(u[1],10),a=u[3],u=ft(u[4]);r.push(new pt(o,a,j(u.s)));break;case":":if(i++,!(u=n.substr(i).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=u[0].length,o=parseInt(u[1],10),(a=u[4])&&(a=lt(a));var s=u[7];s&&(s=lt(s)),u=ft(u[10]),r.push(new bt(o,a,s,j(u.s)));break;case"!":i++,r.push(new ct);break;case"~":case"@":case"":return void(t.pa=r);default:throw Error("E_CFI_PARSE_ERROR")}}(r,e),t.j){var o=gt(r,t.j.b);if(1!=o.node.nodeType||o.K||!o.sd)return void xi(n,null);var a=o.node,u=a.getAttribute("idref");if("itemref"!=a.localName||!u||!t.g[u])return void xi(n,null);i=t.g[u],r=o.sd}else i=t.b[0];t.h.load(i.src).then(function(t){var e=gt(r,t.b);t=Os(t,e.node,e.offset,e.K),xi(n,{P:i.P,Da:t,aa:-1})})}else xi(n,null)},function(t,n){C.b(n,"Cannot resolve fragment:",e),xi(t,null)})}function jg(t,e){return{page:t,position:{P:t.P,aa:e,Da:t.offset}}}function Og(t,e,n,i,r){this.O=t,this.viewport=e,this.j=n,this.l=r,this.Ib=[],this.g=[],this.$=wt(i),this.h=new Tb(e),this.f=new Jc(t.I),this.wf=!1}function Rg(t,e){var n=t.Ib[e.P];return n?n.Ka[e.aa]:null}function Fg(t,e,n){var i=oi("renderSinglePage"),r=function(t,e,n){var i=e.nb.viewport,r=i.b.createElement("div");r.setAttribute("data-vivliostyle-page-container",!0),r.setAttribute("role","region"),r.style.position="absolute",r.style.top="0",r.style.left="0",Ts||(r.style.visibility="hidden",r.setAttribute("aria-hidden","true")),i.h.appendChild(r);var o=i.b.createElement("div");o.setAttribute("data-vivliostyle-bleed-box",!0),r.appendChild(o);var a=new th(r,o);return a.P=e.item.P,a.position=n,a.offset=Wd(e.nb,n),a.offset||(e=t.O.I.Re("",e.item.src),o.setAttribute("id",e),eh(a,o,e)),i!==t.viewport&&(t=io(null,new fr(xt(t.viewport.width,t.viewport.height,i.width,i.height),null)),a.l.push(new Zs(r,"transform",t))),a}(t,e,n);return tg(e.nb,r,n).then(function(o){var a=(n=o)?n.page-1:e.jb.length-1;if(function(t,e,n,i){n.H.style.display="none",n.H.style.visibility="visible",n.H.style.position="",n.H.style.top="",n.H.style.left="",n.H.setAttribute("data-vivliostyle-page-side",n.b);var r=e.Ka[i];if(n.u=!e.item.P&&!i,e.Ka[i]=n,t.O.S){if(!i&&0<e.item.P){var o=t.O.b[e.item.P-1];e.item.b=o.b+o.f}e.item.f=e.Ka.length,t.O.l=t.O.b.reduce(function(t,e){return t+e.f},0),t.O.B&&t.O.B(t.O.l)}if(r)e.nb.viewport.f.replaceChild(n.H,r.H),nt(r,{type:"replaced",target:null,currentTarget:null,ag:n});else{if(r=null,0<i)r=e.Ka[i-1].H.nextElementSibling;else for(o=e.item.P+1;o<t.Ib.length;o++){var a=t.Ib[o];if(a&&a.Ka[0]){r=a.Ka[0].H;break}}e.nb.viewport.f.insertBefore(n.H,r)}t.l({width:e.nb.Ba,height:e.nb.ua},e.nb.xb,e.item.P,e.nb.ta+i)}(t,e,r,a),function(t,e,n){if(0<(o=Object.keys(t.j.g)).length){var i=Xc(t.b);o.forEach(function(t){this.B[t]=i;var r=this.D[t];if(r&&r.aa<n&&(r=this.h[t])){var o,a=this.f[t];for(a||(a=this.f[t]=[]);o=r.shift();)o.ud=!1,a.push(o)}this.D[t]={P:e,aa:n}},t)}for(var r,o=t.G;r=t.u.shift();){r.Le=o,r.P=e,r.aa=n;var a=void 0;r.ud?(a=t.h[r.Gc])||(a=t.h[r.Gc]=[]):(a=t.f[r.Gc])||(a=t.f[r.Gc]=[]),a.every(function(t){return!(r===t||t&&r.Gc===t.Gc&&r.ud===t.ud&&r.P===t.P&&r.aa===t.aa)})&&a.push(r)}t.j=null}(t.f,r.P,a),o=null,n){var u=e.jb[n.page];e.jb[n.page]=n,u&&e.Ka[n.page]&&(Lh(n,u)||(o=Fg(t,e,n)))}o||(o=ai(!0)),o.then(function(){var o=function(t,e){var n=[];Object.keys(e.g).forEach(function(t){(t=this.f[t])&&(n=n.concat(t))},t),n.sort(function(t,e){return t.P-e.P||t.aa-e.aa});var i=[],r=null;return n.forEach(function(t){r&&r.P===t.P&&r.aa===t.aa?r.Yd.push(t):(r={P:t.P,aa:t.aa,Le:t.Le,Yd:[t]},i.push(r))}),i}(t.f,r),u=0;Ci(function(e){if(++u>o.length)Ii(e);else{var n=o[u-1];n.Yd=n.Yd.filter(function(t){return!t.ud}),n.Yd.length?Hg(t,n.P).then(function(i){i?(function(t,e){t.F.push(t.b),t.b=Xc(e)}(t.f,n.Le),function(t,e){t.I.push(t.g),t.g=e}(t.f,n.Yd),Fg(t,i,i.jb[n.aa]).then(function(n){var i=t.f;i.b=i.F.pop(),(i=t.f).g=i.I.pop(),(i=n.Xd.position).P===r.P&&i.aa===a&&(r=n.Xd.page),Ni(e)})):Ni(e)}):Ni(e)}}).then(function(){r.H.parentElement||(r=e.Ka[a]),r.B=!n&&e.item.P===t.O.b.length-1,r.B&&function(t,e){var n=t.b.page[0];Array.from(e.root.querySelectorAll("[data-vivliostyle-pages-counter]")).forEach(function(t){var e=t.getAttribute("data-vivliostyle-pages-counter"),i=this.Ne.findIndex(function(t){return t.Mc.g===e});t.textContent=this.Ne[i].format([n])},t)}(t.f,t.viewport),xi(i,{Xd:jg(r,a),bg:n})})})}),i.result()}function Pg(t,e){var n=t.aa,i=-1;return 0>n?(i=t.Da,n=(n=K(e.jb.length,function(t){return Wd(e.nb,e.jb[t],!0)>i}))===e.jb.length?e.complete?e.jb.length-1:Number.POSITIVE_INFINITY:n-1):n===Number.POSITIVE_INFINITY&&-1!==t.Da&&(i=t.Da),{P:t.P,aa:n,Da:i}}function Dg(t,e,n){var i=oi("findPage");return Hg(t,e.P).then(function(r){if(r){var o,a=null;Ci(function(i){var u=Pg(e,r);o=u.aa,(a=r.Ka[o])?Ii(i):r.complete?(o=r.jb.length-1,a=r.Ka[o],Ii(i)):n?Mg(t,u).then(function(t){t&&(a=t.page,o=t.position.aa),Ii(i)}):Si(100).then(function(){Ni(i)})}).then(function(){xi(i,jg(a,o))})}else xi(i,null)}),i.result()}function Mg(t,e){var n=oi("renderPage");return Hg(t,e.P).then(function(i){if(i){var r=Pg(e,i),o=r.aa,a=r.Da,u=i.Ka[o];u?xi(n,jg(u,o)):Ci(function(e){if(o<i.jb.length)Ii(e);else if(i.complete)o=i.jb.length-1,Ii(e);else{var n=i.jb[i.jb.length-1];Fg(t,i,n).then(function(t){var r=t.Xd.page;(n=t.bg)?0<=a&&Wd(i.nb,n)>a?(u=r,o=i.jb.length-2,Ii(e)):Ni(e):(u=r,o=t.Xd.position.aa,i.complete=!0,Ii(e))})}}).then(function(){u=u||i.Ka[o];var e=i.jb[o];u?xi(n,jg(u,o)):Fg(t,i,e).then(function(t){t.bg||(i.complete=!0),xi(n,t.Xd)})})}else xi(n,null)}),n.result()}function Bg(t,e,n){var i=oi("renderPagesUpto");e||(e={P:0,aa:0,Da:0});var r,o=e.P,a=e.aa,u=0;return n&&(u=o),Ci(function(n){Mg(t,{P:u,aa:u===o?a:Number.POSITIVE_INFINITY,Da:u===o?e.Da:-1}).then(function(t){r=t,++u>o?Ii(n):Ni(n)})}).then(function(){xi(i,r)}),i.result()}function Ug(t,e,n){return e="left"===e.b,t="ltr"===t.fc(n),!e&&t||e&&!t}function zg(t,e,n){var i=oi("navigateToEPage");return function(t,e){return ui("resolveEPage",function(n){if(0>=e)xi(n,{P:0,Da:0,aa:-1});else if(t.S){var i=t.b.findIndex(function(t){return!t.b&&!t.f||t.b<=e&&t.b+t.f>e});-1==i&&(i=t.b.length-1);var r=t.b[i];r&&r.f||(r=t.b[--i]),xi(n,{P:i,Da:-1,aa:Math.floor(e-r.b)})}else{var o=K(t.b.length,function(n){return(n=t.b[n]).b+n.f>e});o==t.b.length&&o--;var a=t.b[o];t.h.load(a.src).then(function(t){(e-=a.b)>a.f&&(e=a.f);var i=0;0<e&&(t=Rs(t),(i=Math.round(t*e/a.f))==t&&i--),xi(n,{P:o,Da:i,aa:-1})})}},function(t,n){C.b(n,"Cannot resolve epage:",e),xi(t,null)})}(t.O,e).then(function(e){e?Dg(t,e,n).Ga(i):xi(i,null)}),i.result()}function Vg(t,e,n,i){C.debug("Navigate to",e);var r=Tg(t.O,A(e));if(!r){if(t.O.j&&e.match(/^#epubcfi\(/))r=Tg(t.O,t.O.j.url);else if("#"===e.charAt(0)){var o=t.O.I.Kg(e);t.O.j?null==(r=Tg(t.O,o[0]))&&(r=o[0]):r=o[0],e=o[0]+(o[1]?"#"+o[1]:"")}if(null==r)return ai(null)}var a=t.O.D[r];if(!a)return t.O.j&&r==Tg(t.O,t.O.j.url)&&0<=(r=e.indexOf("#"))?function(t,e,n){var i=oi("navigateToCFI");return Lg(t.O,e).then(function(e){e?Dg(t,e,n).Ga(i):xi(i,null)}),i.result()}(t,e.substr(r+1),i):ai(null);var u=oi("navigateTo");return Hg(t,a.P).then(function(r){if(r){var o=Ps(r.da,e);o?Dg(t,{P:a.P,aa:-1,Da:js(r.da,o)},i).Ga(u):n.P!==a.P?Dg(t,{P:a.P,aa:0,Da:-1},i).Ga(u):xi(u,null)}else xi(u,null)}),u.result()}function Xg(t,e,n,i){if(a=kg()){var r=i.ownerDocument,o=r.createElement("span");i.appendChild(o),function t(e,n,i){if(n){if(1===n.nodeType&&"mglyph"===n.tagName)for(var r=l(n.attributes),o=r.next();!o.done;o=r.next())if("src"===(o=o.value).name){var a=I(o.nodeValue,i.url);o.namespaceURI?n.setAttributeNS(o.namespaceURI,o.name,a):n.setAttribute(o.name,a)}n.firstChild&&t(e,n.firstChild,i),n.nextSibling&&t(e,n.nextSibling,i)}}(t,n=r.importNode(n,!0),e),o.appendChild(n),(t=a.queue).Push(["Typeset",a,o]);var a,u=Ai(a=oi("makeMathJaxView"));return t.Push(function(){u.tb(o)}),a.result()}return ai(null)}function Hg(t,e){if(-1===e||e>=t.O.b.length)return ai(null);var n=t.Ib[e];if(n)return ai(n);var i=oi("getPageViewItem");if(o=t.g[e]){var r=Ai(i);return o.push(r),i.result()}var o=t.g[e]=[],a=t.O.b[e],u=t.O.h;return u.load(a.src).then(function(r){a.h=r.b.title;var s=u.g[r.url],h=t.Ge(r),l=t.viewport,f=Vd(s,l.width,l.height,l.fontSize,t.$);f.width==l.width&&f.height==l.height&&f.fontSize==l.fontSize||(l=new jb(l.window,f.fontSize,l.root,f.width,f.height)),f=t.Ib[e-1],null!==a.wb?f=a.wb-1:(!(0<e)||f&&f.complete?f=f?f.nb.ta+f.Ka.length:0:(f=a.b||e,t.O.F||f%2||f++),null!==a.nc&&(f+=a.nc)),function(t,e){var n=t.b.page;n&&n.length?n[n.length-1]=e:t.b.page=[e]}(t.f,f);var c=new Xd(s,r,t.O.lang,l,t.h,t.j,h,t.O.Y,f,t.O.I,t.f,t.O.J);c.$=t.$,s=t.O.f&&t.O.f[xg],c.yb=s&&s[0]&&s[0].v||"",c.fb=a.h||"",Hd(c).then(function(){n={item:a,da:r,nb:c,jb:[null],Ka:[],complete:!1},t.Ib[e]=n,xi(i,n),o.forEach(function(t){t.tb(n)})})}),i.result()}(n=Og.prototype).fc=function(t){return this.O.J?this.O.J:(t=this.Ib[t?t.P:0])?t.nb.I:null},n.Rb=function(){return Bg(this,{P:this.O.b.length-1,aa:Number.POSITIVE_INFINITY,Da:-1},!1)},n.xg=function(t,e){return Dg(this,{P:0,aa:0,Da:-1},e)},n.Ag=function(t,e){return Dg(this,{P:this.O.b.length-1,aa:Number.POSITIVE_INFINITY,Da:-1},e)},n.nextPage=function(t,e){var n=this,i=this,r=t.P,o=t.aa,a=oi("nextPage");return Hg(i,r).then(function(t){if(t){if(t.complete&&o==t.jb.length-1){if(r>=i.O.b.length-1)return void xi(a,null);r++,o=0;var u=n.Ib[r],s=u&&u.Ka[0];t=t.Ka[t.Ka.length-1],s&&t&&s.b==t.b&&(u.Ka.forEach(function(t){t.H&&t.H.remove()}),n.Ib[r]=null,n.g[r]=null)}else o++;Dg(i,{P:r,aa:o,Da:-1},e).Ga(a)}else xi(a,null)}),a.result()},n.Oe=function(t,e){var n=t.P,i=t.aa;if(i)i--;else{if(!n)return ai(null);n--,i=Number.POSITIVE_INFINITY}return Dg(this,{P:n,aa:i,Da:-1},e)},n.Gg=function(t,e){var n=Rg(this,t);if(!n)return ai(null);var i=Ug(this,n,t),r=this.nextPage(t,e);if(i)return r;var o=this;return r.ea(function(t){if(t){if(t.page.b===n.b)return r;var i=o.nextPage(t.position,e);return i.ea(function(t){return t?i:r})}return ai(null)})},n.Jg=function(t,e){var n=Rg(this,t);if(!n)return ai(null);var i=Ug(this,n,t),r=this.Oe(t,e),o=n.H.previousElementSibling;if(i){var a=this;return r.ea(function(t){return t?t.page.b===n.b||t.page.H!==o?r:a.Oe(t.position,e):ai(null)})}return r},n.Ge=function(t){var e=this;return function(n,i){var r;if("object"==n.localName&&"http://www.w3.org/1999/xhtml"==n.namespaceURI){if(r=null,o=n.getAttribute("data")){var o=I(o,t.url);if(!(u=n.getAttribute("media-type"))){var a=Tg(e.O,o);a&&(a=e.O.D[a])&&(u=a.g)}if(u&&(a=e.O.Z[u])){(r=e.viewport.b.createElement("iframe")).style.border="none";o=G(o);var u,s=G(u);for((u=new z).append(a),u.append("?src="),u.append(o),u.append("&type="),u.append(s),a=n.firstChild;a;a=a.nextSibling)1==a.nodeType&&("param"==(s=a).localName&&"http://www.w3.org/1999/xhtml"==s.namespaceURI&&(o=s.getAttribute("name"),s=s.getAttribute("value"),o&&s&&(u.append("&"),u.append(encodeURIComponent(o)),u.append("="),u.append(encodeURIComponent(s)))));r.setAttribute("src",u.toString()),(u=n.getAttribute("width"))&&r.setAttribute("width",u),(u=n.getAttribute("height"))&&r.setAttribute("height",u)}}r||(r=e.viewport.b.createElement("span")).setAttribute("data-adapt-process-children","true"),r=ai(r)}else if("http://www.w3.org/1998/Math/MathML"==n.namespaceURI)r=Xg(e,t,n,i);else if("http://example.com/sse"==n.namespaceURI){switch(r=i?i.ownerDocument:e.viewport.b,u=n.localName){case"t":case"tab":case"ec":case"nt":case"fraction":case"comment":case"mark":u="span";break;case"ruby":case"rp":case"rt":break;default:u="div"}(r=r.createElement(u)).setAttribute("data-adapt-process-children","true"),r=ai(r)}else r=n.dataset&&"true"==n.dataset.mathTypeset?Xg(e,t,n,i):ai(null);return r}},n.Uc=function(t){var e=(i=this.O).Yb||i.lf;if(this.wf=t,!e)return ai(null);if(this.b&&this.b.page)return this.b.page.H.style.visibility="visible",this.b.page.H.setAttribute("aria-hidden","false"),ai(this.b.page);var n=oi("showTOC");this.b||(this.b=new lg(i.h,e.src,i.lang,this.h,this.j,this.$,this,i.Y,i.I,this.f)),t=this.viewport;var i=Math.min(350,Math.round(.67*t.width)-16),r=(e=t.height-6,t.b.createElement("div"));return t.root.appendChild(r),r.style.visibility="hidden",r.style.width=i+10+"px",r.style.maxHeight=e+"px",r.setAttribute("data-vivliostyle-toc-box","true"),r.setAttribute("role","navigation"),this.b.Uc(r,t,i,e,this.viewport.fontSize).then(function(t){r.style.visibility="visible",r.setAttribute("aria-hidden","false"),xi(n,t)}),n.result()},n.Td=function(){this.b&&this.b.Td()},n.Rc=function(){return!!this.b&&this.b.Rc()};var Gg={fh:"singlePage",gh:"spread",Vg:"autoSpread"};function Yg(t,e,n,i){var r=this;this.window=t,this.ge=e,e.setAttribute("data-vivliostyle-viewer-viewport",!0),Ts&&e.setAttribute("data-vivliostyle-debug",!0),e.setAttribute("data-vivliostyle-viewer-status","loading"),this.Ba=n,this.ua=i,t=t.document,this.sa=new Nl(t.head,e),this.u="loading",this.J=[],this.O=null,this.hc=this.Ya=!1,this.f=this.j=this.g=this.B=null,this.fontSize=16,this.zoom=1,this.D=!1,this.S="singlePage",this.ca=!1,this.Rb=!0,this.$={fontFamily:"serif",lineHeight:1.25,margin:8,xe:!1,pe:25,we:!1,Ie:!1,ub:!1,Dc:1,af:{vivliostyle:!0,print:!0},vc:void 0},this.Z=[],this.I=function(){},this.h=function(){},this.Y=function(){r.Ya=!0,r.I()},this.Me=this.Me.bind(this),this.F=function(){},this.G=t.getElementById("vivliostyle-page-rules"),this.N=!1,this.l=null,this.la={loadPublication:this.rg,loadXML:this.sg,configure:this.$e,moveTo:this.ta,toc:this.Uc},function(t){k(1,function(e){Wg(t,{t:"debug",content:e})}),k(2,function(e){Wg(t,{t:"info",content:e})}),k(3,function(e){Wg(t,{t:"warn",content:e})}),k(4,function(e){Wg(t,{t:"error",content:e})})}(this)}function Wg(t,e){e.i=t.Ba,t.ua(e)}function $g(t,e){t.u!==e&&(t.u=e,t.ge.setAttribute("data-vivliostyle-viewer-status",e),Wg(t,{t:"readystatechange"}))}function Kg(t,e){return sv(t),(e?Lg(t.O,e).ea(function(e){return t.f=e,ai(!0)}):ai(!0)).ea(function(){return Iv.b("beforeRender"),hv(t)})}function Jg(t,e){var n,i=parseFloat(e),r=/[a-z]+$/;if("string"==typeof e&&(n=e.match(r))){if("em"===(r=n[0])||"rem"===r)return i*t.fontSize;if("ex"===r)return i*It.ex*t.fontSize/It.em;if(r=It[r])return i*r}return i}function Zg(t,e){var n=[];t.g&&n.push(t.g),t.j&&(n.push(t.j.left),n.push(t.j.right)),n.forEach(function(t){t&&e(t)})}function qg(t){Zg(t,function(e){e.removeEventListener("hyperlink",t.F,!1),e.removeEventListener("replaced",t.Me,!1)})}function Qg(t){qg(t),Zg(t,function(t){M(t.H,"display","none"),t.H.setAttribute("aria-hidden","true")}),t.g=null,t.j=null}function tv(t,e){e.addEventListener("hyperlink",t.F,!1),e.addEventListener("replaced",t.Me,!1),M(e.H,"visibility","visible"),M(e.H,"display","block"),e.H.setAttribute("aria-hidden","false")}function ev(t){var e=oi("reportPosition");return function(t,e,n){var i=t.b[e],r=oi("getCFI");return t.h.load(i.src).then(function(t){var e=Fs(t,n),o=null;e&&(t=Os(t,e,0,!1),vt(o=new dt,e,n-t),i.j&&vt(o,i.j,0),o=o.toString()),xi(r,o)}),r.result()}(t.O,t.f.P,t.f.Da).then(function(n){var i=t.g;(t.ca&&0<i.j.length?Li(i.j):ai(!0)).then(function(){(function(t,e,n){var i=oi("sendLocationNotification"),r={t:"nav",first:e.u,last:e.B,metadata:t.O.f,docTitle:t.O.b[e.P].h};return function(t,e){var n=t.b[e.P];if(t.S)return ai(n.b+e.aa);if(0>=e.Da)return ai(n.b);var i=oi("getEPage");return t.h.load(n.src).then(function(t){t=Rs(t),xi(i,n.b+Math.min(t,e.Da)*n.f/t)}),i.result()}(t.O,t.f).then(function(e){r.epage=e,r.epageCount=t.O.l,n&&(r.cfi=n),Wg(t,r),xi(i,!0)}),i.result()})(t,i,n).Ga(e)})}),e.result()}function nv(t){var e=t.ge;if(t.B){var n=t.B;return e.style.marginLeft=n.marginLeft+"px",e.style.marginRight=n.marginRight+"px",e.style.marginTop=n.marginTop+"px",e.style.marginBottom=n.marginBottom+"px",new jb(t.window,t.fontSize,e,n.width,n.height)}return new jb(t.window,t.fontSize,e)}function iv(t,e,n){return t.hc=!1,qg(t),t.$.ub?function(t,e,n){var i=oi("getCurrentSpread"),r=Rg(t,e);if(!r)return ai({left:null,right:null});var o="left"===r.b;return(Ug(t,r,e)?t.Oe(e,n):t.nextPage(e,n)).then(function(n){var r=Rg(t,e);(n=n&&n.page)&&n.b===r.b&&(n=null),xi(i,o?{left:r,right:n}:{left:n,right:r})}),i.result()}(t.b,t.f,n).ea(function(n){if(Qg(t),t.j=n,n.left&&n.right){var i=parseFloat(n.left.H.style.width),r=parseFloat(n.right.H.style.width);i&&r&&i!==r&&(i<r?n.left.H.style.marginLeft=r-i+"px":n.right.H.style.marginRight=i-r+"px")}return n.left&&(tv(t,n.left),n.right?n.left.H.removeAttribute("data-vivliostyle-unpaired-page"):n.left.H.setAttribute("data-vivliostyle-unpaired-page",!0)),n.right&&(tv(t,n.right),n.left?n.right.H.removeAttribute("data-vivliostyle-unpaired-page"):n.right.H.setAttribute("data-vivliostyle-unpaired-page",!0)),n=rv(t,n),t.viewport.zoom(n.width,n.height,t.D?av(t,n):t.zoom),t.g=e,ai(null)}):(function(t,e){Qg(t),t.g=e,e.H.style.marginLeft="",e.H.style.marginRight="",tv(t,e)}(t,e),t.viewport.zoom(e.f.width,e.f.height,t.D?av(t,e.f):t.zoom),t.g=e,ai(null))}function rv(t,e){var n=0,i=0;return e.left&&(n+=e.left.f.width,i=e.left.f.height),e.right&&(n+=e.right.f.width,i=Math.max(i,e.right.f.height)),e.left&&e.right&&(n+=2*t.$.Dc,n+=Math.abs(e.left.f.width-e.right.f.width)),{width:n,height:i}}(n=Yg.prototype).rg=function(t){Iv.f("beforeRender"),$g(this,"loading");var e=t.url,n=t.fragment,i=!!t.zipmeta,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=oi("loadPublication"),u=this;return u.$e(t).then(function(){var t=new cg;ag(t,r,o).then(function(){var r=I(_(e),u.window.location.href);u.J=[r],bg(t,r,i).then(function(t){t?(u.O=t,Kg(u,n).then(function(){xi(a,!0)})):xi(a,!1)})})}),a.result()},n.sg=function(t){Iv.f("beforeRender"),$g(this,"loading");var e=t.url,n=t.document,i=t.fragment,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=oi("loadXML"),u=this;return u.$e(t).then(function(){var t=new cg;ag(t,r,o).then(function(){var r=e.map(function(t,e){return{url:I(_(t.url),u.window.location.href),index:e,wb:t.wb,nc:t.nc}});u.J=r.map(function(t){return t.url}),u.O=new Ag(t,""),Ig(u.O,r,n).then(function(){Kg(u,i).then(function(){xi(a,!0)})})})}),a.result()},n.$e=function(t){if("boolean"==typeof t.autoresize&&(t.autoresize?(this.B=null,this.window.addEventListener("resize",this.Y,!1),this.Ya=!0):this.window.removeEventListener("resize",this.Y,!1)),"number"==typeof t.fontSize){var e=t.fontSize;5<=e&&72>=e&&this.fontSize!=e&&(this.fontSize=e,this.Ya=!0)}return"object"==typeof t.viewport&&t.viewport&&(200<=(e={marginLeft:Jg(this,(e=t.viewport)["margin-left"])||0,marginRight:Jg(this,e["margin-right"])||0,marginTop:Jg(this,e["margin-top"])||0,marginBottom:Jg(this,e["margin-bottom"])||0,width:Jg(this,e.width)||0,height:Jg(this,e.height)||0}).width||200<=e.height)&&(this.window.removeEventListener("resize",this.Y,!1),this.B=e,this.Ya=!0),"boolean"==typeof t.hyphenate&&(this.$.xe=t.hyphenate,this.Ya=!0),"boolean"==typeof t.horizontal&&(this.$.we=t.horizontal,this.Ya=!0),"boolean"==typeof t.nightMode&&(this.$.Ie=t.nightMode,this.Ya=!0),"number"==typeof t.lineHeight&&(this.$.lineHeight=t.lineHeight,this.Ya=!0),"number"==typeof t.columnWidth&&(this.$.pe=t.columnWidth,this.Ya=!0),"string"==typeof t.fontFamily&&(this.$.fontFamily=t.fontFamily,this.Ya=!0),"boolean"==typeof t.load&&(this.ca=t.load),"boolean"==typeof t.renderAllPages&&(this.Rb=t.renderAllPages),"string"==typeof t.userAgentRootURL&&(T=t.userAgentRootURL.replace(/resources\/?$/,""),N=t.userAgentRootURL),"string"==typeof t.rootURL&&(T=t.rootURL,N=T+"resources/"),"string"==typeof t.pageViewMode&&t.pageViewMode!==this.S&&(this.S=t.pageViewMode,this.Ya=!0),"number"==typeof t.pageBorder&&t.pageBorder!==this.$.Dc&&(this.viewport=null,this.$.Dc=t.pageBorder,this.Ya=!0),"number"==typeof t.zoom&&t.zoom!==this.zoom&&(this.zoom=t.zoom,this.hc=!0),"boolean"==typeof t.fitToScreen&&t.fitToScreen!==this.D&&(this.D=t.fitToScreen,this.hc=!0),"object"==typeof t.defaultPaperSize&&"number"==typeof t.defaultPaperSize.width&&"number"==typeof t.defaultPaperSize.height&&(this.viewport=null,this.$.vc=t.defaultPaperSize,this.Ya=!0),function(t,e){ni("CONFIGURATION").forEach(function(n){n=n(e),t.Ya=n.Ya||t.Ya,t.hc=n.hc||t.hc})}(this,t),ai(!0)},n.Me=function(t){var e=this.g,n=this.j,i=t.target;n?n.left!==i&&n.right!==i||iv(this,t.ag):e===t.target&&iv(this,t.ag)},n.Lg=function(t,e,n,i){this.Z[i]=t,function(t,e){if(!t.N&&t.G){var n="";Object.keys(e).forEach(function(t){n+="@page "+t+"{margin:0;size:",t=e[t],n+=t.width+"px "+t.height+"px;}"}),t.G.textContent=n,t.N=!0}}(this,e)};var ov={$g:"fit inside viewport"};function av(t,e){return Math.min(t.viewport.width/e.width,t.viewport.height/e.height)}function uv(){this.name="RenderingCanceledError",this.message="Page rendering has been canceled",this.stack=Error().stack}function sv(t){if(t.l){var e=t.l;if(gi(e,new uv),e!==ii&&e.b){e.b.g=!0;var n=new pi(e);e.l="interrupt",e.b=n,e.f.tb(n)}}t.l=null}function hv(t){if(t.Ya=!1,t.hc=!1,function(t){var e,n=nv(t);t:switch(t.S){case"singlePage":e=!1;break t;case"spread":e=!0;break t;default:e=1.45<=n.width/n.height&&800<n.width}var i=t.$.ub!==e;if(t.$.ub=e,t.ge.setAttribute("data-vivliostyle-spread-view",e),t.B||!t.viewport||t.viewport.fontSize!=t.fontSize)return!1;if(!i&&n.width==t.viewport.width&&n.height==t.viewport.height||!i&&n.width==t.viewport.width&&n.height!=t.viewport.height&&/Android|iPhone|iPad|iPod/.test(navigator.userAgent))return!0;if(e=t.b&&function(t){return t.Ib.some(function(t){return t&&0<t.Ka.length})}(t.b)){t:{for(i=(e=l(t.b.Ib)).next();!i.done;i=e.next())if(i=i.value)for(var r=(i=l(i.Ka)).next();!r.done;r=i.next())if((r=r.value).F&&r.D){e=!0;break t}e=!1}e=!e}return!!e&&(t.viewport.width=n.width,t.viewport.height=n.height,t.hc=!0)}(t))return ai(!0);$g(t,"loading"),sv(t);var e=ci(ii.f,function(){return ui("resize",function(n){t.O?(t.l=e,Iv.f("render (resize)"),function(t){var e=!1,n=!1;if(t.b){e=t.b.Rc(),n=t.b.wf,t.b.Td();for(var i=t.b,r=l(i.Ib),o=r.next();!o.done;o=r.next())(o=o.value)&&o.Ka.splice(0);for(i=i.viewport.root;i.lastChild;)i.removeChild(i.lastChild)}t.G&&(t.G.textContent="",t.N=!1),t.viewport=nv(t),M((i=t.viewport).g,"width",""),M(i.g,"height",""),M(i.f,"width",""),M(i.f,"height",""),M(i.f,"transform",""),t.b=new Og(t.O,t.viewport,t.sa,t.$,t.Lg.bind(t)),e&&t.h({a:"toc",v:"show",autohide:n})}(t),t.f&&(t.f.aa||t.f.Da)&&(t.f.aa=-1),function(t,e){t.S=e||t.F}(t.O,t.Rb),Bg(t.b,t.f,!t.Rb).then(function(i){i?(t.f=i.position,iv(t,i.page,!0).then(function(){$g(t,"interactive"),function(t,e){if(t.B=e,t.S)return t.F&&!t.l&&Ng(t),ai(!0);var n=0,i=0,r=oi("countEPages");return Ci(function(e){if(i===t.b.length)Ii(e);else{var r=t.b[i++];r.b=n,t.h.load(r.src).then(function(i){var o=1800,a=i.lang||t.lang;a&&a.match(/^(ja|ko|zh)/)&&(o/=3),r.f=Math.ceil(Rs(i)/o),n+=r.f,t.l=n,t.B&&t.B(t.l),Ni(e)})}}).Ga(r),r.result()}(t.O,function(e){e={t:"nav",epageCount:e,first:t.g.u,last:t.g.B,metadata:t.O.f,docTitle:t.O.b[t.f.P].h},(t.g.u||!t.f.aa&&t.O.b[t.f.P].b)&&(e.epage=t.O.b[t.f.P].b),Wg(t,e)}).then(function(){ev(t).then(function(i){(t.Rb?t.b.Rb():ai(null)).then(function(){t.l===e&&(t.l=null),Iv.b("render (resize)"),t.Rb&&$g(t,"complete"),Wg(t,{t:"loaded"}),xi(n,i)})})})})):xi(n,!1)})):xi(n,!1)},function(t,e){if(!(e instanceof uv))throw e;Iv.b("render (resize)"),C.debug(e.message)})});return ai(!0)}function lv(t){return"string"==typeof t?JSON.parse(t):t}function fv(t,e){var n=lv(e),i=null;!function(t){var e,n=ci;ii?e=ii.f:(e=ri)||(e=new li(new hi)),n(e,t,void 0)}(function(){var e=oi("commandLoop"),r=ii.f;return t.F=function(e){var n="#"===e.href.charAt(0)||t.J.some(function(t){return e.href.substr(0,t.length)==t});if(n){e.preventDefault();var i={t:"hyperlink",href:e.href,internal:n};ci(r,function(){return Wg(t,i),ai(!0)})}},Ci(function(e){if(t.Ya)hv(t).then(function(){Ni(e)});else if(t.hc)t.g&&iv(t,t.g).then(function(){Ni(e)});else if(n){var r=n;n=null,function(t,e){var n=e.a||"";return ui("runCommand",function(i){var r=t.la[n];r?r.call(t,e).then(function(){Wg(t,{t:"done",a:n}),xi(i,!0)}):(C.error("No such action:",n),xi(i,!0))},function(t,e){C.error(e,"Error during action:",n),xi(t,!0)})}(t,r).then(function(){Ni(e)})}else r=oi("waitForCommand"),i=Ai(r,self),r.result().then(function(){Ni(e)})}).Ga(e),e.result()}),t.I=function(){var t=i;t&&(i=null,t.tb())},t.h=function(e){return!n&&(n=lv(e),t.I(),!0)},t.window.adapt_command=t.h}function cv(t,e,n){if(t==e)return t?[[0,t]]:[];(0>n||t.length<n)&&(n=null);var i=bv(t,e),r=t.substring(0,i),o=(i=dv(t=t.substring(i),e=e.substring(i)),t.substring(t.length-i));return t=function(t,e){var n;if(!t)return[[1,e]];if(!e)return[[-1,t]];n=t.length>e.length?t:e;var i=t.length>e.length?e:t;if(-1!=(r=n.indexOf(i)))return n=[[1,n.substring(0,r)],[0,i],[1,n.substring(r+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=-1),n;if(1==i.length)return[[-1,t],[1,e]];if(o=function(t,e){function n(t,e,n){for(var i,r,o,a,u=t.substring(n,n+Math.floor(t.length/4)),s=-1,h="";-1!=(s=e.indexOf(u,s+1));){var l=bv(t.substring(n),e.substring(s)),f=dv(t.substring(0,n),e.substring(0,s));h.length<f+l&&(h=e.substring(s-f,s)+e.substring(s,s+l),i=t.substring(0,n-f),r=t.substring(n+l),o=e.substring(0,s-f),a=e.substring(s+l))}return 2*h.length>=t.length?[i,r,o,a,h]:null}var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>i.length||2*r.length<i.length)return null;var o,a,u=n(i,r,Math.ceil(i.length/4)),i=n(i,r,Math.ceil(i.length/2));if(!u&&!i)return null;o=i?u&&u[4].length>i[4].length?u:i:u;return t.length>e.length?(u=o[0],i=o[1],r=o[2],a=o[3]):(r=o[0],a=o[1],u=o[2],i=o[3]),[u,i,r,a,o[4]]}(t,e))return i=o[1],r=o[3],n=o[4],o=cv(o[0],o[2]),i=cv(i,r),o.concat([[0,n]],i);t:{n=t.length;for(var i=e.length,r=Math.ceil((n+i)/2),o=2*r,a=Array(o),u=Array(o),s=0;s<o;s++)a[s]=-1,u[s]=-1;a[r+1]=0,u[r+1]=0;for(var s=n-i,h=!!(s%2),l=0,f=0,c=0,p=0,b=0;b<r;b++){for(var d=-b+l;d<=b-f;d+=2){for(var g,v=r+d,w=(g=d==-b||d!=b&&a[v-1]<a[v+1]?a[v+1]:a[v-1]+1)-d;g<n&&w<i&&t.charAt(g)==e.charAt(w);)g++,w++;if(a[v]=g,g>n)f+=2;else if(w>i)l+=2;else if(h&&(0<=(v=r+s-d)&&v<o&&-1!=u[v])){var m=n-u[v];if(g>=m){n=pv(t,e,g,w);break t}}}for(d=-b+c;d<=b-p;d+=2){for(v=r+d,m=d==-b||d!=b&&u[v-1]<u[v+1]?u[v+1]:u[v-1]+1,g=m-d;m<n&&g<i&&t.charAt(n-m-1)==e.charAt(i-g-1);)m++,g++;if(u[v]=m,m>n)p+=2;else if(g>i)c+=2;else if(!h&&(0<=(v=r+s-d)&&v<o&&-1!=a[v]&&(g=a[v],w=r+g-v,g>=(m=n-m)))){n=pv(t,e,g,w);break t}}}n=[[-1,t],[1,e]]}return n}(t=t.substring(0,t.length-i),e=e.substring(0,e.length-i)),r&&t.unshift([0,r]),o&&t.push([0,o]),function t(e){e.push([0,""]);for(var n,i=0,r=0,o=0,a="",u="";i<e.length;)switch(e[i][0]){case 1:o++,u+=e[i][1],i++;break;case-1:r++,a+=e[i][1],i++;break;case 0:1<r+o?(r&&o&&((n=bv(u,a))&&(0<i-r-o&&0==e[i-r-o-1][0]?e[i-r-o-1][1]+=u.substring(0,n):(e.splice(0,0,[0,u.substring(0,n)]),i++),u=u.substring(n),a=a.substring(n)),(n=dv(u,a))&&(e[i][1]=u.substring(u.length-n)+e[i][1],u=u.substring(0,u.length-n),a=a.substring(0,a.length-n))),r?o?e.splice(i-r-o,r+o,[-1,a],[1,u]):e.splice(i-r,r+o,[-1,a]):e.splice(i-o,r+o,[1,u]),i=i-r-o+(r?1:0)+(o?1:0)+1):i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,r=o=0,u=a=""}""===e[e.length-1][1]&&e.pop();r=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),r=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),r=!0)),i++;r&&t(e)}(t),null!=n&&(t=function(t,e){var n;t:{var i=t;if(0!==e){var r=0;for(n=0;n<i.length;n++){var o=i[n];if(-1===o[0]||0===o[0]){var a=r+o[1].length;if(e===a){n=[n+1,i];break t}if(e<a){i=i.slice(),a=e-r,r=[o[0],o[1].slice(0,a)],o=[o[0],o[1].slice(a)],i.splice(n,1,r,o),n=[n+1,i];break t}r=a}}throw Error("cursor_pos is out of bounds!")}n=[0,i]}return i=n[1],n=n[0],r=i[n],o=i[n+1],null==r||0!==r[0]?t:null!=o&&r[1]+o[1]===o[1]+r[1]?(i.splice(n,2,o,r),gv(i,n,2)):null!=o&&0===o[1].indexOf(r[1])?(i.splice(n,2,[o[0],r[1]],[0,r[1]]),0<(r=o[1].slice(r[1].length)).length&&i.splice(n+2,0,[o[0],r]),gv(i,n,3)):t}(t,n)),function(t){function e(t){return 55296<=t.charCodeAt(t.length-1)&&56319>=t.charCodeAt(t.length-1)}function n(t){return 56320<=t.charCodeAt(0)&&57343>=t.charCodeAt(0)}for(var i=!1,r=2;r<t.length;r+=1)0===t[r-2][0]&&e(t[r-2][1])&&-1===t[r-1][0]&&n(t[r-1][1])&&1===t[r][0]&&n(t[r][1])&&(i=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));if(!i)return t;for(i=[],r=0;r<t.length;r+=1)0<t[r][1].length&&i.push(t[r]);return i}(t)}function pv(t,e,n,i){var r=t.substring(n),o=e.substring(i);return t=cv(t.substring(0,n),e.substring(0,i)),r=cv(r,o),t.concat(r)}function bv(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function dv(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function gv(t,e,n){for(n=e+n-1;0<=n&&n>=e-1;n--)if(n+1<t.length){var i=t[n],r=t[n+1];i[0]===r[1]&&t.splice(n,2,[i[0],i[1]+r[1]])}return t}function vv(t){return t.reduce(function(t,e){return e[0]===cv.b?t:t+e[1]},"")}function wv(t,e,n){var i=0,r=0;return t.some(function(t){for(var o=0;o<t[1].length;o++){switch(t[0]*n){case cv.f:i++;break;case cv.b:i--,r++;break;case cv.g:r++}if(r>e)return!0}return!1}),Math.max(Math.min(e,r-1)+i,0)}function mv(t,e,n,i,r){Jl.call(this,t,e,"block-end",null,n,r),this.g=i}function yv(t,e,n,i){Ql.call(this,t,"block-end",e,n,i)}function xv(t){this.f=t}function Ev(){}function Sv(t){return t.reduce(function(t,e){return t+e},0)/t.length}function kv(t,e){this.g(t,"end",e)}function Cv(t,e){this.g(t,"start",e)}function Av(t,e,n){n||(n=this.j.now());var i,r=this.h[t];for(r||(r=this.h[t]=[]),t=r.length-1;0<=t&&(!(i=r[t])||i[e]);t--)i=null;i||(i={},r.push(i)),i[e]=n}function Tv(){}function Nv(t){this.j=t,this.h={},this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=Tv}g(uv,Error),Yg.prototype.fc=function(){return this.b?this.b.fc(this.f):null},Yg.prototype.ta=function(t){var e=this;if("complete"!==this.u&&"next"!==t.where&&$g(this,"loading"),"string"==typeof t.where){switch(t.where){case"next":t=this.$.ub?this.b.Gg:this.b.nextPage;break;case"previous":t=this.$.ub?this.b.Jg:this.b.Oe;break;case"last":t=this.b.Ag;break;case"first":t=this.b.xg;break;default:return ai(!0)}if(t){var n=t;t=function(){return n.call(e.b,e.f,!e.Rb)}}}else if("number"==typeof t.epage){var i=t.epage;t=function(){return zg(e.b,i,!e.Rb)}}else{if("string"!=typeof t.url)return ai(!0);var r=t.url;t=function(){return Vg(e.b,r,e.f,!e.Rb)}}var o=oi("moveTo");return t.call(e.b).then(function(t){var n;if(t){e.f=t.position;var i=oi("moveTo.showCurrent");n=i.result(),iv(e,t.page,!e.Rb).then(function(){ev(e).Ga(i)})}else n=ai(!0);n.then(function(t){"loading"===e.u&&$g(e,"interactive"),xi(o,t)})}),o.result()},Yg.prototype.Uc=function(t){var e=!!t.autohide;t=t.v;var n=this.b.Rc(),i=e!=this.b.wf&&"hide"!=t;if(n){if("show"==t&&!i)return ai(!0)}else if("hide"==t)return ai(!0);if(n&&"show"!=t)return this.b.Td(),ai(!0);var r=this,o=oi("showTOC");return this.b.Uc(e).then(function(t){t&&(i&&(t.Pb={}),e&&t.addEventListener("hyperlink",function(){r.b.Td()},!1),t.addEventListener("hyperlink",r.F,!1)),xi(o,!0)}),o.result()},cv.f=1,cv.b=-1,cv.g=0,g(mv,Jl),mv.prototype.df=function(t){return!(t instanceof mv)},g(yv,Ql),yv.prototype.Ia=function(){return 1/0},yv.prototype.f=function(t){return t instanceof mv||this.Ia()<t.Ia()},xv.prototype.b=function(t){return!lh(t=Eh(t),this.f.b)},(n=Ev.prototype).Ff=function(t){return"footnote"===t.Ca},n.Ef=function(t){return t instanceof mv},n.Lf=function(t,e){var n="region",i=sf(e,n);return Sf(sf(e,"page"),i)&&(n="page"),n=new mv(i=Eh(t),n,e.h,t.Y,t.N),e.le(n),ai(n)},n.Mf=function(t,e,n,i){return new yv(t[0].ja.W,t,n,i)},n.xf=function(t,e){return sf(e,t.W).b.filter(function(t){return t instanceof yv})[0]||null},n.Bf=function(t,e,n){t.$f=!0,t.ve=!1;var i=t.element,r=n.j;e=e.b;var o=n.j.w&&"rtl"===n.j.w.direction,a={},u=r.B._pseudos;if(e=hb(r,e,o,r.B,a),u&&u.before){var s={},h=Cb(r,"http://www.w3.org/1999/xhtml","span");rb(h,"before"),i.appendChild(h),hb(r,e,o,u.before,s),delete s.content,Eb(r,h,s)}delete a.content,Eb(r,i,a),t.b=e,zc(t,i),(r=Lb(n.f,i))&&(t.marginLeft=rc(r.marginLeft),t.Z=rc(r.borderLeftWidth),t.I=rc(r.paddingLeft),t.marginTop=rc(r.marginTop),t.ca=rc(r.borderTopWidth),t.J=rc(r.paddingTop),t.marginRight=rc(r.marginRight),t.Za=rc(r.borderRightWidth),t.Y=rc(r.paddingRight),t.marginBottom=rc(r.marginBottom),t.Ba=rc(r.borderBottomWidth),t.S=rc(r.paddingBottom)),(n=Lb(n.f,i))&&(t.width=rc(n.width),t.height=rc(n.height))},n.og=function(t,e){switch(t.g){case xn:!function t(e,n,i){i===e.W?e.D.push(n):t(rf(e,i),n,i)}(e,new xv(t),t.W)}},jf.push(new Ev),Nv.prototype.l=function(){var t=this.h,e="";Object.keys(t).forEach(function(n){for(var i=t[n],r=i.length,o=0;o<r;o++){var a=i[o];e+=n,1<r&&(e+="("+o+")"),e+=" => start: "+a.start+", end: "+a.end+", duration: "+(a.end-a.start)+"\n"}}),C.g(e)},Nv.prototype.u=function(){this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=Tv},Nv.prototype.B=function(){this.g=Av,this.registerStartTiming=this.f=Cv,this.registerEndTiming=this.b=kv};var Iv,_v={now:Date.now},Lv=Iv=new Nv(window&&window.performance||_v);function jv(t){return(t=t.C)&&t instanceof Rv?t:null}function Ov(t,e){t&&function(t,e){for(var n=t;n;n=n.parent){var i=n.C;i&&i instanceof Rv&&!kh(n,i)&&e(i,n)}}(t.K?t.parent:t,function(t,n){t instanceof Nw||e.B.push(new Zv(n))})}function Rv(t,e){this.parent=t,this.j=e,this.b=null}function Fv(t,e){var n=Pv(t,e);return n?n.A:null}function Pv(t,e){do{if(!kh(e,t)&&e.M===t.j)return e}while(e=e.parent);return null}function Dv(t,e){t.b||Mv.some(function(e){return e.root===t.j&&(t.b=e.elements,!0)})||(t.b=new Bv(e,t.j),Mv.push({root:t.j,elements:t.b}))}Av.call(Lv,"load_vivliostyle","start",void 0),d("vivliostyle.profile.profiler",Lv),Nv.prototype.printTimings=Nv.prototype.l,Nv.prototype.disable=Nv.prototype.u,Nv.prototype.enable=Nv.prototype.B,Rv.prototype.We=function(){return"Repetitive elements owner formatting context (vivliostyle.repetitiveelements.RepetitiveElementsOwnerFormattingContext)"},Rv.prototype.ff=function(t,e){return e},Rv.prototype.Ye=function(){},Rv.prototype.Xe=function(){};var Mv=[];function Bv(t,e){this.N=t,this.yc=this.zc=this.u=this.D=this.l=this.B=null,this.G=this.I=0,this.Bc=this.Cc=!1,this.gd=this.re=!0,this.j=!1,this.Z=e,this.J=this.g=null,this.S=[],this.Y=[]}function Uv(t,e){t.zc||(t.zc=fh(e),t.B=e.M,t.D=e.A)}function zv(t,e){t.yc||(t.yc=fh(e),t.l=e.M,t.u=e.A)}function Vv(t,e,n,i,r){var o=n.A,a=n.A.ownerDocument.createElement("div");o.appendChild(a);var u=new Bl(r,a,n),s=u.za.g;return u.za.g=null,t.h=!0,Ul(u,new Ch(e)).ea(function(){if(t.h=!1,o.removeChild(a),o)for(;a.firstChild;){var e=a.firstChild;a.removeChild(e),e.setAttribute("data-adapt-spec","1"),i?o.insertBefore(e,i):o.appendChild(e)}return u.za.g=s,ai(!0)})}function Xv(t,e){return Hv(e,t.Y,function(){return Gv(t.J,e,!1)})}function Hv(t,e,n){var i=e.filter(function(e){return e.w.M===t.M&&e.w.K===t.K});return 0<i.length?i[0].result:(n=n(t),e.push({w:t,result:n}),n)}function Gv(t,e,n){for(var i=[];t;t=t.parentNode){if(e.M===t)return e.K;i.push(t)}for(t=e.M;t;t=t.parentNode){var r=i.indexOf(t);if(0<=r)return!!n&&!r;for(r=t;r;r=r.previousElementSibling)if(i.includes(r))return!0}return e.K}function Yv(t){return!!(!t.Bc&&t.re&&t.yc||!t.Cc&&t.gd&&t.zc)}function Wv(t){this.C=t}function $v(t){this.C=t}function Kv(t){this.C=t}function Jv(t){this.C=t}function Zv(t){this.w=Pv(t.C,t)}function qv(t){zl.call(this),this.C=t}function Qv(t){this.C=t}function tw(){}function ew(t){for(var e=[],n=t;n;n=n.Md)n.B.forEach(function(n){if(n instanceof Zv){var i=n.w.C.b;e.push(i)}n instanceof pw&&(i=new bw(n.w,n.f),e.push(i)),n instanceof em&&im(n,t).forEach(function(t){e.push(t)})});return e}Bv.prototype.b=function(t){var e=0;return t&&!this.f(t)?e:((!this.Bc||t&&Xv(this,t))&&(e+=this.G),this.Cc||(e+=this.I),e)},Bv.prototype.F=function(t){var e=0;return t&&!this.f(t)?e:(t&&Xv(this,t)&&(e+=this.G),this.gd||(e+=this.I),e)},Bv.prototype.f=function(t){var e=this;return Hv(t,this.S,function(){return Gv(e.Z,t,!0)})},Wv.prototype.b=function(){},Wv.prototype.f=function(t){return!!t},Wv.prototype.g=function(t,e,n,i){return(t=this.C.b)&&!t.j&&(t.D&&(t.I=Vc(t.D,n,t.N),t.D=null),t.u&&(t.G=Vc(t.u,n,t.N),t.u=null),t.j=!0),i},$v.prototype.b=function(){},$v.prototype.f=function(){return!0},$v.prototype.g=function(t,e,n,i){return i},g(Kv,Wv),Kv.prototype.b=function(t,e){Wv.prototype.b.call(this,t,e);var n=oi("BlockLayoutProcessor.doInitialLayout");return Dl(new Pl(new Qv(t.C),e.j),t).Ga(n),n.result()},Kv.prototype.f=function(){return!1},g(Jv,$v),Jv.prototype.b=function(t,e){return kh(t,this.C)||t.K||e.B.unshift(new Zv(t)),function(t,e){var n=t.C,i=oi("doLayout");return dw(yb(e.j,t,!1),e).then(function(t){var r=t;Ci(function(t){for(var i={};r;){if(i.Oa=!0,Nc(e,r,!1).then(function(i){return function(o){r=o,Cf(e.l)?Ii(t):e.g?Ii(t):r&&e.u&&r&&r.xa?Ii(t):r&&r.K&&r.M==n.j?Ii(t):i.Oa?i.Oa=!1:Ni(t)}}(i)),i.Oa)return void(i.Oa=!1);i={Oa:i.Oa}}Ii(t)}).then(function(){xi(i,r)})}),i.result()}(t,e)},(n=Zv.prototype).ke=function(t,e){var n=this.w.C.b;return!(n&&!Fc(this.w.A)&&Yv(n))||!(e&&!t||t&&t.xa)},n.nd=function(){var t=this.w.C.b;return!(!t||!Yv(t))&&(!t.Bc&&t.re&&t.yc?t.Bc=!0:!t.Cc&&t.gd&&t.zc&&(t.Cc=!0),!0)},n.cd=function(t,e,n,i){(n=this.w.C.b)&&t&&i.u&&(!e||Xv(n,e))&&(n.Bc=!1,n.re=!1)},n.Na=function(t,e){var n=this.w.C,i=this.w.C.b;if(!i)return ai(!0);var r=this.w;return function(t,e,n){var i=t.b;return i&&(t=Pv(t,e)).A?!i.zc||i.Cc?ai(!0):Vv(i,i.zc,t,t.A.firstChild,n):ai(!0)}(n,r,e).ea(function(){return function(t,e,n){var i=t.b;return i&&!i.Bc&&(t=Pv(t,e)).A?!i.yc||i.Bc?ai(!0):Vv(i,i.yc,t,null,n):ai(!0)}(n,r,e).ea(function(){return i.Cc=i.Bc=!1,i.re=!0,i.gd=!0,ai(!0)})})},n.se=function(t){return t instanceof Zv&&this.w.C===t.w.C},n.ue=function(){return 10},g(qv,zl),qv.prototype.qf=function(t){var e=this.C.b;return kh(t,this.C)||e.j?(kh(t,this.C)||t.K||!e||(e.Cc=!1,e.gd=!1),new Jv(this.C)):new Kv(this.C)},g(Qv,Ml),Qv.prototype.Cd=function(t){var e=this.C,n=t.w,i=e.b;if(n.parent&&e.j===n.parent.M){switch(n.u){case"header":if(!i.zc)return Uv(i,n),ai(!0);n.u="none";break;case"footer":if(!i.yc)return zv(i,n),ai(!0);n.u="none"}i.g||(i.g=n.M)}return Ml.prototype.Cd.call(this,t)},Qv.prototype.tc=function(t){var e=this.C,n=t.w;return n.M===e.j&&(e.b.J=t.ld&&t.ld.M,t.Vb=!0),"header"===n.u||"footer"===n.u?ai(!0):Ml.prototype.tc.call(this,t)},g(tw,Mc),tw.prototype.je=function(t,e,n){if(Yf(e,t))return Tc(e,t);var i=t.C;return Fv(i,t)?(n&&Ov(t.parent,e),kh(t,i)?Mc.prototype.je.call(this,t,e,n):Vl(new qv(i),t,e)):Qf(e,t)},tw.prototype.Ze=function(t){var e=jv(t).b;return!!e&&(e.h||e.B!==t.M&&e.l!==t.M||t.A.parentNode.removeChild(t.A),!1)},tw.prototype.Na=function(t,e,n,i){return Mc.prototype.Na.call(this,t,e,n,i)},tw.prototype.Fd=function(t,e,n,i){Mc.prototype.Fd(t,e,n,i)};var nw=new tw;function iw(t,e){if(!t||!t.J||t.K||Yf(e,t))return ai(t);var n=t.J;return cw(n,e,t).ea(function(i){var r=t.A;r.appendChild(i);var o=Vc(i,e,t.b);return r.removeChild(i),e.B.push(new pw(t,n,o)),ai(t)})}function rw(t,e,n){this.b=t,this.f=e,this.Nb=n}function ow(t){this.b=t}function aw(t){this.b=t}function uw(t,e,n){sw(n,function(n){Cs(t,n,e)})}function sw(t,e){var n=t._viewConditionalStyles;n&&n.forEach(function(t){t.Cg.matches()&&e(t.Mg)})}function hw(t,e,n){var i=lw;(!i[t]||i[t].cb<=n)&&(i[t]={Sa:e,cb:n})}ei("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Rv&&!(t instanceof Nw)?nw:null}),rw.prototype.matches=function(){var t=lw[this.b];return!!t&&null!=t.Sa&&bu(t.Sa,this.f,this.Nb)},ow.prototype.matches=function(){return this.b.some(function(t){return t.matches()})},aw.prototype.matches=function(){return this.b.every(function(t){return t.matches()})};var lw={};function fw(t,e){this.b=e,this.M=t}function cw(t,e,n){var i=n.A.ownerDocument.createElement("div"),r=new Bl(e,i,n),o=r.za.g;return r.za.g=null,Ul(r,function(t){var e=nb.createElementNS("http://www.w3.org/1999/xhtml","div");return rb(e,"after-if-continues"),t=new bh(t.M,e,null,null,null,3,t.b),new Ch({pa:[{node:e,kb:t.type,wa:t,Ja:null,Fa:null}],na:0,K:!1,Qa:null})}(t)).ea(function(){t.b.f["after-if-continues"]=!1,r.za.g=o;var e=i.firstChild;return M(e,"display","block"),ai(e)})}function pw(t,e,n){this.w=t,this.b=e,this.f=n}function bw(t,e){this.w=t,this.g=e}function dw(t,e){return t.ea(function(t){return iw(t,e)})}function gw(t,e,n){var i=t.w,r=i.display,o=i.parent?i.parent.display:null,a=!1;if("inline-table"===o&&!(i.C instanceof Nw))for(var u=i.parent;u;u=u.parent)if(u.C instanceof Nw){a=u.C===e;break}return a||"table-row"===r&&!vw(o)&&"table"!==o&&"inline-table"!==o||"table-cell"===r&&"table-row"!==o&&!vw(o)&&"table"!==o&&"inline-table"!==o||i.C instanceof Nw&&i.C!==e?Qf(n,i).ea(function(e){return t.w=e,ai(!0)}):null}function vw(t){return"table-row-group"===t||"table-header-group"===t||"table-footer-group"===t}function ww(t,e){this.rowIndex=t,this.M=e,this.b=[]}function mw(t,e,n){this.rowIndex=t,this.Ra=e,this.g=n,this.f=n.colSpan||1,this.rowSpan=n.rowSpan||1,this.height=0,this.b=null}function yw(t,e,n){this.rowIndex=t,this.Ra=e,this.bc=n}function xw(t,e,n){this.g=t,this.b=n,this.lc=new Bl(t,e,n),this.f=!1}function Ew(t,e){this.A=t,this.b=e}function Sw(t,e,n,i){Vf.call(this,t,e,n,i),this.C=t.C,this.rowIndex=this.l=null}function kw(t){return t.l||(t.l=function(t){return jw(t.C,null!=t.rowIndex?t.rowIndex:t.rowIndex=_w(t.C,t.position.M)).map(t.C.Sd,t.C)}(t).map(function(t){return t.ec()})),t.l}function Cw(t,e,n){this.rowIndex=t,this.j=e,this.C=n,this.h=null}function Aw(t){return t.h||(t.h=Tw(t).map(function(t){return t.ec()})),t.h}function Tw(t){return Lw(t.C,t.rowIndex).map(t.C.Sd,t.C)}function Nw(t,e){Rv.call(this,t,e),this.F=e,this.u=!1,this.G=-1,this.N=0,this.I=[],this.J=this.B=null,this.S=0,this.g=[],this.l=[],this.f=[],this.D=null,this.h=[],this.b=null}function Iw(t,e){var n=t.l[e];return n||(n=t.l[e]=[]),n}function _w(t,e){return t.g.findIndex(function(t){return e===t.M})}function Lw(t,e){return Iw(t,e).reduce(function(t,e){return e.bc!==t[t.length-1]?t.concat(e.bc):t},[])}function jw(t,e){return Lw(t,e).filter(function(t){return t.rowIndex+t.rowSpan-1>e})}function Ow(t){return 0>t.G&&(t.G=Math.max.apply(null,t.g.map(function(t){return t.b.reduce(function(t,e){return t+e.f},0)}))),t.G}function Rw(t,e){t.B.forEach(function(t){t instanceof Zv&&e.push(t.w.C.b),t instanceof em&&im(t,null).forEach(function(t){e.push(t)})})}function Fw(t){this.f=t}function Pw(t,e,n){var i=0;return t.f.forEach(function(t){t=Uf(e,t),i=Math.max(i,n(t))}),i}function Dw(t,e){this.C=t,this.h=e,this.rowIndex=-1,this.Ra=0,this.g=!1,this.f=[]}function Mw(t,e){var n=e.w;n&&n.A&&!vc(n)&&t.f.push(n.clone())}function Bw(t,e){0<t.f.length&&pc(t.h,e.w,t.f),t.f=[]}function Uw(t,e){this.gc=!0,this.C=t,this.f=e,this.l=!1,this.b=-1,this.g=0,this.u=e.u,e.u=!1}(n=pw.prototype).ke=function(t,e){return!(e&&!t||t&&t.xa)},n.nd=function(){return!1},n.cd=function(){},n.Na=function(t,e){var n=this;return new bw(this.w,this.f).f(t)?cw(this.b,e,this.w).ea(function(t){return n.w.A.appendChild(t),ai(!0)}):ai(!0)},n.se=function(t){return t instanceof pw&&this.b==t.b},n.ue=function(){return 9},bw.prototype.b=function(t){return this.f(t)?this.g:0},bw.prototype.F=function(t){return this.b(t)},bw.prototype.f=function(t){if(!t)return!1;var e=t.wa?t.wa.oa:t.M;if(e===this.w.M)return!!t.K;for(t=e.parentNode;t;t=t.parentNode)if(t===this.w.M)return!0;return!1},xw.prototype.ec=function(){var t=this.b.A,e=this.b.Z;"middle"!==e&&"bottom"!==e||M(t,"vertical-align","top");var n=this.lc.ec(!0);return M(t,"vertical-align",e),n},g(Sw,Vf),Sw.prototype.f=function(t,e){var n=Vf.prototype.f.call(this,t,e);return e<this.b()?null:kw(this).every(function(t){return!!t.w})?n:null},Sw.prototype.b=function(){var t=Vf.prototype.b.call(this);return kw(this).forEach(function(e){t+=e.Eb.b()}),t},g(Cw,Bf),Cw.prototype.f=function(t,e){if(e<this.b())return null;var n=Tw(this),i=Aw(this),r=i.every(function(t){return!!t.w})&&i.some(function(t,e){var i=n[e].lc,r=t.w,o=i.tf[0];return!(o.A===r.A&&o.K===r.K&&o.na===r.na||lh(Eh(r),i.za.xb))});return this.j.xa=i.some(function(t){return t.w&&t.w.xa}),r?this.j:null},Cw.prototype.b=function(){var t=this.C,e=0;return function(t){return Math.min.apply(null,t.b.map(function(t){return t.height}))}(t.g[this.rowIndex])>t.N/2||(e+=10),Aw(this).forEach(function(t){e+=t.Eb.b()}),e},g(Nw,Rv),(n=Nw.prototype).We=function(){return"Table formatting context (vivliostyle.table.TableFormattingContext)"},n.ff=function(t,e){if(!e)return e;switch(t.display){case"table-row":return!this.h.length;case"table-cell":return!this.h.some(function(e){return e.Id.pa[0].node===t.M});default:return e}},n.Sd=function(t){return this.f[t.rowIndex]&&this.f[t.rowIndex][t.Ra]},n.Ye=function(){return[].concat(this.h)},n.Xe=function(t){this.h=t},Fw.prototype.b=function(t){return Pw(this,t,function(t){return t.current})},Fw.prototype.F=function(t){return Pw(this,t,function(t){return t.He})},g(Dw,Ml),(n=Dw.prototype).Cd=function(t){var e=this.C;if(n=gw(t,e,this.h))return n;Bw(this,t);var n=t.w,i=e.b;switch(n.display){case"table":e.S=n.sa;break;case"table-caption":e.I.push(new Ew(n.A,n.la));break;case"table-header-group":return i.zc||(this.b=!0,Uv(i,n)),ai(!0);case"table-footer-group":return i.yc||(this.b=!0,zv(i,n)),ai(!0);case"table-row":this.b||(this.g=!0,this.rowIndex++,this.Ra=0,e.g[this.rowIndex]=new ww(this.rowIndex,n.M),i.g||(i.g=n.M))}return Ml.prototype.Cd.call(this,t)},n.tc=function(t){var e=this.C,n=t.w,i=n.display,r=this.h.f;if(Bw(this,t),n.M===e.F)i=Lb(r,Fv(e,n)),e.N=parseFloat(i[e.u?"height":"width"]),e.b.J=t.ld&&t.ld.M,t.Vb=!0;else switch(i){case"table-header-group":case"table-footer-group":if(this.b)return this.b=!1,ai(!0);break;case"table-row":this.b||(e.D=n.A,this.g=!1);break;case"table-cell":if(!this.b){this.g||(this.rowIndex++,this.Ra=0,this.g=!0),i=this.rowIndex,n=new mw(this.rowIndex,this.Ra,n.A),(r=e.g[i])||(e.g[i]=new ww(i,null),r=e.g[i]),r.b.push(n);r=i+n.rowSpan;for(var o=Iw(e,i),a=0;o[a];)a++;for(;i<r;i++){o=Iw(e,i);for(var u=a;u<a+n.f;u++){var s=o[u]=new yw(i,u,n);n.b||(n.b=s)}}this.Ra++}}return Ml.prototype.tc.call(this,t)},n.uf=function(t){Mw(this,t)},n.Df=function(t){Mw(this,t)},n.kg=function(t){Mw(this,t)},n.Cf=function(t){Mw(this,t)},g(Uw,Ml);var zw={"table-caption":!0,"table-column-group":!0,"table-column":!0};function Vw(t,e,n,i){var r=e.rowIndex,o=e.Ra,a=n.A;if(1<e.f){M(a,"box-sizing","border-box");for(var u=t.C.J,s=0,h=0;h<e.f;h++)s+=u[e.b.Ra+h];s+=t.C.S*(e.f-1),M(a,t.C.u?"height":"width",s+"px")}return e=a.ownerDocument.createElement("div"),a.appendChild(e),n=new xw(t.f,e,n),(a=(t=t.C).f[r])||(a=t.f[r]=[]),a[o]=n,1===i.f.pa.length&&i.f.K&&(n.f=!0),Ul(n.lc,i).Hc(!0)}function Xw(t,e){if(t.j||t.h)return ai(!0);var n=e.w,i=t.C;return 0>t.b?t.b=_w(i,n.M):t.b++,t.g=0,t.l=!0,function(t,e){var n=t.C,i=function(t){var e=t.C.h;if(!e.length)return[];var n=[],i=0;do{var r=e[i],o=r.bc.rowIndex;if(o<t.b){var a=n[o];a||(a=n[o]=[]),a.push(r),e.splice(i,1)}else i++}while(i<e.length);return n}(t),r=i.reduce(function(t){return t+1},0);if(0===r)return ai(!0);var o=t.f.j,a=e.w;a.A.parentNode.removeChild(a.A);var u=oi("layoutRowSpanningCellsFromPreviousFragment"),s=ai(!0),h=0,l=[];return i.forEach(function(t){var e=this;s=s.ea(function(){var i=ch(t[0].Id.pa[1],a.parent);return wb(o,i,!1).ea(function(){function a(t){for(;s<t;){if(!l.includes(s)){var e=i.A.ownerDocument.createElement("td");M(e,"padding","0"),i.A.appendChild(e)}s++}}var u=ai(!0),s=0;return t.forEach(function(t){var e=this;u=u.ea(function(){var n=t.bc;a(n.b.Ra);var u=t.Id,f=ch(u.pa[0],i);return f.na=u.na,f.K=u.K,f.Sa=u.pa[0].Sa+1,wb(o,f,!1).ea(function(){for(var i=t.Hf,o=0;o<n.f;o++)l.push(s+o);return s+=n.f,Vw(e,n,f,i).ea(function(){return f.A.rowSpan=n.rowIndex+n.rowSpan-e.b+r-h,ai(!0)})})})},e),u.ea(function(){return a(Ow(n)),h++,ai(!0)})})})},t),s.then(function(){wb(o,a,!0,e.Gd).then(function(){xi(u,!0)})}),u.result()}(t,e).ea(function(){return function(t){t.C.g[t.b].b.forEach(function(e){var n=t.C.h[e.Ra];n&&n.bc.b.Ra==e.b.Ra&&(e=n.Id.pa[0],hw(n=js(t.f.j.da,e.node),e.Sa+1,1))})}(t),kc(t.f,e.ld,null,!0,e.dd)&&!jw(i,t.b-1).length&&(t.f.u=t.u,n.xa=!0,e.Vb=!0),ai(!0)})}Uw.prototype.lg=function(t){if(e=gw(t,this.C,this.f))return e;var e=t.w,n=this.C.b,i=e.display;return"table-header-group"===i&&n&&n.B===e.M?(this.j=!0,ai(!0)):"table-footer-group"===i&&n&&n.l===e.M?(this.h=!0,ai(!0)):"table-row"===i?Xw(this,t):"table-cell"===i?function(t,e){if(t.j||t.h)return ai(!0);var n=e.w;t.l||(0>t.b?t.b=0:t.b++,t.g=0,t.l=!0);var i=t.C.g[t.b].b[t.g],r=yh(n).modify();r.K=!0,e.w=r;var o=oi("startTableCell");return function(t,e){var n=t.C.h[0];return!!n&&n.bc.b.Ra===e}(t,i.b.Ra)?(r=t.C.h.shift(),n.Sa=r.Id.pa[0].Sa+1,r=ai(r.Hf)):r=qf(t.f,n,e.Gd).ea(function(t){return t.A&&n.A.removeChild(t.A),ai(new Ch(fh(t)))}),r.then(function(r){Vw(t,i,n,r).then(function(){t.tc(e),t.g++,xi(o,!0)})}),o.result()}(this,t):ai(!0)},Uw.prototype.Nf=function(t){return"table-row"===(t=t.w).display&&(this.l=!1,this.j||this.h||((t=yh(t).modify()).K=!1,this.f.N.push(new Cw(this.b,t,this.C)))),ai(!0)},Uw.prototype.tc=function(t){var e=t.w,n=this.C.b,i=e.display;if("table-header-group"===i?n&&!n.h&&n.B===e.M?(this.j=!1,e.A.parentNode.removeChild(e.A)):M(e.A,"display","table-row-group"):"table-footer-group"===i&&(n&&!n.h&&n.l===e.M?(this.h=!1,e.A.parentNode.removeChild(e.A)):M(e.A,"display","table-row-group")),i&&zw[i])e.A.parentNode.removeChild(e.A);else{if(e.M!==this.C.F)return Ml.prototype.tc.call(this,t);e.xa=Sc(this.f,e,null),this.f.u=this.u,t.Vb=!0}return ai(!0)};var Hw=[];function Gw(){}function Yw(t){var e=[];for(t=t.firstElementChild;t;)"colgroup"===t.localName&&e.push(t),t=t.nextElementSibling;return e}function Ww(t,e,n){var i=t.u,r=t.D;if(r){t.D=null;var o=r.ownerDocument.createDocumentFragment(),a=Ow(t);if(0<a){var u=t.J=function(t,e,n,i){for(var r=t.ownerDocument,o=r.createElement("tr"),a=[],u=0;u<e;u++){var s=r.createElement("td");o.appendChild(s),a.push(s)}return t.parentNode.insertBefore(o,t.nextSibling),e=a.map(function(t){return t=_b(i,t),n?t.height:t.width}),t.parentNode.removeChild(o),e}(r,a,i,n.f);(function(t,e,n,i){if(t.length<n){var r=i.ownerDocument.createElement("colgroup");for(e.push(r),e=t.length;e<n;e++){var o=i.ownerDocument.createElement("col");r.appendChild(o),t.push(o)}}})(r=function(t){var e=[];return t.forEach(function(t){var n=t.span;t.removeAttribute("span");for(var i=t.firstElementChild;i;){if("col"===i.localName){var r=i.span;for(i.removeAttribute("span"),n-=r;1<r--;){var o=i.cloneNode(!0);t.insertBefore(o,i),e.push(o)}e.push(i)}i=i.nextElementSibling}for(;0<n--;)i=t.ownerDocument.createElement("col"),t.appendChild(i),e.push(i)}),e}(n=Yw(e)),n,a,e),r.forEach(function(t,e){M(t,i?"height":"width",u[e]+"px")}),n.forEach(function(t){o.appendChild(t.cloneNode(!0))})}t.B=o}}function $w(t,e,n){var i=e.C;i.u=e.b,Dv(i,e.b);var r=function(t){var e=Hw.findIndex(function(e){return e.root===t});return(e=Hw[e])?e.Og:null}(e.M);!function(t){var e=Hw.findIndex(function(e){return e.root===t});0<=e&&Hw.splice(e,1)}(e.M);var o=oi("TableLayoutProcessor.doInitialLayout"),a=yh(e);return Dl(new Pl(new Dw(e.C,n),n.j),e).then(function(t){var u=t.A,s=_b(n.f,u);s=(s=n.b?s.left:s.bottom)+(n.b?-1:1)*Uf(e,ew(n)).current;Wf(n,s)||r&&r.tg?(Ww(i,u,n),function(t,e){t.g.forEach(function(t){t.b.forEach(function(t){var n=_b(e,t.g);t.g=null,t.height=this.u?n.width:n.height},this)},t)}(i,n.f),xi(o,null)):(n.N.push(new qw(a)),xi(o,t))}.bind(t)),o.result()}function Kw(t,e){if(t.B&&e){var n=Yw(e);n&&n.forEach(function(t){e.removeChild(t)})}}function Jw(t,e){zl.call(this),this.g=e,this.b=t}function Zw(t,e){this.C=t,this.h=e}function qw(t){Vf.call(this,t,null,t.xa,0)}function Qw(t){this.b=t}function tm(t){this.C=t}function em(t){Zv.call(this,t),this.b=[]}function nm(t,e){return function(t,e){var n=Number.MAX_VALUE;t&&"table-row"===t.display&&(n=_w(e,t.M)+1);for(var n=Math.min(e.f.length,n),i=[],r=0;r<n;r++)e.f[r]&&e.f[r].forEach(function(t){t&&i.push({yg:t,Eb:t.ec().w})});return i}(t,e).map(function(t){return{Kd:t.yg.lc.za.B,Eb:t.Eb}})}function im(t,e){var n=t.w.C,i=function(t,e){if(!e)return null;var n=null,i=0;t:for(;i<t.f.length;i++)if(t.f[i])for(var r=0;r<t.f[i].length;r++)if(t.f[i][r]&&e===t.f[i][r].lc.za){n=t.g[i].b[r];break t}if(!n)return null;for(;i<t.l.length;i++)for(;r<t.l[i].length;r++){var o=t.l[i][r];if(o.bc===n)return{rowIndex:o.rowIndex,Ra:o.Ra}}return null}(n,e);return i?function(t,e){var n=[];return t.l.reduce(function(i,r,o){return o>=e.rowIndex?i:!(r=t.Sd(r[e.Ra].bc))||n.includes(r)?i:(Rw(r.lc.za,i),n.push(r),i)},[])}(n,i):function(t){var e=[];return t.g.forEach(function(n){n.b.forEach(function(n,i){e[i]||(e[i]={Jf:[],elements:[]});var r=e[i],o=t.Sd(n);o&&!r.Jf.includes(o)&&(Rw(o.lc.za,r.elements),r.Jf.push(o))})}),[new Fw(e.map(function(t){return t.elements}))]}(n)}(n=Gw.prototype).je=function(t,e,n){var i=t.C;return Fv(i,t)?(n&&Ov(t.parent,e),Vl(new Jw(i,this),t,e)):Qf(e,t)},n.Kf=function(t,e,n,i){return new Sw(t,e,n,i)},n.Ze=function(){return!1},n.Af=function(){return!1},n.Na=function(t,e,n,i){var r=e.C;if("table-row"===e.display){var o,a=_w(r,e.M);if(r.h=[],(o=e.K?jw(r,a):Lw(r,a)).length){var u=oi("TableLayoutProcessor.finishBreak"),s=0;return Ci(function(t){if(s===o.length)Ii(t);else{var e=o[s++],n=r.Sd(e),i=n.ec().w,u=n.b,h=Eh(u),l=new Ch(Eh(i));r.h.push({Id:h,Hf:l,bc:e}),u=u.A,Ab(n.b),a<e.rowIndex+e.rowSpan-1&&(u.rowSpan=a-e.rowIndex+1),n.f?Ni(t):n.lc.Na(i,!1,!0).then(function(){var e=r.b;if(e){var o=r.u,a=n.g,u=n.lc.za.element,s=n.b.A,h=_b(a.f,s);s=ac(a,s);o?M(u,"max-width",(e=h.right-a.la-e.b(i)-s.right)+"px"):M(u,"max-height",(e=a.la-e.b(i)-h.top-s.top)+"px"),M(u,"overflow","hidden")}Ni(t)})}}).then(function(){Ic(t,e,!1),Ab(e),r.f=[],xi(u,!0)}),u.result()}}return r.f=[],Bc.Na(t,e,n,i)},n.Fd=function(t,e,n,i){Mc.prototype.Fd(t,e,n,i)},g(Jw,zl),Jw.prototype.qf=function(t){var e=this.b.b;return e&&e.j?(t.M===this.b.F&&!t.K&&e&&(e.Cc=!1,e.gd=!1),new tm(this.b)):new Zw(this.b,this.g)},Jw.prototype.Jd=function(t){zl.prototype.Jd.call(this,t),Kw(this.b,Fv(this.b,t))},Jw.prototype.ie=function(t,e){zl.prototype.ie.call(this,t,e),this.b.f=[]},g(Zw,Wv),Zw.prototype.b=function(t,e){return Wv.prototype.b.call(this,t,e),$w(this.h,t,e)},g(qw,Vf),qw.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.j?3:0)+(this.position.parent?this.position.parent.j:0)},qw.prototype.u=function(t){t.B.push(new Qw(this.position.M))},(n=Qw.prototype).ke=function(){return!1},n.nd=function(){return!0},n.cd=function(t,e){Hw.push({root:e.M,Og:{tg:!0}})},n.Na=function(){return ai(!0)},n.se=function(t){return t instanceof Qw&&t.b===this.b},n.ue=function(){return 0},g(tm,$v),tm.prototype.b=function(t,e){var n=this.C.b;if(n&&!Xv(n,t)){var i=new em(t);e.B.some(function(t){return i.se(t)})||e.B.unshift(i)}return function(t,e){var n=t.C,i=Fv(n,t),r=i.firstChild;return function(t,e,n){var i=t.I;i.forEach(function(t,r){t&&(e.insertBefore(t.A,n),"top"===t.b&&(i[r]=null))})}(n,i,r),n.B&&!Yw(i).length&&i.insertBefore(n.B.cloneNode(!0),r),n=new Pl(n=new Uw(n,e),e.j),i=oi("TableFormattingContext.doLayout"),Dl(n,t).Ga(i),i.result()}(t,e)},g(em,Zv),(n=em.prototype).ke=function(t,e,n){var i=this.w.C.b;return!(i&&!n.Md&&!Fc(this.w.A)&&Yv(i))||!(e&&!t||t&&t.xa)},n.nd=function(t){return!!nm(t,this.w.C).some(function(e){return e.Kd.some(function(e){return e.nd(t)})})||Zv.prototype.nd.call(this,t)},n.cd=function(t,e,n,i){var r=this.w.C;this.b=nm(e,r),this.b.forEach(function(e){e.Kd.forEach(function(r){r.cd(t,e.Eb,n,i)})}),t||(Kw(r,Fv(r,this.w)),function(t){if(t&&"table-row"===t.display&&t.A)for(;t.A.previousElementSibling;){var e=t.A.previousElementSibling;e.parentNode&&e.parentNode.removeChild(e)}}(n)),Zv.prototype.cd.call(this,t,e,n,i)},n.Na=function(t,e){var n=this,i=oi("finishBreak"),r=this.b.reduce(function(t,e){return t.concat(e.Kd.map(function(t){return{vg:t,Eb:e.Eb}}))},[]),o=0;return ki(function(){if(o<r.length){var t=r[o++];return t.vg.Na(t.Eb,e).Hc(!0)}return ai(!1)}).then(function(){xi(i,!0)}),i.result().ea(function(){return Zv.prototype.Na.call(n,t,e)})},n.se=function(t){return t instanceof em&&this.w.C===t.w.C};var rm=new Gw;function om(t){function e(t){return"number"==typeof t?t:null}function n(t){return"string"==typeof t?{url:t,wb:null,nc:null}:{url:t.url,wb:e(t.startPage),nc:e(t.skipPagesBefore)}}return Array.isArray(t)?t.map(n):t?[n(t)]:null}function am(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];switch(n){case"autoResize":e.autoresize=i;break;case"pageBorderWidth":e.pageBorder=i;break;default:e[n]=i}}),e}function um(t,e){Ts=t.debug,this.g=!1,this.h=t,this.gb=new Yg(t.window||window,t.viewportElement,"main",this.wg.bind(this)),this.f={autoResize:!0,fontSize:16,pageBorderWidth:1,renderAllPages:!0,pageViewMode:"autoSpread",zoom:1,fitToScreen:!1,defaultPaperSize:void 0},e&&this.jg(e),this.b=new et,Object.defineProperty(this,"readyState",{get:function(){return this.gb.u}})}function sm(t,e,n,i,r){function o(t){if(t)return t.map(function(t){return{url:t.url||null,text:t.text||null}})}var a=o((i=i||{}).authorStyleSheet),u=o(i.userStyleSheet);r&&Object.assign(t.f,r),e=Object.assign({a:e?"loadXML":"loadPublication",userAgentRootURL:t.h.userAgentRootURL,url:om(e)||n,document:i.documentObject,fragment:i.fragment,authorStyleSheet:a,userStyleSheet:u},am(t.f)),t.g?t.gb.h(e):(t.g=!0,fv(t.gb,e))}ei("RESOLVE_FORMATTING_CONTEXT",function(t,e,n){return e&&n===Pn?new Nw((e=t.parent)?e.C:null,t.M):null}),ei("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Nw?rm:null}),Array.from||(Array.from=function(t,e,n){e&&n&&(e=e.bind(n)),n=[];for(var i=t.length,r=0;r<i;r++)n[r]=e?e(t[r],r):t[r];return n}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t,e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n,i=Object(this),r=i.length>>>0,o=0;o<r;o++)if(n=i[o],t.call(e,n,o,i))return o;return-1},enumerable:!1,configurable:!1,writable:!1}),Object.assign||(Object.assign=function(t,e){return e?(Object.keys(e).forEach(function(n){t[n]=e[n]}),t):t}),(n=um.prototype).jg=function(t){var e=Object.assign({a:"configure"},am(t));this.gb.h(e),Object.assign(this.f,t)},n.wg=function(t){var e={type:t.t};Object.keys(t).forEach(function(n){"t"!==n&&(e[n]=t[n])}),nt(this.b,e)},n.Pg=function(t,e){this.b.addEventListener(t,e,!1)},n.Sg=function(t,e){this.b.removeEventListener(t,e,!1)},n.Bg=function(t,e,n){t||nt(this.b,{type:"error",content:"No URL specified"}),sm(this,t,null,e,n)},n.Qg=function(t,e,n){t||nt(this.b,{type:"error",content:"No URL specified"}),sm(this,null,t,e,n)},n.fc=function(){return this.gb.fc()},n.Eg=function(t,e){if("epage"===t)this.gb.h({a:"moveTo",epage:e});else{var n;t:switch(t){case"left":n="ltr"===this.fc()?"previous":"next";break t;case"right":n="ltr"===this.fc()?"next":"previous";break t;default:n=t}this.gb.h({a:"moveTo",where:n})}},n.Dg=function(t){this.gb.h({a:"moveTo",url:t})},n.Rc=function(){return this.gb.b&&this.gb.b.O&&(this.gb.b.O.Yb||this.gb.b.O.lf)?!!this.gb.b.Rc():null},n.Uc=function(t,e){this.gb.h({a:"toc",v:null==t?"toggle":t?"show":"hide",autohide:e})},n.Rg=function(t){t:{var e=this.gb;if(!e.g)throw Error("no page exists.");switch(t){case"fit inside viewport":t=av(e,e.$.ub?rv(e,e.j):e.g.f);break t;default:throw Error("unknown zoom type: "+t)}}return t},n.zg=function(){return this.gb.Z},d("vivliostyle.viewer.Viewer",um),um.prototype.setOptions=um.prototype.jg,um.prototype.addListener=um.prototype.Pg,um.prototype.removeListener=um.prototype.Sg,um.prototype.loadDocument=um.prototype.Bg,um.prototype.loadPublication=um.prototype.Qg,um.prototype.getCurrentPageProgression=um.prototype.fc,um.prototype.navigateToPage=um.prototype.Eg,um.prototype.navigateToInternalUrl=um.prototype.Dg,um.prototype.isTOCVisible=um.prototype.Rc,um.prototype.showTOC=um.prototype.Uc,um.prototype.queryZoomFactor=um.prototype.Rg,um.prototype.getPageSizes=um.prototype.zg,d("vivliostyle.viewer.ZoomType",ov),ov.FIT_INSIDE_VIEWPORT="fit inside viewport",d("vivliostyle.viewer.PageViewMode",Gg),Gg.SINGLE_PAGE="singlePage",Gg.SPREAD="spread",Gg.AUTO_SPREAD="autoSpread",Av.call(Iv,"load_vivliostyle","end",void 0);var hm=16,lm="ltr";function fm(t){window.adapt_command(t)}function cm(){fm({a:"moveTo",where:"ltr"===lm?"previous":"next"})}function pm(){fm({a:"moveTo",where:"ltr"===lm?"next":"previous"})}function bm(t){var e=t.key,n=t.keyIdentifier,i=t.location;"End"===e||"End"===n?(fm({a:"moveTo",where:"last"}),t.preventDefault()):"Home"===e||"Home"===n?(fm({a:"moveTo",where:"first"}),t.preventDefault()):"ArrowUp"===e||"Up"===e||"Up"===n?(fm({a:"moveTo",where:"previous"}),t.preventDefault()):"ArrowDown"===e||"Down"===e||"Down"===n?(fm({a:"moveTo",where:"next"}),t.preventDefault()):"ArrowRight"===e||"Right"===e||"Right"===n?(pm(),t.preventDefault()):"ArrowLeft"===e||"Left"===e||"Left"===n?(cm(),t.preventDefault()):"0"===e||"U+0030"===n?(fm({a:"configure",fontSize:Math.round(hm)}),t.preventDefault()):"t"===e||"U+0054"===n?(fm({a:"toc",v:"toggle",autohide:!0}),t.preventDefault()):"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&i===KeyboardEvent.b?(hm*=1.2,fm({a:"configure",fontSize:Math.round(hm)}),t.preventDefault()):("-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&i===KeyboardEvent.b)&&(hm/=1.2,fm({a:"configure",fontSize:Math.round(hm)}),t.preventDefault())}function dm(t){switch(t.t){case"loaded":t=t.viewer;var e=lm=t.fc();t.ge.setAttribute("data-vivliostyle-page-progression",e),t.ge.setAttribute("data-vivliostyle-spread-view",t.$.ub),window.addEventListener("keydown",bm,!1),document.body.setAttribute("data-vivliostyle-viewer-status","complete"),(t=document.getElementById("vivliostyle-page-navigation-left")).addEventListener("click",cm,!1),(e=document.getElementById("vivliostyle-page-navigation-right")).addEventListener("click",pm,!1),[t,e].forEach(function(t){t.setAttribute("data-vivliostyle-ui-state","attention"),window.setTimeout(function(){t.removeAttribute("data-vivliostyle-ui-state")},1e3)});break;case"nav":(t=t.cfi)&&location.replace(function(t,e){var n=new RegExp("#(.*&)?"+W("f")+"=([^#&]*)"),i=t.match(n);return i?(n=i[2].length,i=i.index+i[0].length-n,t.substr(0,i)+e+t.substr(i+n)):t.match(/#/)?t+"&f="+e:t+"#f="+e}(location.href,G(t||"")));break;case"hyperlink":t.internal&&fm({a:"moveTo",url:t.href})}}return d("vivliostyle.viewerapp.main",function(t){var e,n=t&&t.fragment||L("f"),i=t&&t.pubURL||L("b"),r=t&&t.xmlURL||L("x"),o=t&&t.defaultPageWidth||L("w"),a=t&&t.defaultPageHeight||L("h"),u=t&&t.defaultPageSize||L("size"),s=t&&t.orientation||L("orientation"),h=L("spread"),l=(h=t&&t.spreadView||!!h&&"false"!=h,t&&t.viewportElement||document.body);if(t={a:i?"loadPublication":"loadXML",url:i||r,autoresize:!0,fragment:n,renderAllPages:!0,userAgentRootURL:t&&t.uaRoot||null,document:t&&t.document||null,userStyleSheet:t&&t.userStyleSheet||null,spreadView:h,pageBorder:1},o&&a)e=o+" "+a;else{switch(u){case"A5":o="148mm",a="210mm";break;case"A4":o="210mm",a="297mm";break;case"A3":o="297mm",a="420mm";break;case"B5":o="176mm",a="250mm";break;case"B4":o="250mm",a="353mm";break;case"letter":o="8.5in",a="11in";break;case"legal":o="8.5in",a="14in";break;case"ledger":o="11in",a="17in"}o&&a&&(e=u,"landscape"===s&&(e=e?e+" landscape":null,u=o,o=a,a=u))}o&&a&&(t.viewport={width:o,height:a},(u=document.createElement("style")).textContent="@page { size: "+e+"; margin: 0; }",document.head.appendChild(u)),fv(new Yg(window,l,"main",dm),t)}),e.vivliostyle}.bind(window),e.exports=i({})}(e={exports:{}},e.exports),e.exports),i=function(t,e){var n=e.title;void 0===n&&(n="");var i=e.resourcesUrl;void 0===i&&(i="resources/");var r=e.printCallback;void 0===r&&(r=function(t){return t.print()});var o=e.hideIframe;void 0===o&&(o=!0);var a=e.removeIframe;void 0===a&&(a=!0),this.htmlDoc=t,this.title=n,this.resourcesUrl=i,this.printCallback=r,this.hideIframe=o,this.removeIframe=a};i.prototype.init=function(){this.iframe=document.createElement("iframe"),this.hideIframe&&(this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.borderWidth=0),this.window=window,this.window.printInstance=this,this.iframe.srcdoc="<!DOCTYPE html>\n        <html data-vivliostyle-paginated=\"true\">\n            <head>\n                <meta charset='utf-8'/>\n                <meta name='viewport' content='width=device-width, initial-scale=1.0'/>\n                <title>"+this.title+'</title>\n                <link rel="stylesheet" href="'+this.resourcesUrl+'vivliostyle-viewport-screen.css" media="screen"/>\n                <link rel="stylesheet" href="'+this.resourcesUrl+"vivliostyle-viewport.css\"/>\n                <style>\n                    html[data-vivliostyle-paginated] {\n                        width: 100%;\n                        height: 100%;\n                    }\n                    html[data-vivliostyle-paginated] body,\n                    html[data-vivliostyle-paginated] [data-vivliostyle-viewer-viewport] {\n                        width: 100% !important;\n                        height: 100% !important;\n                    }\n                    html[data-vivliostyle-paginated],\n                    html[data-vivliostyle-paginated] body {\n                        margin: 0;\n                        padding: 0;\n                    }\n                </style>\n                <style id='vivliostyle-page-rules'></style>\n            </head>\n            <body onload='parent.printInstance.runInIframe(window)'>\n                <div id=\"vivliostyle-viewer-viewport\"></div>\n            </body>\n        </html>",document.body.appendChild(this.iframe)},i.prototype.runInIframe=function(t){var e=this;return this.iframeWin=t,this.preparePrint().then(function(){return e.browserPrint()}).then(function(){return e.cleanUp()})},i.prototype.preparePrint=function(){this.iframeWin.document.title=this.title;var t=new Blob([this.htmlDoc],{type:"text/html"}),e=URL.createObjectURL(t),i=new n.viewer.Viewer({viewportElement:this.iframeWin.document.body.firstElementChild,window:this.iframeWin,userAgentRootURL:""+this.resourcesUrl});return new Promise(function(t){i.addListener("readystatechange",function(){"complete"===i.readyState&&t()}),i.loadDocument({url:e})})},i.prototype.browserPrint=function(){this.printCallback(this.iframeWin)},i.prototype.cleanUp=function(){delete this.window.printInstance,this.removeIframe&&this.iframe.parentElement.removeChild(this.iframe)},document.getElementById("print").addEventListener("click",function(){var t=document.getElementById("html").value,e=document.getElementById("css").value,n=document.getElementById("title").value;!function(t,e){new i(t,e).init()}("\n        <!doctype html>\n        <html>\n            <head>\n                <title>"+n+"</title>\n                <style>"+e+"</style>\n            <head>\n            <body>"+t+"</body>\n        </html>",{title:n,resourcesUrl:window.location.href+"resources/",printCallback:function(t){t.document.querySelectorAll("[data-vivliostyle-page-container]").length;t.print()},hideIframe:!0,removeIframe:!0})})}();
//# sourceMappingURL=bundle.js.map
